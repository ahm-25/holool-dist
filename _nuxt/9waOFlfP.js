import{_ as S}from"./B9HkRxPe.js";import{D as H}from"./COfL5F2m.js";import{E as R,W as q,c as n,a as e,b as d,C as r,t as s,F as J,B as O,J as g,w as W,m as f,r as h,o as i,N as D}from"./CPAe5scI.js";import{_ as G}from"./e2BhSMQC.js";import{a as K,b as Q}from"./DG626kXz.js";import{u as U}from"./C0TKYP46.js";import{P as X}from"./CnYtl7jT.js";import{c as j}from"./DFnX8DPC.js";import{T as Y}from"./DrSl1x1c.js";import"./DtYY6JNH.js";import"./CmDsr2N7.js";import"./DqsQrZ2N.js";const Z=j("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);const ee=j("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),te={class:"min-h-screen w-full flex flex-col items-center justify-start pt-20 p-4 md:p-8 relative overflow-hidden"},se={class:"w-full max-w-7xl z-10 flex flex-col"},oe={class:"flex justify-between items-center w-full mb-6"},le={class:"font-medium"},ne={key:0,class:"flex items-center justify-center min-h-[400px]"},ie={key:1,class:"flex flex-col items-center justify-center min-h-[400px]"},ae={class:"text-lg font-medium text-[#5d4037]"},re={key:2,class:"flex flex-col items-center justify-center min-h-[400px]"},de={class:"text-lg font-medium text-stone-600"},ce={key:3},ue={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8"},me={class:"relative w-full h-48 rounded-[1.5rem] overflow-hidden"},pe=["src","alt"],ve={class:"pt-3 px-1"},fe={class:"flex justify-between items-start mb-1"},he={class:"text-[#3e2723] font-bold text-lg line-clamp-1"},xe={class:"bg-[#E8D5CC]/50 text-[#8d6e63] px-3 py-1 rounded-lg text-xs font-bold"},_e={class:"text-[#8d6e63] text-sm mb-2 font-medium"},ge={class:"flex items-center justify-end gap-1 mb-4"},be={class:"text-[#8F300E] font-bold text-xl"},we=["src"],ye={class:"flex gap-3"},ke=["onClick"],Ce={class:"text-sm font-bold"},$e=["onClick"],De={class:"text-sm font-bold"},je={key:0,class:"flex justify-center gap-2"},Ee={class:"flex items-center gap-2"},Fe={class:"px-4 py-2 bg-[#8d6e63] text-white rounded-xl font-medium"},Ae={class:"text-[#5d4037]"},ze={class:"text-[#5d4037] font-medium"},Be={class:"flex flex-col items-center p-2"},Me={class:"w-24 h-24 mb-6 flex items-center justify-center rounded-3xl bg-[#FDECEA]"},Te={class:"relative"},Pe={class:"text-2xl font-bold text-[#3e2723] mb-2"},Ie={class:"text-[#8d6e63] text-lg mb-8"},Ne={class:"flex w-full gap-4"},Le=["disabled"],Ve={key:0},Se={key:1,class:"w-6 h-6 border-2 border-[#D32F2F] border-t-transparent rounded-full animate-spin"},et={__name:"index",async setup(He){let u,b;const{t:m,locale:E}=R(),{delete:F}=K(),w=U(),x=f(()=>E.value==="ar"),A=f(()=>[{label:m("devices.breadcrumb.more","المزيد"),to:"/profile/more",active:!1},{label:m("devices.breadcrumb.devices","الأجهزة"),to:"/profile/more/devices",active:!0}]),y=h(1),{data:k,pending:z,error:B,refresh:C}=([u,b]=q(()=>Q("/machines",{query:{page:y},key:"devices-list"})),u=await u,b(),u),_=f(()=>k.value?.data?.data||[]),a=f(()=>k.value?.data?.pagination||null),c=h(!1),p=h(null),v=h(!1),M=t=>{t.target.src="/placeholder-device.jpg"},T=t=>{D(`/profile/more/devices/edit/${t}`)},P=t=>{p.value=t,c.value=!0},I=async()=>{if(p.value){v.value=!0;try{await F(`/delete-machine/${p.value}`),w.success(m("devices.deleteSuccess","تم حذف الجهاز بنجاح")),c.value=!1,C()}catch{w.error(m("devices.deleteError","فشل حذف الجهاز"))}finally{v.value=!1,p.value=null}}},$=t=>{y.value=t,C()};return(t,o)=>{const N=S,L=H;return i(),n("div",te,[e("div",se,[e("div",oe,[d(N,{items:A.value,direction:x.value?"rtl":"ltr"},null,8,["items","direction"]),e("button",{onClick:o[0]||(o[0]=l=>("navigateTo"in t?t.navigateTo:r(D))("/profile/more/devices/add-device")),class:"flex items-center gap-2 px-4 py-2 bg-[#8d6e63] hover:bg-[#a04824] text-white rounded-xl transition-all duration-300 shadow-md hover:shadow-lg"},[d(r(X),{size:20}),e("span",le,s(t.$t("devices.addDevice","إضافة جهاز")),1)])]),r(z)?(i(),n("div",ne,[...o[5]||(o[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-[#8d6e63] border-t-transparent"},null,-1)])])):r(B)?(i(),n("div",ie,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 mb-4 text-[#D4A59A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",ae,s(t.$t("devices.error","حدث خطأ أثناء تحميل الأجهزة")),1)])):!_.value||_.value.length===0?(i(),n("div",re,[o[7]||(o[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 mb-4 text-[#D4A59A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("rect",{x:"4",y:"6",width:"16",height:"12",rx:"2","stroke-width":"2",stroke:"currentColor"}),e("path",{d:"M8 18v2h8v-2","stroke-width":"2",stroke:"currentColor"})],-1)),e("p",de,s(t.$t("devices.empty","لا توجد أجهزة مرتبطة حالياً.")),1)])):(i(),n("div",ce,[e("div",ue,[(i(!0),n(J,null,O(_.value,l=>(i(),n("div",{key:l.id,class:"group bg-[#F9F5F1] rounded-[2rem] overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 p-3"},[e("div",me,[e("img",{src:l.image||"/placeholder-device.jpg",alt:l.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:M},null,40,pe)]),e("div",ve,[e("div",fe,[e("h3",he,s(l.title),1),e("span",xe,s(l.type==="sale"?t.$t("devices.sale","بيع"):t.$t("devices.rent","إيجار")),1)]),e("p",_e,s(t.$t("devices.class","فئة الجهاز"))+" : "+s(l.device_class),1),e("div",ge,[e("span",be,s(l.price),1),e("img",{src:r(G),alt:"SAR",class:"w-5 h-5 object-contain"},null,8,we)]),e("div",ye,[e("button",{onClick:V=>T(l.id),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[#8F300E] hover:bg-[#7a290c] text-white rounded-xl transition-all duration-300 shadow-sm"},[e("span",Ce,s(t.$t("devices.edit","تعديل")),1),d(r(ee),{size:16})],8,ke),e("button",{onClick:V=>P(l.id),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[#E8D5CC] hover:bg-[#dcb8a8] text-[#D32F2F] rounded-xl transition-all duration-300 shadow-sm"},[e("span",De,s(t.$t("devices.delete","حذف الجهاز")),1),d(r(Y),{size:16})],8,$e)])])]))),128))]),a.value&&a.value.total_pages>1?(i(),n("div",je,[a.value.perv_page_url?(i(),n("button",{key:0,onClick:o[1]||(o[1]=l=>$(a.value.current_page-1)),class:"px-4 py-2 bg-white/40 hover:bg-white/60 border border-white/30 rounded-xl transition-all duration-300 text-[#5d4037] font-medium"},s(x.value?"التالي":"Previous"),1)):g("",!0),e("div",Ee,[e("span",Fe,s(a.value.current_page),1),e("span",Ae,s(t.$t("devices.of","من")),1),e("span",ze,s(a.value.total_pages),1)]),a.value.next_page_url?(i(),n("button",{key:1,onClick:o[2]||(o[2]=l=>$(a.value.current_page+1)),class:"px-4 py-2 bg-white/40 hover:bg-white/60 border border-white/30 rounded-xl transition-all duration-300 text-[#5d4037] font-medium"},s(x.value?"السابق":"Next"),1)):g("",!0)])):g("",!0)]))]),d(L,{visible:c.value,onClose:o[4]||(o[4]=l=>c.value=!1),width:"500px"},{default:W(()=>[e("div",Be,[e("div",Me,[e("div",Te,[d(r(Z),{size:48,class:"text-[#E53935] transform rotate-180"})])]),e("h3",Pe,s(t.$t("devices.deleteConfirmTitle","حذف الجهاز ؟")),1),e("p",Ie,s(t.$t("devices.deleteConfirmMessage","هل انت متأكد من حذف الجهاز")),1),e("div",Ne,[e("button",{onClick:I,disabled:v.value,class:"flex-1 py-4 bg-[#E8D5CC] text-[#D32F2F] rounded-2xl font-bold text-lg hover:bg-[#dcb8a8] transition-all flex items-center justify-center"},[v.value?(i(),n("div",Se)):(i(),n("span",Ve,s(t.$t("devices.confirmDeleteBtn","تأكيد الحذف")),1))],8,Le),e("button",{onClick:o[3]||(o[3]=l=>c.value=!1),class:"flex-1 py-4 bg-[#C1582E] text-white rounded-2xl font-bold text-lg hover:bg-[#a94d28] transition-all"},s(t.$t("devices.cancelBtn","تراجع")),1)])])]),_:1},8,["visible"])])}}};export{et as default};
