import{_ as C}from"./GzQTdmL6.js";import{_ as $,E as k,r as n,k as A,g as B,u as E,c as L,a as t,b as h,M as u,C as a,t as o,w as N,P as V,Q as z,Y as M,A as T,J as j,d as F,o as x}from"./DtlkFUv2.js";import{D as S}from"./FJ4yhVG2.js";import{a as W,u as I}from"./BcraiT0z.js";import{u as R}from"./qIaXEmvY.js";import{L as U}from"./CmNDYHO1.js";import"./CbXOsLjH.js";import"./B6LoSh53.js";import"./B8u25cvq.js";import"./CY06FC8a.js";const H=""+new URL("wallet.C9yFoWXo.png",import.meta.url).href,J={class:"relative z-10 w-full max-w-2xl mx-auto flex flex-col flex-1 justify-center"},P={class:"flex flex-col items-center gap-2"},Q={class:"text-[#5D4037]/70 font-medium text-lg sm:text-xl"},X={class:"flex items-center gap-2"},Y={class:"text-3xl sm:text-4xl font-bold text-[#5D4037]"},q={class:"text-xl sm:text-2xl font-bold text-[#5D4037]"},G={class:"flex flex-col gap-6 text-center"},K={class:"text-2xl font-bold text-[#5D3A34]"},O={class:"bg-[#8B3E2D]/5 rounded-2xl p-4 border border-[#8B3E2D]/10"},Z={class:"text-[#5D3A34]/60 text-sm block"},ee={class:"text-xl font-bold text-[#8B3E2D]"},te={class:"flex flex-col gap-2 text-start"},le={class:"font-bold text-[#5D3A34] px-1"},ae={class:"main-input"},oe=["placeholder"],se=["disabled"],re={__name:"index",setup(ne){const{t:d}=k(),{get:g}=W(),{upload:_}=I(),p=R(),i=n(!1),m=n(null),c=n(!1),r=n(!1),s=n(""),f=async()=>{try{const e=await g("/show-wallet");m.value=e}catch(e){console.error("Error fetching wallet data:",e)}};A(async()=>{setTimeout(()=>{i.value=!0},50),await f()});const b=B(()=>{var e,l;return((l=(e=m.value)==null?void 0:e.data)==null?void 0:l.balance)||0}),v=()=>{c.value=!0},y=async()=>{if(!r.value){r.value=!0;try{const e=new FormData;e.append("amount",s.value),await _("/charge-wallet",e),p.success(d("profile.more.wallet.success_msg")),c.value=!1,s.value="",await f()}catch(e){console.error("Charge error:",e),p.error(e.error||d("profile.more.wallet.error_msg"))}finally{r.value=!1}}};return E({title:d("profile.more.wallet.breadcrumb")}),(e,l)=>{const D=C;return x(),L("div",{class:u(["min-h-screen main-gradient-bg w-full flex flex-col p-6 sm:p-10 relative overflow-hidden transition-all duration-700",a(i)?"opacity-100 translate-y-0":"opacity-0 translate-y-6"])},[l[3]||(l[3]=t("div",{class:"absolute top-0 left-0 w-full h-full pointer-events-none z-0"},[t("div",{class:"absolute blob-anim top-[-10%] left-[-10%] w-[50%] h-[50%] bg-white/10 rounded-full blur-[100px]"}),t("div",{class:"absolute blob-anim bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-[#8B5E50]/20 rounded-full blur-[80px]"})],-1)),t("div",{class:u(["relative z-10 transition-all duration-700",a(i)?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"])},[h(D,{items:[{label:e.$t("profile.more.title"),to:"/profile/more",active:!1},{label:e.$t("profile.more.wallet.breadcrumb"),to:"/profile/more/wallet",active:!0}],direction:e.$i18n.locale==="ar"?"rtl":"ltr"},null,8,["items","direction"])],2),t("div",J,[t("div",{class:u(["bg-white/25 backdrop-blur-xl border border-white/40 shadow-xl rounded-[2.5rem] p-8 sm:p-12 transition-all duration-700 flex flex-col items-center gap-8",a(i)?"opacity-100 scale-100":"opacity-0 scale-95"])},[l[2]||(l[2]=t("div",{class:"relative"},[t("img",{src:H,alt:"Wallet",class:"w-32 h-32 sm:w-48 sm:h-48 object-contain drop-shadow-2xl"})],-1)),t("div",P,[t("span",Q,o(e.$t("profile.more.wallet.current_balance")),1),t("div",X,[t("span",Y,o(Number(a(b)).toLocaleString()),1),t("span",q,o(e.$t("profile.more.wallet.sar")),1)])]),t("button",{onClick:v,class:"w-full sm:w-64 py-4 px-8 background-btn text-white font-bold text-lg rounded-2xl shadow-lg shadow-[#A64D36]/30 hover:shadow-xl hover:shadow-[#A64D36]/40 hover:-translate-y-1 transition-all duration-300 active:scale-95"},o(e.$t("profile.more.wallet.charge_wallet")),1)],2)]),h(S,{visible:a(c),onClose:l[1]||(l[1]=w=>c.value=!1),width:"600px"},{default:N(()=>[t("div",G,[t("h2",K,o(e.$t("profile.more.wallet.charge_dialog_title")),1),t("div",O,[t("span",Z,o(e.$t("profile.more.wallet.current_balance")),1),t("span",ee,o(Number(a(b)).toLocaleString())+" "+o(e.$t("profile.more.wallet.sar")),1)]),t("div",te,[t("label",le,o(e.$t("profile.more.wallet.amount_label")),1),t("div",ae,[V(t("input",{"onUpdate:modelValue":l[0]||(l[0]=w=>M(s)?s.value=w:null),type:"number",placeholder:e.$t("profile.more.wallet.amount_placeholder"),class:"w-full bg-transparent outline-none text-[#5D3A34]"},null,8,oe),[[z,a(s)]])])]),t("button",{onClick:y,disabled:a(r)||!a(s),class:"w-full py-4 background-btn text-white font-bold text-lg rounded-2xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all mt-4 flex items-center justify-center gap-2"},[a(r)?(x(),T(a(U),{key:0,class:"w-5 h-5 animate-spin"})):j("",!0),F(" "+o(e.$t("profile.more.wallet.confirm_btn")),1)],8,se)])]),_:1},8,["visible"])],2)}}},xe=$(re,[["__scopeId","data-v-9905c319"]]);export{xe as default};
