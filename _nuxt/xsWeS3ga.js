import{_ as Y}from"./j2TnU8dc.js";import{_ as Z}from"./CYkIFUSy.js";import{a4 as K,H as O,G as W,E as X,g as ee,r as R,u as te,c as l,o as d,a as s,b as u,C as t,S as se,P as p,J as m,t as n,Q as f,T as g,Y as h,Z as oe,F as re,B as ae,d as ne}from"./CfVQ7UYt.js";import{c as ie,b as _,g as le,u as de}from"./CcR_tazT.js";import{u as ce}from"./gV_JJjXA.js";import{a as ue}from"./DCGxFebN.js";import{C as pe}from"./Bq8QAi8J.js";import{P as me}from"./V3m5AQcc.js";import{L as ge}from"./CbWspJ7n.js";import"./CnFysPOj.js";import"./CNZ5aXak.js";import"./CdZn6wq7.js";import"./CJ0lsQ-3.js";import"./BqimD7Il.js";const he={class:"min-h-screen bg-gradient-to-br from-[#e8d5cc] to-[#dcb8a8] py-8 px-4 flex flex-col"},be={class:"container mx-auto"},fe={class:"flex-1 flex items-center justify-center"},_e={class:"bg-white/30 backdrop-blur-md rounded-[3rem] p-8 w-full max-w-2xl shadow-xl border border-white/40"},ye={class:"space-y-2"},ve={class:"block text-right text-[#5d4037] font-bold pr-2"},xe=["placeholder"],qe={key:0,class:"text-red-600 text-sm block text-right pr-2"},ke={class:"space-y-2"},we={class:"block text-right text-[#5d4037] font-bold pr-2"},Re={class:"relative"},$e={value:"",disabled:"",selected:""},Pe=["value"],Ee={class:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500"},Ce={key:0,class:"text-red-600 text-sm block text-right pr-2"},Ae={class:"space-y-2"},De={class:"block text-right text-[#5d4037] font-bold pr-2"},Fe=["placeholder"],Be={key:0,class:"text-red-600 text-sm block text-right pr-2"},Le={class:"space-y-2"},Se={class:"block text-right text-[#5d4037] font-bold pr-2"},Ve=["placeholder"],Me={class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"},Ne={class:"border border-gray-500 rounded-full p-0.5"},Ue={key:0,class:"text-red-600 text-sm block text-right pr-2"},ze={class:"space-y-2"},Te={class:"block text-right text-[#5d4037] font-bold pr-2"},Ie=["placeholder"],je={key:0,class:"text-red-600 text-sm block text-right pr-2"},He={class:"pt-4"},Qe=["disabled"],Ge={key:0},Je={key:1,class:"flex items-center justify-center gap-2"},dt={__name:"request",setup(Ye){const F=K(),B=O(),y=W(),{t:i}=X(),{success:L,error:$}=ce(),P=F.query.id,S=ie({rentPeriod:_().required(i("validation.required")),quantity:le().required(i("validation.required")),startDate:_().required(i("validation.required")),location:_().required(i("validation.required")),notes:_().nullable()}),V=ee(()=>[{label:i("navigation.home"),to:y("/"),active:!1},{label:i("categories.medicalRental.title"),to:y("/profile/sections/medical-rent"),active:!1},{label:i("categories.medicalRent.request.title"),to:"",active:!0}]),{handleSubmit:M,errors:a,isSubmitting:E,defineField:c,setFieldValue:N}=de({validationSchema:S}),[v,U]=c("rentPeriod"),[x,z]=c("quantity"),[q,T]=c("startDate"),[k,I]=c("location"),[w,j]=c("notes"),b=R(!1),C=R(null),A=R(null),H=o=>{N("location",o.address),C.value=o.lat,A.value=o.lng,b.value=!1},{post:Q}=ue(),D=M(async o=>{if(!P){$(i("categories.medicalRent.request.deviceNotFound"));return}try{const e=await Q("/orders/create-rent-order",null,{query:{machine_id:P,rent_period:o.rentPeriod,quantity:o.quantity,lat:C.value,lng:A.value,map_desc:o.location,notes:o.notes||""}});if((e==null?void 0:e.key)==="success"||(e==null?void 0:e.status)===200||e!=null&&e.success)L((e==null?void 0:e.msg)||i("categories.medicalRent.request.success")),B.push(y("/profile/sections/medical-rent"));else throw new Error((e==null?void 0:e.msg)||i("categories.medicalRent.request.error"))}catch(e){console.error(e),$(e.error||e.message||i("categories.medicalRent.request.error"))}});return te({title:i("categories.medicalRent.request.title")}),(o,e)=>{const G=Y,J=Z;return d(),l("div",he,[s("div",be,[u(G,{items:t(V),direction:"ltr"},null,8,["items"])]),s("div",fe,[s("div",_e,[s("form",{onSubmit:e[6]||(e[6]=se((...r)=>t(D)&&t(D)(...r),["prevent"])),class:"space-y-6"},[s("div",ye,[s("label",ve,n(o.$t("categories.medicalRent.request.rentPeriod")),1),p(s("input",g({"onUpdate:modelValue":e[0]||(e[0]=r=>h(v)?v.value=r:null)},t(U),{type:"text",placeholder:o.$t("categories.medicalRent.request.rentPeriod"),class:["w-full bg-[#F5EBE0]/80 border-0 rounded-xl py-4 px-6 text-right placeholder-gray-400 focus:ring-2 focus:ring-[#A63C12]/50 outline-none",{"ring-2 ring-red-500/50":t(a).rentPeriod}]}),null,16,xe),[[f,t(v)]]),t(a).rentPeriod?(d(),l("span",qe,n(t(a).rentPeriod),1)):m("",!0)]),s("div",ke,[s("label",we,n(o.$t("categories.medicalRent.request.quantity")),1),s("div",Re,[p(s("select",g({"onUpdate:modelValue":e[1]||(e[1]=r=>h(x)?x.value=r:null)},t(z),{class:["w-full bg-[#F5EBE0]/80 border-0 rounded-xl py-4 px-6 text-right placeholder-gray-400 focus:ring-2 focus:ring-[#A63C12]/50 outline-none appearance-none text-[#5d4037]",{"ring-2 ring-red-500/50":t(a).quantity}]}),[s("option",$e,n(o.$t("categories.medicalRent.request.selectQuantity")),1),(d(),l(re,null,ae(10,r=>s("option",{key:r,value:r},n(r),9,Pe)),64))],16),[[oe,t(x)]]),s("div",Ee,[u(t(pe),{size:"20"})])]),t(a).quantity?(d(),l("span",Ce,n(t(a).quantity),1)):m("",!0)]),s("div",Ae,[s("label",De,n(o.$t("categories.medicalRent.request.startDate")),1),p(s("input",g({"onUpdate:modelValue":e[2]||(e[2]=r=>h(q)?q.value=r:null)},t(T),{type:"date",placeholder:o.$t("categories.medicalRent.request.startDate"),class:["w-full bg-[#F5EBE0]/80 border-0 rounded-xl py-4 px-6 text-right placeholder-gray-400 focus:ring-2 focus:ring-[#A63C12]/50 outline-none block",{"ring-2 ring-red-500/50":t(a).startDate}]}),null,16,Fe),[[f,t(q)]]),t(a).startDate?(d(),l("span",Be,n(t(a).startDate),1)):m("",!0)]),s("div",Le,[s("label",Se,n(o.$t("categories.medicalRent.request.deviceLocation")),1),s("div",{class:"relative cursor-pointer",onClick:e[4]||(e[4]=r=>b.value=!0)},[p(s("input",g({"onUpdate:modelValue":e[3]||(e[3]=r=>h(k)?k.value=r:null)},t(I),{type:"text",readonly:"",placeholder:o.$t("categories.medicalRent.request.deviceLocation"),class:["w-full bg-[#F5EBE0]/80 border-0 rounded-xl py-4 px-6 pl-12 text-right placeholder-gray-400 focus:ring-2 focus:ring-[#A63C12]/50 outline-none cursor-pointer",{"ring-2 ring-red-500/50":t(a).location}]}),null,16,Ve),[[f,t(k)]]),s("div",Me,[s("div",Ne,[u(t(me),{size:"14"})])])]),t(a).location?(d(),l("span",Ue,n(t(a).location),1)):m("",!0)]),s("div",ze,[s("label",Te,n(o.$t("categories.medicalRent.request.notes")),1),p(s("textarea",g({"onUpdate:modelValue":e[5]||(e[5]=r=>h(w)?w.value=r:null)},t(j),{rows:"4",placeholder:o.$t("categories.medicalRent.request.notes"),class:["w-full bg-[#F5EBE0]/80 border-0 rounded-xl py-4 px-6 text-right placeholder-gray-400 focus:ring-2 focus:ring-[#A63C12]/50 outline-none resize-none",{"ring-2 ring-red-500/50":t(a).notes}]}),null,16,Ie),[[f,t(w)]]),t(a).notes?(d(),l("span",je,n(t(a).notes),1)):m("",!0)]),s("div",He,[s("button",{type:"submit",disabled:t(E),class:"w-full bg-gradient-to-r from-[#A63C12] to-[#8F300E] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed"},[t(E)?(d(),l("span",Je,[ne(n(o.$t("categories.medicalRent.request.sending"))+" ",1),u(t(ge),{class:"animate-spin",size:"20"})])):(d(),l("span",Ge,n(o.$t("categories.medicalRent.request.send")),1))],8,Qe)])],32)])]),u(J,{"is-open":t(b),onClose:e[7]||(e[7]=r=>b.value=!1),onLocationSelected:H},null,8,["is-open"])])}}};export{dt as default};
