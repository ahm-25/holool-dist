import{a as N}from"./CEwE9Az9.js";import{_ as j,r as v,U as $,g as B,k as A,c as r,o as i,a,t as l,J as p,F as E,B as S,I as V}from"./B5HeACpe.js";import"./P9Gc60wC.js";const q={class:"min-h-screen flex items-center justify-center p-4"},F={class:"w-full max-w-3xl rounded-3xl bg-[#d8b7aa]/55 backdrop-blur-md border border-white/10 shadow-2xl p-6 sm:p-8"},I={class:"flex items-center justify-between mb-6"},L={class:"text-xl sm:text-2xl font-bold text-[#2b1b16]"},D={key:0,class:"flex items-center justify-center py-16"},H={key:1},J={key:0,class:"mb-4 rounded-xl bg-red-50/90 text-red-800 p-4 border border-red-200"},P={class:"flex items-center justify-between gap-3"},U={class:"text-sm font-semibold"},Z={key:1,class:"space-y-3"},z={class:"w-16 shrink-0 flex flex-col items-center justify-between py-2 text-[#2b1b16]/70"},G={class:"text-[10px] font-semibold leading-none"},K=["onClick","aria-label"],Q={class:"flex-1 min-w-0 rounded-2xl bg-white/35 border border-white/25 px-4 py-3"},R={class:"text-sm sm:text-base font-bold text-[#2b1b16] leading-snug truncate"},T={class:"mt-1 text-xs sm:text-sm text-[#2b1b16]/80 leading-relaxed"},W={key:0,class:"pt-4 flex items-center justify-between"},X={class:"text-xs text-[#2b1b16]/70"},Y=["disabled"],O={key:2,class:"text-center text-[#2b1b16]/70 py-14"},ee={__name:"index",setup(te){const{get:x}=N(),n=v([]),h=v(!0),b=v(!1),u=v(null),d=v(null),c=v(1),{$i18n:m}=$(),_=s=>{if(s==null)return"";const e=String(s);return m!=null&&m.t&&m.t(e)||e},y=B(()=>{const s=d.value;if(!s)return!1;const e=Number(s.total_pages||0),o=Number(s.current_page||0);return e>0&&o>0&&o<e}),g=s=>{var k;const e=((k=s==null?void 0:s.data)==null?void 0:k.notifications)||null,o=Array.isArray(e==null?void 0:e.data)?e.data:[],w=(e==null?void 0:e.pagination)||null;return{list:o,pag:w}},f=async()=>{h.value=!0,u.value=null;try{c.value=1;const s=await x("/notifications",{query:{page:c.value}}),{list:e,pag:o}=g(s);d.value=o,n.value=e}catch{u.value=t("notifications.loadError"),n.value=[],d.value=null}finally{h.value=!1}},M=async()=>{if(!(!y.value||b.value)){b.value=!0,u.value=null;try{c.value=c.value+1;const s=await x("/notifications",{query:{page:c.value}}),{list:e,pag:o}=g(s);d.value=o,e.length&&(n.value=[...n.value,...e])}catch{u.value=t("notifications.loadMoreError"),c.value=Math.max(1,c.value-1)}finally{b.value=!1}}},C=s=>{n.value=n.value.filter(e=>e.id!==s)};return A(f),(s,e)=>(i(),r("div",q,[a("div",F,[a("div",I,[a("h1",L,l(s.$t("notifications.title")),1),a("button",{onClick:f,class:"text-sm font-semibold text-[#2b1b16]/80 hover:text-[#2b1b16] underline underline-offset-4"},l(s.$t("common.refresh")),1)]),h.value?(i(),r("div",D,e[0]||(e[0]=[a("span",{class:"loader"},null,-1)]))):(i(),r("div",H,[u.value?(i(),r("div",J,[a("div",P,[a("div",U,l(u.value),1),a("button",{onClick:f,class:"text-sm underline underline-offset-4 text-red-700"},l(s.$t("common.retry")),1)])])):p("",!0),n.value&&n.value.length?(i(),r("div",Z,[(i(!0),r(E,null,S(n.value,o=>(i(),r("div",{key:o.id,class:"flex items-stretch gap-3"},[a("div",z,[a("div",G,l(o.created_at||""),1),a("button",{type:"button",onClick:w=>C(o.id),class:"mt-2 inline-flex items-center justify-center w-8 h-8 rounded-lg bg-white/40 hover:bg-white/55 border border-white/30","aria-label":s.$t("common.delete"),title:"حذف"},e[1]||(e[1]=[a("svg",{class:"w-4 h-4 text-[#b42318]",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[a("path",{d:"M9 3h6m-7 4h8m-9 0 1 14h8l1-14M10 11v7m4-7v7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,K)]),a("div",Q,[a("div",R,l(_(o.title)),1),a("div",T,l(_(o.body)),1)]),e[2]||(e[2]=V('<div class="w-12 shrink-0 flex items-start justify-center pt-2" data-v-52c8e349><div class="w-10 h-10 rounded-full bg-white/55 border border-white/35 flex items-center justify-center" data-v-52c8e349><svg class="w-5 h-5 text-[#2b1b16]/70" viewBox="0 0 24 24" fill="none" aria-hidden="true" data-v-52c8e349><path d="M4 12a8 8 0 0 1 16 0v5a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3v-5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-52c8e349></path><path d="M9 10h.01M15 10h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round" data-v-52c8e349></path></svg></div></div>',1))]))),128)),d.value&&d.value.total_pages>1?(i(),r("div",W,[a("div",X,l(d.value.count_items??n.value.length)+" / "+l(d.value.total_items??d.value.count_items??n.value.length),1),y.value?(i(),r("button",{key:0,type:"button",disabled:b.value,onClick:M,class:"px-4 py-2 rounded-xl bg-white/45 hover:bg-white/60 border border-white/30 text-sm font-semibold text-[#2b1b16] disabled:opacity-60"},l(b.value?s.$t("common.loading"):s.$t("common.loadMore")),9,Y)):p("",!0)])):p("",!0)])):(i(),r("div",O,l(s.$t("notifications.empty")),1))]))])]))}},ne=j(ee,[["__scopeId","data-v-52c8e349"]]);export{ne as default};
