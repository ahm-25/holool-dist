import{_ as N,N as P,W as A,g as O,r as V,c as o,o as l,J as i,b as c,C as d,a as e,t as n,F as v,B as h,w as I,S as R,a3 as T}from"./BYEf0NBg.js";import{b as m}from"./Csww0FSG.js";import{_ as q}from"./BlwJ1uXT.js";import{C as z}from"./D2tlbMjF.js";import{M as J}from"./C9Mv1BY4.js";import{P as L}from"./Cim1gGfE.js";import{S as U}from"./DN2XmewG.js";import"./WbP1RNmY.js";import"./BIzi2wWj.js";import"./Co_PEXwa.js";import"./cSiaAbyi.js";const W={class:"min-h-screen pb-24 font-sans text-right relative bg-[#FDF8F6]"},X={key:0,class:"flex items-center justify-center min-h-[60vh]"},G={key:1,class:"max-w-7xl mx-auto px-4 py-12 flex flex-col items-center text-center"},H={class:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mb-4"},K={class:"text-gray-500 mb-6"},Q={key:2,class:"pt-8 px-4 md:px-8 max-w-7xl mx-auto"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},ee={class:"space-y-4"},te={class:"flex justify-between items-center"},se={class:"text-gray-700 font-bold"},oe={class:"flex justify-between items-center"},le={class:"text-gray-700 font-bold"},ae={class:"flex justify-between items-center"},re={class:"text-gray-700 font-bold"},ne={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},de={class:"space-y-4"},ie={key:0,class:"space-y-2"},ce={class:"flex justify-between items-center"},ue={class:"text-gray-700 font-bold"},xe={class:"flex justify-between items-center"},fe={class:"text-gray-700 font-bold"},be={class:"flex justify-between items-start pt-2 border-t border-gray-100"},me={class:"flex items-center gap-1 text-[#bf4e26] font-bold"},pe={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},ve={class:"text-gray-500 text-sm leading-relaxed"},he={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},ge={class:"flex items-center justify-between"},_e={class:"flex items-center gap-3"},ye={class:"w-14 h-14 rounded-xl overflow-hidden shadow-sm"},we=["src"],ke={class:"font-bold text-gray-800"},Ce={class:"flex items-center gap-1 text-gray-400 text-xs mt-1",dir:"ltr"},je={key:0,class:"mt-12"},$e={class:"grid grid-cols-1 gap-4"},De={class:"flex items-center gap-4 w-full md:w-auto"},Fe={class:"w-16 h-16 rounded-full overflow-hidden border-2 border-white shadow-sm"},Me=["src"],Se={class:"font-bold text-gray-800 text-lg"},Be={class:"flex text-yellow-400 text-xs mt-1"},Ee={class:"flex items-center gap-8 w-full md:w-auto justify-between md:justify-end"},Ne={class:"flex flex-col items-end"},Pe={class:"flex items-baseline gap-1 text-[#bf4e26] font-bold text-2xl"},Ae={key:0,class:"text-xs text-gray-400 mt-1"},Oe={class:"flex gap-2"},Ve=["onClick"],Ie=["onClick"],Re={class:"mt-12 flex flex-col md:flex-row gap-4 justify-center items-center pb-20"},Te={key:0,class:"w-full md:w-64 bg-[#bf4e26] text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-[#bf4e26]/30 hover:scale-[1.02] transition-all"},qe={key:2,class:"w-full md:w-64 bg-gray-100 text-gray-700 py-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition-all"},ze={class:"space-y-3"},Je={__name:"1[id]",async setup(Le){let b,g;const p=P().params.id,{data:D,pending:F,error:_,refresh:u}=([b,g]=A(()=>m(`/special-order-details/${p}`,{key:`special-order-${p}`})),b=await b,g(),b),s=O(()=>{var r;return((r=D.value)==null?void 0:r.data)||null}),x=V(!1),M=()=>{x.value=!0},S=async()=>{try{const{data:r}=await m("/orders/cancel-order",{method:"POST",body:{order_id:p}});r.value&&(r.value.key==="success"||r.value.status===!0)&&(x.value=!1,u())}catch(r){console.error("Cancel failed",r)}},B=async r=>{try{const{data:t}=await m(`/orders/accept-offer/${r}`);t.value&&(t.value.key==="success"||t.value.status===!0)&&u()}catch(t){console.error("Accept fail",t)}},E=async r=>{try{const{data:t}=await m(`/orders/refuse-offer/${r}`);t.value&&(t.value.key==="success"||t.value.status===!0)&&u()}catch(t){console.error("Reject fail",t)}};return(r,t)=>{var y,w,k,C,j,$;return l(),o("div",W,[d(F)?(l(),o("div",X,t[4]||(t[4]=[e("div",{class:"w-16 h-16 border-4 border-[#bf4e26]/20 border-t-[#bf4e26] rounded-full animate-spin"},null,-1)]))):d(_)?(l(),o("div",G,[e("div",H,[c(d(z),{class:"w-10 h-10 text-red-500"})]),t[5]||(t[5]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"}," حدث خطأ أثناء تحميل الطلب ",-1)),e("p",K,n(d(_).message||"فشل تحميل البيانات"),1),e("button",{onClick:t[0]||(t[0]=(...a)=>d(u)&&d(u)(...a)),class:"px-6 py-2 bg-[#bf4e26] text-white rounded-lg hover:bg-[#a64420] transition-colors"}," إعادة المحاولة ")])):s.value?(l(),o("div",Q,[c(q,{items:[{label:"الطلبات",to:"/profile/orders",active:!1},{label:"سوق الأجهزة الطبية",to:"/profile/orders/market",active:!1},{label:"تفاصيل الطلب",active:!0}],class:"mb-8"}),e("div",Y,[e("div",Z,[t[9]||(t[9]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"تفاصيل الطلب :")],-1)),e("div",ee,[e("div",te,[t[6]||(t[6]=e("span",{class:"text-gray-400 text-sm"},"رقم الطلب",-1)),e("span",se,n(s.value.order_num),1)]),e("div",oe,[t[7]||(t[7]=e("span",{class:"text-gray-400 text-sm"},"حالة الطلب",-1)),e("span",le,n(s.value.status_text),1)]),e("div",ae,[t[8]||(t[8]=e("span",{class:"text-gray-400 text-sm"},"نوع الخدمة",-1)),e("span",re,n(s.value.type_text),1)])])]),e("div",ne,[t[13]||(t[13]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"تفاصيل الخدمة :")],-1)),e("div",de,[s.value.machines&&s.value.machines.length?(l(),o("div",ie,[(l(!0),o(v,null,h(s.value.machines,(a,f)=>(l(),o("div",{key:f,class:"flex flex-col gap-2"},[e("div",ce,[t[10]||(t[10]=e("span",{class:"text-gray-400 text-sm"},"اسم الجهاز",-1)),e("span",ue,n(a.machine_name),1)]),e("div",xe,[t[11]||(t[11]=e("span",{class:"text-gray-400 text-sm"},"عدد الأجهزة",-1)),e("span",fe,n(a.quantity)+" "+n(r.$t("cards.rentalDetails.deviceCount")),1)])]))),128))])):i("",!0),e("div",be,[t[12]||(t[12]=e("span",{class:"text-gray-400 text-sm"},"موقع التوصيل",-1)),e("div",me,[c(d(J),{class:"w-4 h-4"}),e("span",null,n(s.value.map_desc),1)])])])]),e("div",pe,[t[14]||(t[14]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"ملاحظات :")],-1)),e("p",ve,n(s.value.notes||"لا توجد ملاحظات"),1)]),e("div",he,[t[15]||(t[15]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"بيانات العميل :")],-1)),e("div",ge,[e("div",_e,[e("div",ye,[e("img",{src:((y=s.value.user)==null?void 0:y.image)||"https://placehold.co/100x100?text=User",class:"w-full h-full object-cover"},null,8,we)]),e("div",null,[e("h4",ke,n(((w=s.value.user)==null?void 0:w.name)||"مصعب بن عمير"),1),e("div",Ce,[c(d(L),{class:"w-3 h-3"}),e("span",null,n(((k=s.value.user)==null?void 0:k.phone)||"966 9494 9494"),1)])])])])])]),s.value.offers&&s.value.offers.length?(l(),o("div",je,[t[17]||(t[17]=e("h3",{class:"text-gray-800 font-bold text-xl mb-6 pr-2"}," عروض الأسعار : ",-1)),e("div",$e,[(l(!0),o(v,null,h(s.value.offers,a=>(l(),o("div",{key:a.id,class:"bg-white/40 backdrop-blur-md border border-white rounded-3xl p-5 flex flex-col md:flex-row items-center justify-between gap-6 hover:shadow-md transition-shadow"},[e("div",De,[e("div",Fe,[e("img",{src:a.providable_image,class:"w-full h-full object-cover"},null,8,Me)]),e("div",null,[e("h4",Se,n(a.providable_name),1),e("div",Be,[(l(),o(v,null,h(5,f=>c(d(U),{key:f,class:"w-3.5 h-3.5 fill-current"})),64))])])]),e("div",Ee,[e("div",Ne,[e("div",Pe,[e("span",null,n(a.price),1),t[16]||(t[16]=e("span",{class:"text-sm font-medium"},"ر.س",-1))]),a.delivery_period?(l(),o("span",Ae,"مدة التوصيل: "+n(a.delivery_period),1)):i("",!0)]),e("div",Oe,[e("button",{onClick:f=>B(a.id),class:"px-8 py-3 bg-[#bf4e26] text-white rounded-2xl font-bold text-sm shadow-lg shadow-[#bf4e26]/20 hover:bg-[#a64420] transition-all"}," قبول ",8,Ve),e("button",{onClick:f=>E(a.id),class:"px-8 py-3 bg-red-50 text-red-500 rounded-2xl font-bold text-sm hover:bg-red-100 transition-all"}," رفض ",8,Ie)])])]))),128))])])):i("",!0),e("div",Re,[((C=s.value.buttons)==null?void 0:C.has_offer)===!1?(l(),o("button",Te," إضافة عرض السعر ")):i("",!0),(j=s.value.buttons)!=null&&j.cancel?(l(),o("button",{key:1,onClick:M,class:"w-full md:w-64 bg-white border-2 border-[#EC2D30] text-[#EC2D30] py-4 rounded-2xl font-bold text-lg hover:bg-red-50 transition-all"}," رفض ")):i("",!0),($=s.value.buttons)!=null&&$.contact_with_admin?(l(),o("button",qe," تواصل مع الإدارة ")):i("",!0)])])):i("",!0),c(T,{name:"scale"},{default:I(()=>[x.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:t[3]||(t[3]=a=>x.value=!1)},[e("div",{class:"bg-white w-full max-w-sm rounded-[2rem] p-8 shadow-2xl text-center",onClick:t[2]||(t[2]=R(()=>{},["stop"]))},[t[18]||(t[18]=e("div",{class:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"text-3xl font-bold"},"!")],-1)),t[19]||(t[19]=e("h3",{class:"text-gray-800 font-bold text-xl mb-2"},"تأكيد الإلغاء",-1)),t[20]||(t[20]=e("p",{class:"text-gray-500 mb-8 px-4"}," هل أنت متأكد من رغبتك في إلغاء هذا الطلب؟ ",-1)),e("div",ze,[e("button",{onClick:S,class:"w-full bg-[#EC2D30] text-white py-4 rounded-2xl font-bold hover:bg-red-600 transition-all shadow-lg shadow-red-200"}," تأكيد الإلغاء "),e("button",{onClick:t[1]||(t[1]=a=>x.value=!1),class:"w-full bg-gray-50 text-gray-600 py-4 rounded-2xl font-bold hover:bg-gray-100 transition-all"}," تراجع ")])])])):i("",!0)]),_:1})])}}},ot=N(Je,[["__scopeId","data-v-1feff7f2"]]);export{ot as default};
