import{_ as g}from"./j2TnU8dc.js";import{_ as b}from"./ChcUWGuu.js";import{K as x,G as w,r,N as y,k as C,a3 as B,c as N,o as P,a as s,b as m,t as V}from"./CfVQ7UYt.js";import{u as k}from"./gV_JJjXA.js";import"./CnFysPOj.js";import"./CNZ5aXak.js";import"./CdZn6wq7.js";import"./x_rD_Ya3.js";const R={class:"min-h-screen w-full relative overflow-hidden"},D={class:"w-full max-w-4xl p-4 flex flex-col items-center mx-auto"},S={class:"mb-8 text-center"},L={class:"text-[#5D4037]/70"},$={__name:"verify-new",setup(M){const a=x(),o=k(),l=B(),p=y(),i=w(),n=r(p.query.phone||""),c=r(""),u=r(!1);C(()=>{n.value||l.push(i("/profile/more/settings/change-phone/new-number"))});const f=async t=>{u.value=!0;try{const e=await a.changePhoneCheckNewCode(t);e.success?(o.success(e.message||"تم تغيير رقم الجوال بنجاح"),l.push(i("/profile/more/settings"))):o.error(e.error||"كود التحقق غير صحيح")}catch{o.error("حدث خطأ أثناء التحقق")}finally{u.value=!1}},d=async()=>{try{const t=await a.changePhoneNewPhone(n.value);t.success?o.success(t.message||"تم إعادة إرسال الكود للرقم الجديد"):o.error(t.error||"فشل إعادة إرسال الكود")}catch{o.error("حدث خطأ أثناء إعادة إرسال الكود")}};return(t,e)=>{const h=g,v=b;return P(),N("div",R,[e[2]||(e[2]=s("div",{class:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-white/10 rounded-full blur-[100px] pointer-events-none"},null,-1)),e[3]||(e[3]=s("div",{class:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-[#8B4513]/10 rounded-full blur-[100px] pointer-events-none"},null,-1)),m(h,{items:[{label:"الاعدادات",to:"/profile/more/settings",active:!1},{label:"تغيير رقم الجوال",to:"/profile/more/settings/change-phone",active:!1},{label:"تحقق الرقم الجديد",to:"/profile/more/settings/change-phone/verify-new",active:!0}],direction:"rtl"}),s("div",D,[s("div",S,[e[1]||(e[1]=s("h2",{class:"text-2xl font-bold text-[#5D4037] mb-2"},"تحقق من الرقم الجديد",-1)),s("p",L,"تم إرسال كود التحقق إلى الرقم "+V(n.value),1)]),m(v,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=_=>c.value=_),length:4,"initial-time":59,"confirm-text":"تأكيد",onConfirm:f,onResend:d},null,8,["modelValue"])])])}}};export{$ as default};
