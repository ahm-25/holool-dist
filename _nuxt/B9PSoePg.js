import{E as j,K as F,G as B,r as n,g as $,c as q,a as s,L as M,t as a,C as e,S as R,b as c,w as b,T as y,O as A,a2 as L,o as N}from"./CPAe5scI.js";import{_ as T}from"./Bp3A_EUz.js";import{c as V,b as z,d as O,u as G,F as _,E as P}from"./CiiINpub.js";import{u as I}from"./B5NDzdgN.js";import{u as K}from"./C0TKYP46.js";const H=["dir"],J={class:"w-full md:w-[45%] lg:w-[40%] xl:w-[40%] bg-[#E8DED9] relative flex flex-col items-center justify-center p-6 md:p-12 shadow-2xl z-10 overflow-y-auto"},Q={class:"mt-12 md:mt-16 w-full text-center mb-10"},U={class:"text-right"},W={class:"text-3xl font-bold text-brand-textDark mb-2"},X={class:"text-gray-500 text-sm font-medium"},Y={class:"space-y-2"},Z={class:"text-sm text-gray-600 font-bold flex px-1"},ss={class:"relative"},ts=["type"],es={class:"space-y-2"},os={class:"text-sm text-gray-600 font-bold flex px-1"},rs={class:"relative"},as=["type"],ls=["disabled"],ms={__name:"reset",setup(ns){const{t:o,locale:D}=j(),E=F(),m=A(),p=L(),w=B(),f=K(),x=n(m.query.phone||""),h=n(m.query.code||""),i=n(!1),d=n(!1),u=n(!1),{password:k}=I(),C=V({password:k,confirmPassword:z().required(o("validation.required")).oneOf([O("password")],o("validation.passwords_must_match"))}),{handleSubmit:S}=G({validationSchema:C});$(()=>{(!x.value||!h.value)&&p.push(w("/auth/forgot-password"))});const g=S(async v=>{i.value=!0;try{const t=await E.resetPassword(x.value,h.value,v.password);t.success?(f.success(t.message||o("auth.forgotPassword.success")),p.push(w("/auth/login"))):f.error(t.error||o("auth.forgotPassword.errors.resetFailed"))}catch{f.error(o("auth.forgotPassword.errors.resetFailed"))}finally{i.value=!1}});return(v,t)=>(N(),q("div",{class:"h-screen w-full flex flex-col md:flex-row",dir:e(D)==="ar"?"rtl":"ltr"},[s("div",J,[s("div",Q,[t[3]||(t[3]=s("div",{class:"hidden md:flex justify-center mb-8"},[s("img",{src:M,alt:"logo",class:"w-24 h-20"})],-1)),s("div",U,[s("h2",W,a(e(o)("auth.forgotPassword.resetTitle")),1),s("p",X,a(e(o)("auth.forgotPassword.resetSubtitle")),1)])]),s("form",{class:"w-full space-y-5",onSubmit:t[2]||(t[2]=R((...r)=>e(g)&&e(g)(...r),["prevent"]))},[s("div",Y,[s("label",Z,a(e(o)("auth.forgotPassword.newPassword")),1),s("div",ss,[c(e(_),{name:"password"},{default:b(({field:r,meta:l})=>[s("input",y({type:d.value?"text":"password"},r,{class:["w-full bg-[#E9DCD6]/80 border-none rounded-xl px-4 py-4 pr-12 pl-12 font-bold focus:outline-none focus:ring-2 focus:ring-[#A6431F]/30 shadow-sm flex",[l.touched&&l.invalid&&"ring-2 ring-red-500/50"]]}),null,16,ts)]),_:1}),s("button",{type:"button",onClick:t[0]||(t[0]=r=>d.value=!d.value),class:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500"},a(d.value?"ğŸ™ˆ":"ğŸ‘ï¸"),1),t[4]||(t[4]=s("div",{class:"absolute right-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500 pointer-events-none"}," ğŸ”’ ",-1))]),c(e(P),{name:"password",class:"text-red-500 text-xs px-1 block text-right"})]),s("div",es,[s("label",os,a(e(o)("auth.forgotPassword.confirmNewPassword")),1),s("div",rs,[c(e(_),{name:"confirmPassword"},{default:b(({field:r,meta:l})=>[s("input",y({type:u.value?"text":"password"},r,{class:["w-full bg-[#E9DCD6]/80 border-none rounded-xl px-4 py-4 pr-12 pl-12 font-bold focus:outline-none focus:ring-2 focus:ring-[#A6431F]/30 shadow-sm flex",[l.touched&&l.invalid&&"ring-2 ring-red-500/50"]]}),null,16,as)]),_:1}),s("button",{type:"button",onClick:t[1]||(t[1]=r=>u.value=!u.value),class:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500"},a(u.value?"ğŸ™ˆ":"ğŸ‘ï¸"),1),t[5]||(t[5]=s("div",{class:"absolute right-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500 pointer-events-none"}," ğŸ”’ ",-1))]),c(e(P),{name:"confirmPassword",class:"text-red-500 text-xs px-1 block text-right"})]),s("button",{type:"submit",disabled:i.value,class:"w-full back-btn transition transform hover:-translate-y-1 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"},a(i.value?e(o)("common.loading"):e(o)("auth.forgotPassword.resetButton")),9,ls)],32)]),t[6]||(t[6]=s("div",{class:"hidden h-screen md:flex flex-1 bg-[#DBC8BE] items-center justify-center p-12 relative overflow-hidden"},[s("div",{class:"text-center z-10"},[s("img",{src:T,alt:"logo",class:"w-56 h-48 mx-auto"})])],-1))],8,H))}};export{ms as default};
