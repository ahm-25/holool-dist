import{_ as S}from"./ugLHR3pJ.js";import{D as H}from"./C3zWefvF.js";import{E as R,W as q,a0 as J,c as n,a as e,b as d,C as r,t as s,F as O,B as W,J as b,w as G,m as f,r as h,o as i,N as D}from"./BbGrFMje.js";import{_ as K}from"./e2BhSMQC.js";import{a as Q,b as U}from"./7lnyPs4D.js";import{u as X}from"./BSK9vcVU.js";import{P as Y}from"./qflIni0r.js";import{c as j}from"./D9AGL8b1.js";import{T as Z}from"./D-oGqrTe.js";import"./BJZ2LJPp.js";import"./CldZMn79.js";import"./CX_9KJIV.js";const ee=j("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);const te=j("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),se={class:"min-h-screen w-full flex flex-col items-center justify-start pt-20 p-4 md:p-8 relative overflow-hidden"},oe={class:"w-full max-w-7xl z-10 flex flex-col"},le={class:"flex justify-between items-center w-full mb-6"},ne={class:"font-medium"},ie={key:0,class:"flex items-center justify-center min-h-[400px]"},ae={key:1,class:"flex flex-col items-center justify-center min-h-[400px]"},re={class:"text-lg font-medium text-[#5d4037]"},de={key:2,class:"flex flex-col items-center justify-center min-h-[400px]"},ce={class:"text-lg font-medium text-stone-600"},ue={key:3},me={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8"},pe={class:"relative w-full h-48 rounded-[1.5rem] overflow-hidden"},ve=["src","alt"],fe={class:"pt-3 px-1"},he={class:"flex justify-between items-start mb-1"},xe={class:"text-[#3e2723] font-bold text-lg line-clamp-1"},_e={class:"bg-[#E8D5CC]/50 text-[#8d6e63] px-3 py-1 rounded-lg text-xs font-bold"},ge={class:"text-[#8d6e63] text-sm mb-2 font-medium"},be={class:"flex items-center justify-end gap-1 mb-4"},we={class:"text-[#8F300E] font-bold text-xl"},ye=["src"],ke={class:"flex gap-3"},Ce=["onClick"],$e={class:"text-sm font-bold"},De=["onClick"],je={class:"text-sm font-bold"},Ee={key:0,class:"flex justify-center gap-2"},Fe={class:"flex items-center gap-2"},Ae={class:"px-4 py-2 bg-[#8d6e63] text-white rounded-xl font-medium"},ze={class:"text-[#5d4037]"},Be={class:"text-[#5d4037] font-medium"},Me={class:"flex flex-col items-center p-2"},Te={class:"w-24 h-24 mb-6 flex items-center justify-center rounded-3xl bg-[#FDECEA]"},Pe={class:"relative"},Ie={class:"text-2xl font-bold text-[#3e2723] mb-2"},Ne={class:"text-[#8d6e63] text-lg mb-8"},Le={class:"flex w-full gap-4"},Ve=["disabled"],Se={key:0},He={key:1,class:"w-6 h-6 border-2 border-[#D32F2F] border-t-transparent rounded-full animate-spin"},tt={__name:"index",async setup(Re){let u,w;const{t:m,locale:E}=R(),{delete:F}=Q(),y=X(),x=f(()=>E.value==="ar"),A=f(()=>[{label:m("devices.breadcrumb.more","المزيد"),to:"/profile/more",active:!1},{label:m("devices.breadcrumb.devices","الأجهزة"),to:"/profile/more/devices",active:!0}]),k=h(1),{data:C,pending:z,error:B,refresh:_}=([u,w]=q(()=>U("/machines",{query:{page:k},key:"devices-list"})),u=await u,w(),u),g=f(()=>C.value?.data?.data||[]),a=f(()=>C.value?.data?.pagination||null);J(()=>{_()});const c=h(!1),p=h(null),v=h(!1),M=t=>{t.target.src="/placeholder-device.jpg"},T=t=>{D(`/profile/more/devices/edit/${t}`)},P=t=>{p.value=t,c.value=!0},I=async()=>{if(p.value){v.value=!0;try{await F(`/delete-machine/${p.value}`),y.success(m("devices.deleteSuccess","تم حذف الجهاز بنجاح")),c.value=!1,_()}catch{y.error(m("devices.deleteError","فشل حذف الجهاز"))}finally{v.value=!1,p.value=null}}},$=t=>{k.value=t,_()};return(t,o)=>{const N=S,L=H;return i(),n("div",se,[e("div",oe,[e("div",le,[d(N,{items:A.value,direction:x.value?"rtl":"ltr"},null,8,["items","direction"]),e("button",{onClick:o[0]||(o[0]=l=>("navigateTo"in t?t.navigateTo:r(D))("/profile/more/devices/add-device")),class:"flex items-center gap-2 px-4 py-2 bg-[#8d6e63] hover:bg-[#a04824] text-white rounded-xl transition-all duration-300 shadow-md hover:shadow-lg"},[d(r(Y),{size:20}),e("span",ne,s(t.$t("devices.addDevice","إضافة جهاز")),1)])]),r(z)?(i(),n("div",ie,[...o[5]||(o[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-[#8d6e63] border-t-transparent"},null,-1)])])):r(B)?(i(),n("div",ae,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 mb-4 text-[#D4A59A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",re,s(t.$t("devices.error","حدث خطأ أثناء تحميل الأجهزة")),1)])):!g.value||g.value.length===0?(i(),n("div",de,[o[7]||(o[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 mb-4 text-[#D4A59A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("rect",{x:"4",y:"6",width:"16",height:"12",rx:"2","stroke-width":"2",stroke:"currentColor"}),e("path",{d:"M8 18v2h8v-2","stroke-width":"2",stroke:"currentColor"})],-1)),e("p",ce,s(t.$t("devices.empty","لا توجد أجهزة مرتبطة حالياً.")),1)])):(i(),n("div",ue,[e("div",me,[(i(!0),n(O,null,W(g.value,l=>(i(),n("div",{key:l.id,class:"group bg-[#F9F5F1] rounded-[2rem] overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 p-3"},[e("div",pe,[e("img",{src:l.image||"/placeholder-device.jpg",alt:l.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:M},null,40,ve)]),e("div",fe,[e("div",he,[e("h3",xe,s(l.title),1),e("span",_e,s(l.type==="sale"?t.$t("devices.sale","بيع"):t.$t("devices.rent","إيجار")),1)]),e("p",ge,s(t.$t("devices.class","فئة الجهاز"))+" : "+s(l.device_class),1),e("div",be,[e("span",we,s(l.price),1),e("img",{src:r(K),alt:"SAR",class:"w-5 h-5 object-contain"},null,8,ye)]),e("div",ke,[e("button",{onClick:V=>T(l.id),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[#8F300E] hover:bg-[#7a290c] text-white rounded-xl transition-all duration-300 shadow-sm"},[e("span",$e,s(t.$t("devices.edit","تعديل")),1),d(r(te),{size:16})],8,Ce),e("button",{onClick:V=>P(l.id),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[#E8D5CC] hover:bg-[#dcb8a8] text-[#D32F2F] rounded-xl transition-all duration-300 shadow-sm"},[e("span",je,s(t.$t("devices.delete","حذف الجهاز")),1),d(r(Z),{size:16})],8,De)])])]))),128))]),a.value&&a.value.total_pages>1?(i(),n("div",Ee,[a.value.perv_page_url?(i(),n("button",{key:0,onClick:o[1]||(o[1]=l=>$(a.value.current_page-1)),class:"px-4 py-2 bg-white/40 hover:bg-white/60 border border-white/30 rounded-xl transition-all duration-300 text-[#5d4037] font-medium"},s(x.value?"التالي":"Previous"),1)):b("",!0),e("div",Fe,[e("span",Ae,s(a.value.current_page),1),e("span",ze,s(t.$t("devices.of","من")),1),e("span",Be,s(a.value.total_pages),1)]),a.value.next_page_url?(i(),n("button",{key:1,onClick:o[2]||(o[2]=l=>$(a.value.current_page+1)),class:"px-4 py-2 bg-white/40 hover:bg-white/60 border border-white/30 rounded-xl transition-all duration-300 text-[#5d4037] font-medium"},s(x.value?"السابق":"Next"),1)):b("",!0)])):b("",!0)]))]),d(L,{visible:c.value,onClose:o[4]||(o[4]=l=>c.value=!1),width:"500px"},{default:G(()=>[e("div",Me,[e("div",Te,[e("div",Pe,[d(r(ee),{size:48,class:"text-[#E53935] transform rotate-180"})])]),e("h3",Ie,s(t.$t("devices.deleteConfirmTitle","حذف الجهاز ؟")),1),e("p",Ne,s(t.$t("devices.deleteConfirmMessage","هل انت متأكد من حذف الجهاز")),1),e("div",Le,[e("button",{onClick:I,disabled:v.value,class:"flex-1 py-4 bg-[#E8D5CC] text-[#D32F2F] rounded-2xl font-bold text-lg hover:bg-[#dcb8a8] transition-all flex items-center justify-center"},[v.value?(i(),n("div",He)):(i(),n("span",Se,s(t.$t("devices.confirmDeleteBtn","تأكيد الحذف")),1))],8,Ve),e("button",{onClick:o[3]||(o[3]=l=>c.value=!1),class:"flex-1 py-4 bg-[#C1582E] text-white rounded-2xl font-bold text-lg hover:bg-[#a94d28] transition-all"},s(t.$t("devices.cancelBtn","تراجع")),1)])])]),_:1},8,["visible"])])}}};export{tt as default};
