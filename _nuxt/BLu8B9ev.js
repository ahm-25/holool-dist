import{_ as T}from"./BfFQRezz.js";import{_ as W}from"./D0aH5UGn.js";import{c as F,g as k,b as S,f as I,u as O,i as z,F as x}from"./B5Q_lJrr.js";import{_ as H,E as J,G,N as K,u as Q,c as i,a as e,b as r,C as a,t as c,F as U,B as X,w as _,T as b,J as p,d as Y,r as A,m as Z,o as n}from"./C4psxivV.js";import{u as M}from"./BoiKhr-u.js";import{u as ee}from"./CGbSrdeb.js";import{P as D}from"./Bb8nv-Qk.js";import{M as te}from"./CAV-Nf-s.js";import"./BAInQ3nS.js";import"./DP7RF7SH.js";import"./DAdbB4PO.js";import"./5NzHUpbI.js";import"./D6-jFKJQ.js";const se={class:"min-h-screen radial-gradient-page py-12 px-4 font-expo"},ae={class:"container mx-auto max-w-4xl"},oe={class:"flex justify-start mb-8"},le={class:"bg-white/40 backdrop-blur-xl rounded-[50px] p-8 md:p-14 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-white/40"},ie={class:"space-y-4"},ne={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},re={class:"flex-1 w-full"},ce=["placeholder"],de={key:0,class:"text-red-500 text-xs mt-1 block px-2"},ue={class:"w-full md:w-32"},pe=["placeholder"],me={key:0,class:"text-red-500 text-xs mt-1 block text-center"},he={class:"flex gap-2"},fe=["onClick"],ge={class:"space-y-4"},xe={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},_e={class:"relative group"},be=["placeholder"],ve={key:0,class:"text-red-500 text-xs mt-1 block px-2"},ye={class:"space-y-4"},we={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},qe=["placeholder"],ke={key:0,class:"text-red-500 text-xs mt-1 block px-2"},Se={class:"flex justify-center pt-6"},$e=["disabled"],Pe={key:0,class:"flex items-center justify-center gap-3"},Fe={key:1,class:"relative z-10"},Ae={__name:"index",setup(De){const{locale:Re,t:s}=J(),v=G(),y=M(),R=Z(()=>[{label:s("navigation.home"),to:v("/")},{label:s("categories.medicalSales.title"),to:v("/profile/sections/medical-sales")},{label:s("categories.medicalSales.specialRequestPage.title"),active:!0}]),B=F({machines:I().of(F({machine_name:S().required(s("validation.required")),quantity:k().required(s("validation.required")).min(1,s("validation.minValue",{min:1}))})).min(1,s("validation.required")),map_desc:S().required(s("validation.required")),notes:S().required(s("validation.required")),lat:k().required(),lng:k().required()}),{handleSubmit:C,values:Be,setFieldValue:w}=O({validationSchema:B,initialValues:{lat:null,lng:null,map_desc:"",notes:"",machines:[{machine_name:"",quantity:1}]}}),{fields:q,push:E,remove:N}=z("machines"),m=A(!1),h=A(!1),V=()=>{E({machine_name:"",quantity:1})},$=()=>{h.value=!0},L=t=>{w("lat",t.lat),w("lng",t.lng),w("map_desc",t.address),h.value=!1},P=C(async t=>{m.value=!0;try{const{data:l,error:f}=await ee({url:"/create-special-order",method:"POST",data:{lat:t.lat,lng:t.lng,map_desc:t.map_desc,notes:t.notes,machines:JSON.stringify(t.machines)}});f.value?y.error(f.value?.data?.message||s("error.somethingWentWrong")):(y.success(s("categories.medicalSales.specialRequestPage.success")),K(v("/profile/sections/medical-sales")))}catch(l){console.error("Submit special request error:",l),y.error(s("error.somethingWentWrong"))}finally{m.value=!1}});return Q({title:s("categories.medicalSales.specialRequestPage.title")}),(t,l)=>{const f=T,j=W;return n(),i("div",se,[e("div",ae,[e("div",oe,[r(f,{items:R.value,class:"!p-0"},null,8,["items"])]),e("div",le,[e("form",{onSubmit:l[0]||(l[0]=(...d)=>a(P)&&a(P)(...d)),class:"space-y-10"},[e("div",ie,[e("label",ne,c(t.$t("categories.medicalSales.specialRequestPage.requiredDevices")),1),(n(!0),i(U,null,X(a(q),(d,o)=>(n(),i("div",{key:d.key,class:"flex flex-col md:flex-row gap-4 items-start md:items-center animate-fade-in"},[e("div",re,[r(a(x),{name:`machines[${o}].machine_name`},{default:_(({field:g,errorMessage:u})=>[e("input",b({ref_for:!0},g,{type:"text",placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceName"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":u}]}),null,16,ce),u?(n(),i("span",de,c(u),1)):p("",!0)]),_:1},8,["name"])]),e("div",ue,[r(a(x),{name:`machines[${o}].quantity`},{default:_(({field:g,errorMessage:u})=>[e("input",b({ref_for:!0},g,{type:"number",min:"1",placeholder:t.$t("categories.medicalSales.specialRequestPage.count"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-4 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold text-center no-arrow placeholder:text-[#8B7E74]",{"ring-2 ring-red-500/50":u}]}),null,16,pe),u?(n(),i("span",me,c(u),1)):p("",!0)]),_:1},8,["name"])]),e("div",he,[o===a(q).length-1?(n(),i("button",{key:0,type:"button",onClick:V,class:"bg-[#1A1A1A] text-white w-14 h-14 rounded-xl flex items-center justify-center hover:bg-black transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-black/10"},[r(a(D),{class:"w-6 h-6"})])):p("",!0),a(q).length>1?(n(),i("button",{key:1,type:"button",onClick:g=>a(N)(o),class:"bg-red-500/10 text-red-500 w-14 h-14 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-red-500/5"},[r(a(te),{class:"w-6 h-6"})],8,fe)):p("",!0)])]))),128))]),e("div",ge,[e("label",xe,c(t.$t("categories.medicalSales.specialRequestPage.deviceLocation")),1),e("div",_e,[r(a(x),{name:"map_desc"},{default:_(({field:d,errorMessage:o})=>[e("input",b(d,{type:"text",readonly:"",onClick:$,placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceLocation"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 rtl:pl-16 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold cursor-pointer transition-all placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":o}]}),null,16,be),o?(n(),i("span",ve,c(o),1)):p("",!0)]),_:1}),e("button",{type:"button",onClick:$,class:"absolute rtl:left-4 ltr:right-4 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-xl border border-white transition-all transform hover:scale-110 shadow-sm text-primary"},[r(a(D),{class:"w-5 h-5"})])])]),e("div",ye,[e("label",we,c(t.$t("categories.medicalSales.specialRequestPage.notes")),1),r(a(x),{name:"notes"},{default:_(({field:d,errorMessage:o})=>[e("textarea",b(d,{placeholder:t.$t("categories.medicalSales.specialRequestPage.notes"),rows:"6",class:["w-full bg-white/60 border-none rounded-[32px] py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold resize-none placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":o}]}),null,16,qe),o?(n(),i("span",ke,c(o),1)):p("",!0)]),_:1})]),e("div",Se,[e("button",{type:"submit",disabled:m.value,class:"relative overflow-hidden group bg-gradient-to-r from-[#AC4520] to-[#E36D45] text-white px-20 py-5 rounded-[24px] font-bold text-xl transition-all transform hover:-translate-y-2 hover:shadow-[0_20px_40px_rgba(172,69,32,0.3)] disabled:opacity-50 min-w-[280px]"},[l[3]||(l[3]=e("div",{class:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"},null,-1)),m.value?(n(),i("span",Pe,[l[2]||(l[2]=e("span",{class:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),Y(" "+c(t.$t("common.sending")),1)])):(n(),i("span",Fe,c(t.$t("categories.medicalSales.specialRequestPage.send")),1))],8,$e)])],32)])]),r(j,{"is-open":h.value,onClose:l[1]||(l[1]=d=>h.value=!1),onLocationSelected:L},null,8,["is-open"])])}}},Ge=H(Ae,[["__scopeId","data-v-a94b498b"]]);export{Ge as default};
