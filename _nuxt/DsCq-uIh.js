import{_ as C}from"./BrjvfjEn.js";import{_ as b}from"./D2735X9G.js";import{E as P,K as k,G as B,r as d,N as V,k as D,a2 as E,c as F,o as N,a as e,L as S,t as c,C as a,b as h,w as T,d as L}from"./BpUuUup8.js";import{_ as R}from"./CKix1mx-.js";import{u as j}from"./DeRbuwf6.js";import"./x_rD_Ya3.js";const q=["dir"],z={class:"w-full md:w-[45%] lg:w-[40%] xl:w-[40%] bg-[#E8DED9] relative flex flex-col items-center justify-center p-6 md:p-12 shadow-2xl z-10 overflow-y-auto"},A={class:"mt-12 md:mt-16 w-full text-center mb-10"},M={class:"text-center"},U={class:"text-3xl font-bold text-brand-textDark mb-2"},$={class:"text-gray-500 text-sm font-medium"},G={class:"w-full max-w-sm"},I={class:"mt-8"},Y={__name:"verify",setup(K){const{t,locale:_}=P(),i=k(),p=V(),u=E(),n=B(),r=j(),l=d(p.query.phone||""),f=d(""),m=d(!1);D(()=>{l.value||u.push(n("/auth/forgot-password"))});const w=async o=>{m.value=!0;try{const s=await i.forgotPasswordCheckCode(l.value,o);s.success?(r.success(s.message),u.push({path:n("/auth/forgot-password/reset"),query:{phone:l.value,code:o}})):r.error(s.error||t("auth.forgotPassword.errors.verifyFailed"))}catch{r.error(t("auth.forgotPassword.errors.verifyFailed"))}finally{m.value=!1}},x=async()=>{try{const o=await i.forgotPasswordSendCode(l.value);o.success?r.success(o.message||t("auth.forgotPassword.success")):r.error(o.error||t("auth.forgotPassword.errors.sendFailed"))}catch{r.error(t("auth.forgotPassword.errors.sendFailed"))}};return(o,s)=>{const v=C,g=b;return N(),F("div",{class:"h-screen w-full flex flex-col md:flex-row",dir:a(_)==="ar"?"rtl":"ltr"},[e("div",z,[e("div",A,[s[1]||(s[1]=e("div",{class:"hidden md:flex justify-center mb-8"},[e("img",{src:S,alt:"logo",class:"w-24 h-20"})],-1)),e("div",M,[e("h2",U,c(a(t)("auth.forgotPassword.verifyTitle")),1),e("p",$,c(a(t)("auth.forgotPassword.verifySubtitle",{phone:l.value})),1)])]),e("div",G,[h(v,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=y=>f.value=y),length:4,onConfirm:w,onResend:x,confirmText:a(t)("auth.forgotPassword.verifyButton"),disableConfirmUntilComplete:!0},null,8,["modelValue","confirmText"])]),e("div",I,[h(g,{to:a(n)("/auth/forgot-password"),class:"text-[#A6431F] font-bold hover:underline"},{default:T(()=>[L(c(a(t)("common.back")),1)]),_:1},8,["to"])])]),s[2]||(s[2]=e("div",{class:"hidden h-screen md:flex flex-1 bg-[#DBC8BE] items-center justify-center p-12 relative overflow-hidden"},[e("div",{class:"text-center z-10"},[e("img",{src:R,alt:"logo",class:"w-56 h-48 mx-auto"})])],-1))],8,q)}}};export{Y as default};
