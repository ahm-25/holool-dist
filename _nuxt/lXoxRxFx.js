import{_ as H}from"./XDG_G50n.js";import{_ as J,C as Y,P as G,a as K}from"./CGAHCu1Z.js";import{_ as Q}from"./B3_awDU6.js";import{b as X}from"./F73BFBEp.js";import{r as L,g as l,W as Z,n as M,c,o as d,a as n,b as u,J as ee,d as U,t as r,C as y,F as w,B as V,w as te}from"./OI3PzNV2.js";import"./CpGMb49Z.js";import"./DwuVNmEu.js";import"./C37uFHYe.js";const ae={class:"min-h-screen pb-20 overflow-x-hidden relative"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ne={key:0,class:"mt-6 p-4 rounded-2xl bg-red-50/80 border border-red-200 text-red-700"},oe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},re={class:"w-full mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in"},ie={class:"flex justify-between items-start mb-4"},le={class:"flex flex-col items-start gap-1"},ce={class:"text-[#8b7e77] text-sm"},de={class:"text-[#5d5551] font-bold text-lg"},ue={class:"flex items-start gap-3"},me={class:"flex flex-col items-end"},pe={class:"font-bold text-[#5d5551] text-lg"},_e={class:"flex items-center gap-1 text-[#9ca3af] text-xs mt-0.5"},ge={class:"w-10 h-10 rounded-lg border border-[#bf4e26]/30 flex items-center justify-center text-[#bf4e26] bg-[#bf4e26]/10"},fe={class:"flex justify-between items-end mt-2 pt-3 border-t border-[#bf4e26]/10"},be={class:"flex flex-col gap-1"},xe={class:"text-[#8b7e77] text-xs"},ve={class:"font-bold text-[#5d5551]"},he={key:1,class:"col-span-full flex flex-col items-center justify-center py-20 text-[#8b7e77] opacity-60"},ye={class:"text-lg font-medium"},we={class:"mt-4 text-xs text-[#8b7e77] opacity-70"},Te={__name:"index",async setup(Ne){let _,N;const g=L("NEW"),i=L(1),b=l(()=>({NEW:"new",PAYMENT:"waiting_for_pay",CURRENT:"current",FINISHED:"finished"})[g.value]||"new"),I=l(()=>({status:b.value,page:i.value})),R=l(()=>`orders-maintenance-${b.value}-${i.value}`),{data:S,pending:k,error:W,refresh:O}=([_,N]=Z(()=>X("/orders/maintenance",{query:I,watch:[b,i],server:!1,key:R})),_=await _,N(),_),$=l(()=>{const e=S.value;if(!e||typeof e!="object")return e;const s=e,o=s!=null&&s.data&&typeof s.data=="object"?s.data:s,a=o!=null&&o.data&&typeof o.data=="object"?o.data:o,m=(a==null?void 0:a.pagination)??(o==null?void 0:o.pagination)??(s==null?void 0:s.pagination);return m&&a&&typeof a=="object"&&!Array.isArray(a)&&!a.pagination?{...a,pagination:m}:a}),A=l(()=>{var o;const e=$.value;return Array.isArray(e==null?void 0:e.orders)&&e.orders||Array.isArray((o=e==null?void 0:e.data)==null?void 0:o.orders)&&e.data.orders||Array.isArray(e)&&e||[]}),x=l(()=>{var m,P,C,F,E,T,D,B;const e=$.value,s=f=>{if(!f||typeof f!="string")return null;try{const p=new URL(f).searchParams.get("page"),h=Number(p);return Number.isFinite(h)&&h>0?h:null}catch{const v=f.match(/[?&]page=(\d+)/);if(!v)return null;const p=Number(v[1]);return Number.isFinite(p)&&p>0?p:null}},o=((m=e==null?void 0:e.pagination)==null?void 0:m.total_pages)??((P=e==null?void 0:e.pagination)==null?void 0:P.totalPages)??(e==null?void 0:e.total_pages)??(e==null?void 0:e.last_page)??((C=e==null?void 0:e.meta)==null?void 0:C.last_page)??((F=e==null?void 0:e.pagination)==null?void 0:F.last_page)??((E=e==null?void 0:e.data)==null?void 0:E.last_page)??(e!=null&&e.total&&(e!=null&&e.per_page)?Math.ceil(Number(e.total)/Number(e.per_page)):null)??((T=e==null?void 0:e.pagination)!=null&&T.total_items&&((D=e==null?void 0:e.pagination)!=null&&D.per_page)?Math.ceil(Number(e.pagination.total_items)/Number(e.pagination.per_page)):null)??s(e==null?void 0:e.last_page_url)??s((B=e==null?void 0:e.pagination)==null?void 0:B.next_page_url)??1,a=Number(o);return Number.isFinite(a)&&a>0?a:1}),j=l(()=>W.value?t("profile.orders.maintenance.loadError"):null),q=l(()=>k.value);M(g,()=>{i.value=1}),M([x,k],([e,s])=>{s||(i.value>e&&(i.value=e||1),i.value<1&&(i.value=1))});const z=e=>{g.value=e};return(e,s)=>{const o=H;return d(),c("div",ae,[n("div",se,[u(Q,{items:[{label:e.$t("profile.orders.title"),to:"/profile/orders",active:!1},{label:e.$t("profile.orders.menuItems.maintenance.title"),active:!0}]},null,8,["items"]),u(J,{"active-tab":g.value,onChange:z},null,8,["active-tab"]),j.value?(d(),c("div",ne,[U(r(j.value)+" ",1),n("button",{class:"underline font-semibold ms-2",onClick:s[0]||(s[0]=a=>y(O)())},r(e.$t("cards.maintenanceDetails.retry")),1)])):ee("",!0),q.value?(d(),c("div",oe,[(d(),c(w,null,V(6,a=>n("div",{key:a,class:"animate-pulse rounded-2xl bg-white/40 h-[150px]"})),64))])):(d(),c(w,{key:2},[n("div",re,[A.value.length?(d(!0),c(w,{key:0},V(A.value,a=>(d(),c("div",{key:a.id??a.order_num,class:"group bg-white/40 backdrop-blur-sm border border-white/60 rounded-2xl p-5 shadow-sm hover:shadow-md hover:bg-white/60 transition-all duration-300 flex flex-col justify-between min-h-[140px]"},[n("div",ie,[n("div",le,[n("span",ce,r(e.$t("cards.maintenanceDetails.serviceType"))+" :",1),n("span",de,r(a.type_text??a.serviceType??"-"),1)]),n("div",ue,[n("div",me,[n("span",pe,r(a.order_num??a.id),1),n("div",_e,[u(y(Y),{class:"w-3 h-3"}),n("span",null,r(a.created_at??a.time??""),1)])]),n("div",ge,[u(y(G),{class:"w-5 h-5"})])])]),n("div",fe,[n("div",be,[n("span",xe,r(e.$t("cards.maintenanceDetails.status"))+" :",1),n("span",ve,r(a.status_text??a.status??""),1)]),u(o,{to:`/profile/orders/maintenance/${a.id}`,class:"text-primary font-bold text-sm hover:underline"},{default:te(()=>[U(r(e.$t("common.viewOrder")),1)]),_:2},1032,["to"])])]))),128)):(d(),c("div",he,[s[2]||(s[2]=n("div",{class:"w-16 h-16 mb-4 rounded-full border-2 border-dashed border-[#8b7e77] flex items-center justify-center"},[n("span",{class:"text-2xl"},"!")],-1)),n("p",ye,r(e.$t("profile.orders.noOrders")),1)]))]),n("div",we," page: "+r(i.value)+" / totalPages: "+r(x.value),1),u(K,{page:i.value,"onUpdate:page":s[1]||(s[1]=a=>i.value=a),"total-pages":x.value},null,8,["page","total-pages"])],64))])])}}};export{Te as default};
