import{r as d,n as B,A as h,o as s,w as j,c as l,J as b,a as e,b as g,C as w,t as u,d as M,F as N,B as P,M as S,V,S as F,a2 as L}from"./BnZsyVnb.js";import{b as O}from"./C23gwpmt.js";import{C as T}from"./a8yGjwQt.js";import{W as m,L as z,B as A}from"./DjqGhSHZ.js";import{C as D}from"./BARx8kxb.js";const W={class:"text-center text-gray-900 font-bold text-lg mb-2 border-b border-white/10 pb-4"},E={class:"flex flex-col items-center justify-center py-6"},I={class:"mb-2"},J={class:"text-[#bf4e26] font-bold text-2xl dir-rtl"},R={key:0,class:"flex justify-center py-8"},X={key:1,class:"space-y-3 mb-6"},$=["onClick"],q={class:"flex items-center gap-3"},G={class:"w-5 h-5 rounded-full border border-gray-400 flex items-center justify-center p-0.5"},H={key:0,class:"w-full h-full bg-[#bf4e26] rounded-full"},K={class:"font-medium text-gray-800"},Q=["disabled"],U={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},le={__name:"PaymentModal",props:{isOpen:Boolean,total:{type:[Number,String],default:0},title:String,type:{type:String,default:"maintenance"}},emits:["close","submit"],setup(i,{emit:x}){const p=i,y=x,o=d(null),c=d([]),f=d(!1),n=d(!1),_=t=>{switch(t){case"wallet":return m;case"online":return D;case"installment":return A;case"bank-transfer":return z;default:return m}},k=async()=>{f.value=!0;try{const{data:t}=await O("/pay_types",{params:{type:p.type}});t.value&&t.value.key==="success"&&(c.value=t.value.data)}catch(t){console.error("Failed to fetch payment types",t)}finally{f.value=!1}},v=()=>{n.value||y("close")},C=async()=>{if(!o.value)return;const t=c.value.find(a=>a.slug===o.value);n.value=!0,y("submit",{method:t,callback:()=>{n.value=!1}})};return B(()=>p.isOpen,t=>{t&&c.value.length===0&&k()}),(t,a)=>(s(),h(L,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:j(()=>[i.isOpen?(s(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:v},[e("div",{class:"bg-[#808080] w-full max-w-lg rounded-3xl p-6 shadow-2xl border border-white/10 relative",onClick:a[0]||(a[0]=F(()=>{},["stop"]))},[e("button",{onClick:v,class:"absolute top-4 right-4 text-white/70 hover:text-white"},[g(w(T),{class:"w-6 h-6"})]),e("h3",W,u(i.title||"اختر وسيلة الدفع"),1),e("div",E,[e("div",I,[g(w(m),{class:"w-12 h-12 text-[#bf4e26]"})]),e("div",J,[M(u(i.total)+" ",1),a[1]||(a[1]=e("span",{class:"text-sm"},"ر.س",-1))])]),f.value?(s(),l("div",R,a[2]||(a[2]=[e("div",{class:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin"},null,-1)]))):(s(),l("div",X,[(s(!0),l(N,null,P(c.value,r=>(s(),l("div",{key:r.key,onClick:Y=>o.value=r.slug,class:S(["flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border",o.value===r.slug?"bg-white/20 border-[#bf4e26] ring-1 ring-[#bf4e26]":"bg-white/5 border-transparent hover:bg-white/10"])},[e("div",q,[e("div",G,[o.value===r.slug?(s(),l("div",H)):b("",!0)]),(s(),h(V(_(r.slug)),{class:"w-5 h-5 text-[#bf4e26]"}))]),e("span",K,u(r.slug_text),1)],10,$))),128))])),e("button",{onClick:C,disabled:!o.value||n.value,class:"w-full bg-[#bf4e26] text-white py-3 rounded-xl font-bold text-lg shadow-lg hover:bg-[#a64420] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[n.value?(s(),l("div",U)):b("",!0),e("span",null,u(n.value?"جاري المعالجة...":"تأكيد الدفع"),1)],8,Q)])])):b("",!0)]),_:1}))}};export{le as _};
