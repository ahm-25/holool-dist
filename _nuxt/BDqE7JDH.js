import{_ as C}from"./BoE-51gJ.js";import{_ as b}from"./BAInQ3nS.js";import{E as P,K as B,G as V,r as d,g as k,c as D,a as e,L as E,t as c,C as a,b as h,w as F,d as S,O as T,a2 as L,o as N}from"./C4psxivV.js";import{_ as R}from"./NN9iI1dG.js";import{u as j}from"./BoiKhr-u.js";import"./Ckpd7VXj.js";const q=["dir"],z={class:"w-full md:w-[45%] lg:w-[40%] xl:w-[40%] bg-[#E8DED9] relative flex flex-col items-center justify-center p-6 md:p-12 shadow-2xl z-10 overflow-y-auto"},A={class:"mt-12 md:mt-16 w-full text-center mb-10"},M={class:"text-center"},O={class:"text-3xl font-bold text-brand-textDark mb-2"},U={class:"text-gray-500 text-sm font-medium"},$={class:"w-full max-w-sm"},G={class:"mt-8"},Y={__name:"verify",setup(I){const{t,locale:_}=P(),i=B(),p=T(),u=L(),n=V(),r=j(),l=d(p.query.phone||""),f=d(""),m=d(!1);k(()=>{l.value||u.push(n("/auth/forgot-password"))});const w=async o=>{m.value=!0;try{const s=await i.forgotPasswordCheckCode(l.value,o);s.success?(r.success(s.message),u.push({path:n("/auth/forgot-password/reset"),query:{phone:l.value,code:o}})):r.error(s.error||t("auth.forgotPassword.errors.verifyFailed"))}catch{r.error(t("auth.forgotPassword.errors.verifyFailed"))}finally{m.value=!1}},x=async()=>{try{const o=await i.forgotPasswordSendCode(l.value);o.success?r.success(o.message||t("auth.forgotPassword.success")):r.error(o.error||t("auth.forgotPassword.errors.sendFailed"))}catch{r.error(t("auth.forgotPassword.errors.sendFailed"))}};return(o,s)=>{const v=C,g=b;return N(),D("div",{class:"h-screen w-full flex flex-col md:flex-row",dir:a(_)==="ar"?"rtl":"ltr"},[e("div",z,[e("div",A,[s[1]||(s[1]=e("div",{class:"hidden md:flex justify-center mb-8"},[e("img",{src:E,alt:"logo",class:"w-24 h-20"})],-1)),e("div",M,[e("h2",O,c(a(t)("auth.forgotPassword.verifyTitle")),1),e("p",U,c(a(t)("auth.forgotPassword.verifySubtitle",{phone:l.value})),1)])]),e("div",$,[h(v,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=y=>f.value=y),length:4,onConfirm:w,onResend:x,confirmText:a(t)("auth.forgotPassword.verifyButton"),disableConfirmUntilComplete:!0},null,8,["modelValue","confirmText"])]),e("div",G,[h(g,{to:a(n)("/auth/forgot-password"),class:"text-[#A6431F] font-bold hover:underline"},{default:F(()=>[S(c(a(t)("common.back")),1)]),_:1},8,["to"])])]),s[2]||(s[2]=e("div",{class:"hidden h-screen md:flex flex-1 bg-[#DBC8BE] items-center justify-center p-12 relative overflow-hidden"},[e("div",{class:"text-center z-10"},[e("img",{src:R,alt:"logo",class:"w-56 h-48 mx-auto"})])],-1))],8,q)}}};export{Y as default};
