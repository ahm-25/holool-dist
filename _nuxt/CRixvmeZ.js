import{_ as I}from"./DiY3edDc.js";import{_ as O}from"./eznGetvW.js";import{c as D,g as S,b as P,f as j,u as A,i as H}from"./BqzWGWbE.js";import{_ as J,E as z,G,g as M,r as R,R as K,u as Q,c as o,o as l,a as e,b as i,C as r,t as c,F as U,B as X,w as v,J as p,T as x,a7 as Y,d as Z}from"./B5HeACpe.js";import{u as ee}from"./zDzW9YfH.js";import{u as te}from"./CGUFWmUz.js";import{P as se}from"./8MZdU-4Z.js";import{M as ae}from"./Okx8tEX-.js";import{M as oe}from"./BVNry3zC.js";import"./CGfWc8dA.js";import"./aSvSgRgq.js";import"./BB7hngxF.js";import"./Yyz5NENq.js";import"./P9Gc60wC.js";const le={class:"min-h-screen py-12 px-4"},re={class:"container mx-auto max-w-4xl"},ne={class:"card-bg rounded-[40px] p-8 md:p-12 shadow-2xl border border-white/30"},ie={class:"block text-primary font-bold mb-4 text-lg"},ce={class:"flex-1 w-full"},de=["placeholder"],ue={key:0,class:"text-red-500 text-sm mt-1"},me={class:"w-full md:w-auto flex gap-4 items-center"},pe={class:"flex flex-col w-full md:w-32"},he=["placeholder"],fe={key:0,class:"text-red-500 text-sm mt-1 text-center"},_e=["onClick"],be={class:"block text-primary font-bold mb-4 text-lg"},ge={class:"relative group"},ve=["placeholder"],xe={key:0,class:"text-red-500 text-sm mt-1"},ye={class:"block text-primary font-bold mb-4 text-lg"},we=["placeholder"],qe={key:0,class:"text-red-500 text-sm mt-1"},ke={class:"flex justify-center pt-8"},Se=["disabled"],Pe={key:0,class:"flex items-center justify-center gap-3"},$e={key:1},Ce={__name:"index",setup(De){const{locale:E,t:s}=z(),y=G(),w=ee(),F=M(()=>[{label:s("navigation.home"),to:y("/")},{label:s("categories.medicalSales.title"),to:y("/profile/sections/medical-sales")},{label:s("categories.medicalSales.specialRequestPage.title"),active:!0}]),V=D({machines:j().of(D({machine_name:P().required(s("validation.required")),count:S().required(s("validation.required")).min(1,s("validation.minValue",{min:1}))})).min(1,s("validation.required")),map_desc:P().required(s("validation.required")),notes:P().required(s("validation.required")),lat:S().required(),lng:S().required()}),{handleSubmit:B,values:Re,setFieldValue:q}=A({validationSchema:V,initialValues:{lat:null,lng:null,map_desc:"",notes:"",machines:[{machine_name:"",count:1}]}}),{fields:k,push:L,remove:N}=H("machines"),h=R(!1),f=R(!1),T=()=>{L({machine_name:"",count:1})},$=()=>{f.value=!0},W=t=>{q("lat",t.lat),q("lng",t.lng),q("map_desc",t.address),f.value=!1},C=B(async t=>{var n,_;h.value=!0;try{const{data:u,error:b}=await te({url:"/create-special-order",method:"POST",data:{lat:t.lat,lng:t.lng,map_desc:t.map_desc,notes:t.notes,machines:JSON.stringify(t.machines)}});b.value?w.error(((_=(n=b.value)==null?void 0:n.data)==null?void 0:_.message)||s("error.somethingWentWrong")):(w.success(s("categories.medicalSales.specialRequestPage.success")),K(y("/profile/sections/medical-sales")))}catch(u){console.error("Submit special request error:",u),w.error(s("error.somethingWentWrong"))}finally{h.value=!1}});return Q({title:s("categories.medicalSales.specialRequestPage.title")}),(t,n)=>{const _=I,u=Y("Field"),b=O;return l(),o("div",le,[e("div",re,[i(_,{items:F.value,direction:r(E)==="ar"?"rtl":"ltr"},null,8,["items","direction"]),e("div",ne,[e("form",{onSubmit:n[0]||(n[0]=(...d)=>r(C)&&r(C)(...d)),class:"space-y-8"},[e("div",null,[e("label",ie,c(t.$t("categories.medicalSales.specialRequestPage.requiredDevices")),1),(l(!0),o(U,null,X(r(k),(d,a)=>(l(),o("div",{key:d.key,class:"flex flex-col md:flex-row gap-4 mb-4 items-start md:items-center animate-fade-in"},[e("div",ce,[i(u,{name:`machines[${a}].machine_name`},{default:v(({field:g,errorMessage:m})=>[e("input",x({ref_for:!0},g,{type:"text",placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceName"),class:["w-full bg-[#E9DCD6]/60 border border-white rounded-2xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-primary/30 shadow-sm font-bold",{"border-red-500":m}]}),null,16,de),m?(l(),o("span",ue,c(m),1)):p("",!0)]),_:2},1032,["name"])]),e("div",me,[i(u,{name:`machines[${a}].count`},{default:v(({field:g,errorMessage:m})=>[e("div",pe,[e("input",x({ref_for:!0},g,{type:"number",min:"1",placeholder:t.$t("categories.medicalSales.specialRequestPage.count"),class:["w-full bg-[#E9DCD6]/60 border border-white rounded-2xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-primary/30 shadow-sm font-bold text-center no-arrow",{"border-red-500":m}]}),null,16,he),m?(l(),o("span",fe,c(m),1)):p("",!0)])]),_:2},1032,["name"]),a===r(k).length-1?(l(),o("button",{key:0,type:"button",onClick:T,class:"bg-black text-white p-4 rounded-2xl hover:bg-black/80 transition-all transform hover:scale-110 active:scale-95 shadow-lg"},[i(r(se),{class:"w-6 h-6"})])):p("",!0),r(k).length>1?(l(),o("button",{key:1,type:"button",onClick:g=>r(N)(a),class:"bg-red-500/80 text-white p-4 rounded-2xl hover:bg-red-600 transition-all transform hover:scale-110 active:scale-95 shadow-lg"},[i(r(ae),{class:"w-6 h-6"})],8,_e)):p("",!0)])]))),128))]),e("div",null,[e("label",be,c(t.$t("categories.medicalSales.specialRequestPage.deviceLocation")),1),e("div",ge,[i(u,{name:"map_desc"},{default:v(({field:d,errorMessage:a})=>[e("input",x(d,{type:"text",readonly:"",onClick:$,placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceLocation"),class:["w-full bg-[#E9DCD6]/60 border border-white rounded-2xl py-4 px-6 ltr:pr-12 rtl:pl-12 focus:outline-none focus:ring-2 focus:ring-primary/30 shadow-sm font-bold cursor-pointer group-hover:bg-[#E9DCD6]/80 transition-colors",{"border-red-500":a}]}),null,16,ve),a?(l(),o("span",xe,c(a),1)):p("",!0)]),_:1}),e("div",{class:"absolute rtl:left-4 ltr:right-4 top-1/2 -translate-y-1/2 bg-white/50 p-2 rounded-full cursor-pointer hover:bg-white transition-all transform hover:scale-110 shadow-md",onClick:$},[i(r(oe),{class:"w-5 h-5 text-primary"})])])]),e("div",null,[e("label",ye,c(t.$t("categories.medicalSales.specialRequestPage.notes")),1),i(u,{name:"notes"},{default:v(({field:d,errorMessage:a})=>[e("textarea",x(d,{placeholder:t.$t("categories.medicalSales.specialRequestPage.notes"),rows:"4",class:["w-full bg-[#E9DCD6]/60 border border-white rounded-3xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-primary/30 shadow-sm font-bold resize-none",{"border-red-500":a}]}),null,16,we),a?(l(),o("span",qe,c(a),1)):p("",!0)]),_:1})]),e("div",ke,[e("button",{type:"submit",disabled:h.value,class:"bg-gradient-to-r from-[#AC4520] to-[#6C2E17] text-white px-24 py-5 rounded-2xl font-bold text-xl hover:shadow-[0_20px_50px_rgba(172,69,32,0.4)] transition-all transform hover:-translate-y-2 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed min-w-[300px]"},[h.value?(l(),o("span",Pe,[n[2]||(n[2]=e("span",{class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),Z(" "+c(t.$t("common.sending")),1)])):(l(),o("span",$e,c(t.$t("categories.medicalSales.specialRequestPage.send")),1))],8,Se)])],32)])]),i(b,{"is-open":f.value,onClose:n[1]||(n[1]=d=>f.value=!1),onLocationSelected:W},null,8,["is-open"])])}}},ze=J(Ce,[["__scopeId","data-v-9fa95378"]]);export{ze as default};
