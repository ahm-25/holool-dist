import{_ as D}from"./BG4UvGIk.js";import{_ as M}from"./DQJpfRuJ.js";import{_ as $}from"./BJZ2LJPp.js";import{E as G,K as z,G as T,H,g as R,u as K,c as f,a as t,L as O,C as e,t as a,b as l,S as U,w as h,d as g,r as y,o as _,T as k}from"./BbGrFMje.js";import{c as q,u as J,F as A,E as F}from"./AmEKYDf3.js";import{u as Q}from"./CgEHWQ5t.js";import{_ as W}from"./BFLBms6F.js";import{l as X}from"./BgH2Av2K.js";import{e as Y,a as Z}from"./f__Oa2D6.js";import{u as tt}from"./BSK9vcVU.js";import"./BEIwy8IT.js";import"./D9AGL8b1.js";const et=["dir"],st={class:"w-full md:w-[50%] relative flex flex-col items-center justify-center p-6 md:p-12 z-10 overflow-y-auto"},ot={class:"mt-12 md:mt-16 w-full text-center mb-10"},at={class:"hidden md:flex justify-center mb-8"},lt=["src"],nt={class:"flex items-center justify-between"},rt={class:"text-3xl font-bold text-brand-textDark mb-2"},it={class:"text-gray-500 text-sm font-medium"},ct={class:"space-y-2"},dt={class:"text-sm text-gray-600 font-bold flex px-1"},ut={class:"space-y-2"},mt={class:"text-sm text-gray-600 font-bold flex px-1"},ht={class:"relative"},pt={class:"absolute right-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500 pointer-events-none"},ft=["src"],gt=["type","placeholder"],_t=["src"],xt=["src"],bt={class:"flex justify-end pt-1"},vt=["disabled"],wt={class:"flex flex-col items-center space-y-6 pt-6"},yt={class:"text-sm text-gray-600 font-medium"},Mt={__name:"login",setup(kt){const{t:o,locale:x}=G(),c=y(!1),d=y(!1),p=z(),u=T(),b=H(),m=tt(),{phoneNumber:j,password:C}=Q(),S=q({phone:j,password:C}),{handleSubmit:L,values:At,setFieldValue:V}=J({validationSchema:S,initialValues:{phone:"",password:""}});R(()=>{p.initAuth()});const P=r=>{console.log("Country changed:",r)};K({title:o("auth.login.title")});const v=L(async r=>{d.value=!0;try{const s=await p.login({phone:r.phone,password:r.password,lang:x.value});s.success?(m.success(o("auth.login.success")),await b.push(u("/"))):m.error(s.error||o("auth.login.errors.loginFailed"))}catch(s){console.error("Login error:",s),m.error(o("auth.login.errors.loginError"))}finally{d.value=!1}}),E=()=>{p.setGuestMode(),m.success(o("auth.login.guestLoginSuccess")),b.push(u("/"))};return(r,s)=>{const I=D,N=M,w=$;return _(),f("div",{class:"h-screen w-full flex flex-col md:flex-row",dir:e(x)==="ar"?"rtl":"ltr"},[s[5]||(s[5]=t("div",{class:"hidden h-screen md:flex flex-1 radial-gradient-subtle items-center justify-center p-12 relative overflow-hidden"},[t("div",{class:"text-center z-10"},[t("img",{src:O,alt:"logo",class:"w-56 h-48 mx-auto"})])],-1)),t("div",st,[s[3]||(s[3]=t("div",{class:"absolute top-0 left-0"},null,-1)),s[4]||(s[4]=t("div",{class:"mb-8 md:hidden"},[t("svg",{viewBox:"0 0 114 97",class:"w-24 h-20"})],-1)),t("div",ot,[t("div",at,[t("img",{src:e(W),alt:"logo",class:"w-24 h-20"},null,8,lt)]),t("div",nt,[t("div",null,[t("h2",rt,a(e(o)("auth.login.title")),1),t("p",it,a(e(o)("auth.login.subtitle")),1)]),l(I,{variant:"auth",size:"sm"})])]),t("form",{class:"w-full space-y-5",onSubmit:s[2]||(s[2]=U((...n)=>e(v)&&e(v)(...n),["prevent"]))},[t("div",ct,[t("label",dt,a(e(o)("auth.login.mobileNumber")),1),l(e(A),{name:"phone"},{default:h(({field:n,meta:i})=>[l(N,k(n,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=B=>e(V)("phone",B)),onCountryChanged:P,class:[i.touched&&i.invalid&&"ring-2 ring-red-500/50"]}),null,16,["modelValue","class"])]),_:1}),l(e(F),{name:"phone",class:"text-red-500 text-xs px-1 block text-right"})]),t("div",ut,[t("label",mt,a(e(o)("auth.login.password")),1),t("div",ht,[t("div",pt,[t("img",{src:e(X),alt:"lock",class:"w-5 h-5 object-contain"},null,8,ft)]),l(e(A),{name:"password"},{default:h(({field:n,meta:i})=>[t("input",k({type:c.value?"text":"password"},n,{placeholder:e(o)("auth.login.passwordPlaceholder"),class:["w-full bg-[#E9DCD6]/80 text-[#000] border-none rounded-xl px-4 py-4 pr-12 pl-12   focus:outline-none focus:ring-2 focus:ring-[#A6431F]/30 shadow-sm flex",i.touched&&i.invalid&&"ring-2 ring-red-500/50"]}),null,16,gt)]),_:1}),t("button",{type:"button",onClick:s[1]||(s[1]=n=>c.value=!c.value),class:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500"},[c.value?(_(),f("img",{key:0,src:e(Y),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,_t)):(_(),f("img",{key:1,src:e(Z),alt:"show password",class:"w-5 h-5 object-contain"},null,8,xt))])]),l(e(F),{name:"password",class:"text-red-500 text-xs px-1 block text-right"})]),t("div",bt,[l(w,{to:e(u)("/auth/forgot-password"),class:"text-sm font-bold text-brand-textDark hover:text-[#A6431F] transition"},{default:h(()=>[g(a(e(o)("auth.login.forgotPassword")),1)]),_:1},8,["to"])]),t("button",{type:"submit",disabled:d.value,class:"w-full !py-4 back-btn transition transform hover:-translate-y-1 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"},a(d.value?e(o)("auth.login.loggingIn"):e(o)("auth.login.button")),9,vt),t("div",wt,[t("a",{onClick:E,class:"text-[#A6431F] font-bold border-b-2 border-[#A6431F]/20 hover:border-[#A6431F] cursor-pointer transition-colors"},a(e(o)("auth.login.loginAsGuest")),1),t("div",yt,[g(a(e(o)("auth.login.noAccount"))+" ",1),l(w,{to:e(u)("/auth/register"),class:"text-[#A6431F] font-bold hover:underline"},{default:h(()=>[g(a(e(o)("auth.login.createAccount")),1)]),_:1},8,["to"])])])],32)])],8,et)}}};export{Mt as default};
