import{s as z}from"./OIMFiZIH.js";import{r as x,n as B,g as H,q as j,o as g,c as y,a as u,aE as S,I as K,F as U,B as R,d as $,t as w,J as q,M as G,m as k,a1 as J}from"./CPAe5scI.js";const Z={class:"bg-white/25 backdrop-blur-xl border border-white/40 shadow-[0_8px_32px_0_rgba(31,38,135,0.15)] rounded-[3rem] p-8 md:p-12 w-full max-w-lg flex flex-col items-center text-center relative"},Q={class:"mb-10 relative"},W={class:"flex gap-4 mb-8",dir:"ltr"},X=["value","onInput","onKeydown","onPaste"],Y={key:0,class:"text-[#5D4037] mb-8 font-medium"},ee=["disabled"],te={class:"mt-8 text-[#5D4037] text-sm font-medium"},le=["disabled"],ne={__name:"OtpCard",props:{modelValue:{type:String,default:""},length:{type:Number,default:4},initialTime:{type:Number,default:59},showTimer:{type:Boolean,default:!0},confirmText:{type:String,default:"تأكيد"},resendText:{type:String,default:"إعادة الإرسال"},resendPrefixText:{type:String,default:"لم تستلم الرمز؟"},autoFocus:{type:Boolean,default:!0},numericOnly:{type:Boolean,default:!0},disableConfirmUntilComplete:{type:Boolean,default:!0}},emits:["update:modelValue","confirm","resend","expired"],setup(c,{expose:I,emit:V}){const l=c,m=V,C=x([]),r=x(Array.from({length:l.length},()=>"")),i=x(l.initialTime);let f=null;const h=k(()=>r.value.join("")),D=k(()=>r.value.every(t=>String(t||"").length===1)),A=k(()=>l.disableConfirmUntilComplete&&!D.value),s=async t=>{await J();const e=C.value?.[t];e?.focus&&e.focus()},_=t=>{const e=String(t??""),n=(l.numericOnly?e.replace(/[^0-9]/g,""):e).split("").slice(0,l.length);r.value=Array.from({length:l.length},(a,v)=>n[v]??"")};B(()=>l.modelValue,t=>{String(t??"")!==h.value&&_(t)},{immediate:!0}),B(()=>l.length,()=>P());const p=()=>{m("update:modelValue",h.value)},F=(t,e)=>{const o=String(t?.target?.value??""),a=(l.numericOnly?o.replace(/[^0-9]/g,""):o).slice(-1);r.value[e]=a,p(),a&&e<l.length-1&&s(e+1)},E=(t,e)=>{const o=t?.key;if(o==="Backspace"){if(!r.value[e]&&e>0){s(e-1);return}r.value[e]="",p();return}o==="ArrowLeft"&&e>0?s(e-1):o==="ArrowRight"&&e<l.length-1&&s(e+1)},L=(t,e)=>{const o=String(t?.clipboardData?.getData("text")??"");if(!o)return;const n=l.numericOnly?o.replace(/[^0-9]/g,""):o;if(!n)return;t.preventDefault();const a=n.split("");for(let d=0;d<a.length;d++){const T=e+d;if(T>=l.length)break;r.value[T]=a[d]}p();const v=r.value.findIndex(d=>!d);s(v===-1?l.length-1:v)},b=({keepTimer:t=!1}={})=>{r.value=Array.from({length:l.length},()=>""),p(),t||(i.value=l.initialTime),l.autoFocus&&s(0)},M=()=>{b({keepTimer:!1}),m("resend")},N=()=>{m("confirm",h.value)},O=()=>{f&&clearInterval(f),f=z(()=>{i.value>0&&(i.value-=1,i.value===0&&m("expired"))},1e3)},P=()=>{_(h.value),b({keepTimer:!0})};return H(()=>{O(),l.autoFocus&&s(0)}),j(()=>{f&&clearInterval(f)}),I({focus:()=>s(0),reset:b}),(t,e)=>(g(),y("div",Z,[u("div",Q,[S(t.$slots,"illustration",{},()=>[e[0]||(e[0]=K('<div class="relative w-32 h-32 flex items-center justify-center"><svg viewBox="0 0 24 24" fill="none" class="w-24 h-24 text-black drop-shadow-md" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" fill="#A7D4E6" fill-opacity="0.5"></path><polyline points="22,6 12,13 2,6"></polyline></svg><div class="absolute top-0 right-0 transform translate-x-2 -translate-y-2"><svg width="50" height="40" viewBox="0 0 50 40" fill="none"><path d="M45 0H5C2.23858 0 0 2.23858 0 5V25C0 27.7614 2.23858 30 5 30H15L10 40L25 30H45C47.7614 30 50 27.7614 50 25V5C50 2.23858 47.7614 0 45 0Z" fill="#F97316"></path><circle cx="12" cy="15" r="2" fill="white" opacity="0.8"></circle><circle cx="25" cy="15" r="2" fill="white" opacity="0.8"></circle><circle cx="38" cy="15" r="2" fill="white" opacity="0.8"></circle></svg></div><div class="absolute bottom-2 left-0 transform -translate-x-2 translate-y-2 bg-[#2ECC71] rounded-full p-1.5 shadow-lg border-2 border-white"><svg width="16" height="16" viewBox="0 0 24 24" stroke="white" stroke-width="4" fill="none"><polyline points="20 6 9 17 4 12"></polyline></svg></div></div>',1))])]),u("div",W,[(g(!0),y(U,null,R(c.length,(o,n)=>(g(),y("input",{key:n,ref_for:!0,ref_key:"otpInputs",ref:C,inputmode:"numeric",type:"text",maxlength:"1",autocomplete:"one-time-code",value:r.value[n],onInput:a=>F(a,n),onKeydown:a=>E(a,n),onPaste:a=>L(a,n),class:"w-14 h-14 md:w-16 md:h-16 rounded-xl bg-white/40 border border-white/50 text-center text-2xl font-bold text-[#5D4037] focus:outline-none focus:ring-2 focus:ring-[#C1582D]/50 focus:bg-white/60 transition-all shadow-inner"},null,40,X))),128))]),c.showTimer?(g(),y("div",Y,[S(t.$slots,"timer",{timeLeft:i.value},()=>[$(" الوقت المتبقي : "+w(i.value)+" ثانية ",1)])])):q("",!0),u("button",{type:"button",disabled:A.value,class:"w-40 py-3 rounded-2xl bg-gradient-to-r from-[#A04018] to-[#C85C2E] text-white font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-lg disabled:hover:-translate-y-0",onClick:N},w(c.confirmText),9,ee),u("div",te,[u("span",null,w(c.resendPrefixText),1),u("button",{type:"button",onClick:M,disabled:i.value>0,class:G(i.value>0?"opacity-50 cursor-not-allowed":"text-[#A04018] font-bold hover:text-[#803010]")},w(c.resendText),11,le)])]))}};export{ne as _};
