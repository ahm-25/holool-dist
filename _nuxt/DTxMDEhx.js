import{_ as J}from"./D2735X9G.js";import{_ as Y,C as K,P as Q}from"./kYpqmg1f.js";import{_ as X}from"./CUGlWqMT.js";import{_ as Z}from"./D7RKH-mR.js";import{b as ee}from"./_H6DXYeN.js";import{r as U,G as te,g as l,a4 as ae,W as se,n as w,c,o as d,a as o,b as u,J as oe,C as m,d as V,t as i,F as N,B as I,w as re}from"./BpUuUup8.js";import"./BvtZfyjE.js";import"./AW1qmVfM.js";import"./CJtbGLJo.js";const ne={class:"min-h-screen pb-20 overflow-x-hidden relative"},ie={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},le={key:0,class:"mt-6 p-4 rounded-2xl bg-red-50/80 border border-red-200 text-red-700"},ce={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},de={class:"w-full mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in"},ue={class:"flex justify-between items-start mb-4"},me={class:"flex flex-col items-start gap-1"},pe={class:"text-[#8b7e77] text-sm"},_e={class:"text-[#5d5551] font-bold text-lg"},ge={class:"flex items-start gap-3"},fe={class:"flex flex-col items-end"},be={class:"font-bold text-[#5d5551] text-lg"},xe={class:"flex items-center gap-1 text-[#9ca3af] text-xs mt-0.5"},he={class:"w-10 h-10 rounded-lg border border-[#bf4e26]/30 flex items-center justify-center text-[#bf4e26] bg-[#bf4e26]/10"},ve={class:"flex justify-between items-end mt-2 pt-3 border-t border-[#bf4e26]/10"},ye={class:"flex flex-col gap-1"},we={class:"text-[#8b7e77] text-xs"},Ne={class:"font-bold text-[#5d5551]"},ke={key:1,class:"col-span-full flex flex-col items-center justify-center py-20 text-[#8b7e77] opacity-60"},$e={class:"text-lg font-medium"},Be={__name:"index",async setup(Ae){let g,k;const f=U("NEW"),n=U(1),$=te(),h=l(()=>({NEW:"new",PAYMENT:"waiting_for_pay",CURRENT:"current",FINISHED:"finished"})[f.value]||"new"),b=ae(),S=l(()=>({status:h.value,page:n.value,tab:b.query.tab||"sent"})),W=l(()=>`orders-rent-${h.value}-${n.value}-${b.query.tab||"sent"}`),{data:O,pending:A,error:z,refresh:P}=([g,k]=se(()=>ee("/orders/rent",{query:S,watch:[h,n],server:!1,key:W})),g=await g,k(),g),j=l(()=>{const e=O.value;if(!e||typeof e!="object")return e;const s=e,r=s!=null&&s.data&&typeof s.data=="object"?s.data:s,a=r!=null&&r.data&&typeof r.data=="object"?r.data:r,p=(a==null?void 0:a.pagination)??(r==null?void 0:r.pagination)??(s==null?void 0:s.pagination);return p&&a&&typeof a=="object"&&!Array.isArray(a)&&!a.pagination?{...a,pagination:p}:a}),C=l(()=>{var r;const e=j.value;return Array.isArray(e==null?void 0:e.orders)&&e.orders||Array.isArray((r=e==null?void 0:e.data)==null?void 0:r.orders)&&e.data.orders||Array.isArray(e)&&e||[]}),F=l(()=>{var p,T,q,D,L,B,M,R;const e=j.value,s=x=>{if(!x||typeof x!="string")return null;try{const _=new URL(x).searchParams.get("page"),y=Number(_);return Number.isFinite(y)&&y>0?y:null}catch{const v=x.match(/[?&]page=(\d+)/);if(!v)return null;const _=Number(v[1]);return Number.isFinite(_)&&_>0?_:null}},r=((p=e==null?void 0:e.pagination)==null?void 0:p.total_pages)??((T=e==null?void 0:e.pagination)==null?void 0:T.totalPages)??(e==null?void 0:e.total_pages)??(e==null?void 0:e.last_page)??((q=e==null?void 0:e.meta)==null?void 0:q.last_page)??((D=e==null?void 0:e.pagination)==null?void 0:D.last_page)??((L=e==null?void 0:e.data)==null?void 0:L.last_page)??(e!=null&&e.total&&(e!=null&&e.per_page)?Math.ceil(Number(e.total)/Number(e.per_page)):null)??((B=e==null?void 0:e.pagination)!=null&&B.total_items&&((M=e==null?void 0:e.pagination)!=null&&M.per_page)?Math.ceil(Number(e.pagination.total_items)/Number(e.pagination.per_page)):null)??s(e==null?void 0:e.last_page_url)??s((R=e==null?void 0:e.pagination)==null?void 0:R.next_page_url)??1,a=Number(r);return Number.isFinite(a)&&a>0?a:1}),E=l(()=>z.value?t("profile.orders.rental.loadError"):null),G=l(()=>A.value);w(()=>b.query.tab,()=>{P()}),w(f,()=>{n.value=1}),w([F,A],([e,s])=>{s||(n.value>e&&(n.value=e||1),n.value<1&&(n.value=1))});const H=e=>{f.value=e};return(e,s)=>{const r=J;return d(),c("div",ne,[o("div",ie,[u(Z,{items:[{label:e.$t("profile.orders.title"),to:m($)("/profile/orders"),active:!1},{label:e.$t("profile.orders.menuItems.rental.title"),active:!0}]},null,8,["items"]),u(Y,{"active-tab":f.value,onChange:H},null,8,["active-tab"]),E.value?(d(),c("div",le,[V(i(E.value)+" ",1),o("button",{class:"underline font-semibold ms-2",onClick:s[0]||(s[0]=a=>m(P)())},i(e.$t("cards.maintenanceDetails.retry")),1)])):oe("",!0),G.value?(d(),c("div",ce,[(d(),c(N,null,I(6,a=>o("div",{key:a,class:"animate-pulse rounded-2xl bg-white/40 h-[150px]"})),64))])):(d(),c(N,{key:2},[o("div",de,[C.value.length?(d(!0),c(N,{key:0},I(C.value,a=>(d(),c("div",{key:a.id??a.order_num,class:"group bg-white/40 backdrop-blur-sm border border-white/60 rounded-2xl p-5 shadow-sm hover:shadow-md hover:bg-white/60 transition-all duration-300 flex flex-col justify-between min-h-[140px]"},[o("div",ue,[o("div",me,[o("span",pe,i(e.$t("cards.maintenanceDetails.serviceType"))+" :",1),o("span",_e,i(a.type_text??a.serviceType??"-"),1)]),o("div",ge,[o("div",fe,[o("span",be,i(a.order_num??a.id),1),o("div",xe,[u(m(K),{class:"w-3 h-3"}),o("span",null,i(a.created_at??a.time??""),1)])]),o("div",he,[u(m(Q),{class:"w-5 h-5"})])])]),o("div",ve,[o("div",ye,[o("span",we,i(e.$t("cards.maintenanceDetails.status"))+" :",1),o("span",Ne,i(a.status_text??a.status??""),1)]),u(r,{to:m($)({path:`/profile/orders/rental/${a.id}`,query:{tab:m(b).query.tab||"sent"}}),class:"text-primary font-bold text-sm hover:underline"},{default:re(()=>[V(i(e.$t("common.viewOrder")),1)]),_:2},1032,["to"])])]))),128)):(d(),c("div",ke,[s[2]||(s[2]=o("div",{class:"w-16 h-16 mb-4 rounded-full border-2 border-dashed border-[#8b7e77] flex items-center justify-center"},[o("span",{class:"text-2xl"},"!")],-1)),o("p",$e,i(e.$t("profile.orders.noOrders")),1)]))]),u(X,{page:n.value,"onUpdate:page":s[1]||(s[1]=a=>n.value=a),"total-pages":F.value},null,8,["page","total-pages"])],64))])])}}};export{Be as default};
