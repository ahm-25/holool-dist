import{_ as O}from"./GzQTdmL6.js";import{_ as W}from"./zXQksO3E.js";import{c as A,g as S,b as $,f as I,u as z,i as J,F as _}from"./BaUCWVHf.js";import{a as G}from"./BcraiT0z.js";import{_ as H,E as M,G as K,g as Q,r as D,O as U,u as X,c as n,a as e,b as c,C as o,t as d,F as Y,B as Z,w as b,J as p,T as y,d as ee,o as r}from"./DtlkFUv2.js";import{u as te}from"./qIaXEmvY.js";import{P as R}from"./Dqwpptww.js";import{M as se}from"./C1St_zBJ.js";import"./CbXOsLjH.js";import"./B6LoSh53.js";import"./B8u25cvq.js";import"./DAYFLVbi.js";import"./CY06FC8a.js";const ae={class:"min-h-screen radial-gradient-page py-12 px-4 font-expo"},oe={class:"container mx-auto max-w-4xl"},le={class:"flex justify-start mb-8"},ie={class:"bg-white/40 backdrop-blur-xl rounded-[50px] p-8 md:p-14 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-white/40"},ne={class:"space-y-4"},re={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},ce={class:"flex-1 w-full"},de=["placeholder"],ue={key:0,class:"text-red-500 text-xs mt-1 block px-2"},me={class:"w-full md:w-32"},pe=["placeholder"],he={key:0,class:"text-red-500 text-xs mt-1 block text-center"},ge={class:"flex gap-2"},fe=["onClick"],xe={class:"space-y-4"},_e={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},be={class:"relative group"},ye=["placeholder"],ve={key:0,class:"text-red-500 text-xs mt-1 block px-2"},we={class:"space-y-4"},ke={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},qe=["placeholder"],Se={key:0,class:"text-red-500 text-xs mt-1 block px-2"},$e={class:"flex justify-center pt-6"},Pe=["disabled"],Fe={key:0,class:"flex items-center justify-center gap-3"},Ae={key:1,class:"relative z-10"},De={__name:"index",setup(Re){const{locale:Be,t:a}=M(),v=K(),w=te(),{api:B}=G(),C=Q(()=>[{label:a("navigation.home"),to:v("/")},{label:a("categories.medicalSales.title"),to:v("/profile/sections/medical-sales")},{label:a("categories.medicalSales.specialRequestPage.title"),active:!0}]),E=A({machines:I().of(A({machine_name:$().required(a("validation.required")),quantity:S().required(a("validation.required")).min(1,a("validation.minValue",{min:1}))})).min(1,a("validation.required")),map_desc:$().required(a("validation.required")),notes:$().required(a("validation.required")),lat:S().required(),lng:S().required()}),{handleSubmit:V,values:Ce,setFieldValue:k}=z({validationSchema:E,initialValues:{lat:null,lng:null,map_desc:"",notes:"",machines:[{machine_name:"",quantity:1}]}}),{fields:q,push:L,remove:N}=J("machines"),g=D(!1),f=D(!1),j=()=>{L({machine_name:"",quantity:1})},P=()=>{f.value=!0},T=s=>{k("lat",s.lat),k("lng",s.lng),k("map_desc",s.address),f.value=!1},F=V(async s=>{var i;g.value=!0;try{const t=await B("/create-special-order",{method:"POST",body:{lat:s.lat,lng:s.lng,map_desc:s.map_desc,notes:s.notes,machines:JSON.stringify(s.machines)}});if(t&&(t.key==="success"||t.status===!0))w.success(a("categories.medicalSales.specialRequestPage.success")),U(v("/profile/sections/medical-sales"));else{const h=(t==null?void 0:t.msg)||(t==null?void 0:t.message)||a("error.somethingWentWrong");w.error(h)}}catch(t){console.error("Submit special request error:",t);const h=(t==null?void 0:t.error)||(t==null?void 0:t.message)||((i=t==null?void 0:t.data)==null?void 0:i.message)||a("error.somethingWentWrong");w.error(h)}finally{g.value=!1}});return X({title:a("categories.medicalSales.specialRequestPage.title")}),(s,i)=>{const t=O,h=W;return r(),n("div",ae,[e("div",oe,[e("div",le,[c(t,{items:C.value,class:"!p-0"},null,8,["items"])]),e("div",ie,[e("form",{onSubmit:i[0]||(i[0]=(...u)=>o(F)&&o(F)(...u)),class:"space-y-10"},[e("div",ne,[e("label",re,d(s.$t("categories.medicalSales.specialRequestPage.requiredDevices")),1),(r(!0),n(Y,null,Z(o(q),(u,l)=>(r(),n("div",{key:u.key,class:"flex flex-col md:flex-row gap-4 items-start md:items-center animate-fade-in"},[e("div",ce,[c(o(_),{name:`machines[${l}].machine_name`},{default:b(({field:x,errorMessage:m})=>[e("input",y({ref_for:!0},x,{type:"text",placeholder:s.$t("categories.medicalSales.specialRequestPage.deviceName"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":m}]}),null,16,de),m?(r(),n("span",ue,d(m),1)):p("",!0)]),_:2},1032,["name"])]),e("div",me,[c(o(_),{name:`machines[${l}].quantity`},{default:b(({field:x,errorMessage:m})=>[e("input",y({ref_for:!0},x,{type:"number",min:"1",placeholder:s.$t("categories.medicalSales.specialRequestPage.count"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-4 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold text-center no-arrow placeholder:text-[#8B7E74]",{"ring-2 ring-red-500/50":m}]}),null,16,pe),m?(r(),n("span",he,d(m),1)):p("",!0)]),_:2},1032,["name"])]),e("div",ge,[l===o(q).length-1?(r(),n("button",{key:0,type:"button",onClick:j,class:"bg-[#1A1A1A] text-white w-14 h-14 rounded-xl flex items-center justify-center hover:bg-black transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-black/10"},[c(o(R),{class:"w-6 h-6"})])):p("",!0),o(q).length>1?(r(),n("button",{key:1,type:"button",onClick:x=>o(N)(l),class:"bg-red-500/10 text-red-500 w-14 h-14 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-red-500/5"},[c(o(se),{class:"w-6 h-6"})],8,fe)):p("",!0)])]))),128))]),e("div",xe,[e("label",_e,d(s.$t("categories.medicalSales.specialRequestPage.deviceLocation")),1),e("div",be,[c(o(_),{name:"map_desc"},{default:b(({field:u,errorMessage:l})=>[e("input",y(u,{type:"text",readonly:"",onClick:P,placeholder:s.$t("categories.medicalSales.specialRequestPage.deviceLocation"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 rtl:pl-16 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold cursor-pointer transition-all placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":l}]}),null,16,ye),l?(r(),n("span",ve,d(l),1)):p("",!0)]),_:1}),e("button",{type:"button",onClick:P,class:"absolute rtl:left-4 ltr:right-4 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-xl border border-white transition-all transform hover:scale-110 shadow-sm text-primary"},[c(o(R),{class:"w-5 h-5"})])])]),e("div",we,[e("label",ke,d(s.$t("categories.medicalSales.specialRequestPage.notes")),1),c(o(_),{name:"notes"},{default:b(({field:u,errorMessage:l})=>[e("textarea",y(u,{placeholder:s.$t("categories.medicalSales.specialRequestPage.notes"),rows:"6",class:["w-full bg-white/60 border-none rounded-[32px] py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold resize-none placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":l}]}),null,16,qe),l?(r(),n("span",Se,d(l),1)):p("",!0)]),_:1})]),e("div",$e,[e("button",{type:"submit",disabled:g.value,class:"relative overflow-hidden group bg-gradient-to-r from-[#AC4520] to-[#E36D45] text-white px-20 py-5 rounded-[24px] font-bold text-xl transition-all transform hover:-translate-y-2 hover:shadow-[0_20px_40px_rgba(172,69,32,0.3)] disabled:opacity-50 min-w-[280px]"},[i[3]||(i[3]=e("div",{class:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"},null,-1)),g.value?(r(),n("span",Fe,[i[2]||(i[2]=e("span",{class:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),ee(" "+d(s.$t("common.sending")),1)])):(r(),n("span",Ae,d(s.$t("categories.medicalSales.specialRequestPage.send")),1))],8,Pe)])],32)])]),c(h,{"is-open":f.value,onClose:i[1]||(i[1]=u=>f.value=!1),onLocationSelected:T},null,8,["is-open"])])}}},Me=H(De,[["__scopeId","data-v-bf30ea13"]]);export{Me as default};
