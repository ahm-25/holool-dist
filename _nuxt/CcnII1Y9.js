import{r as M,g as l,W as z,n as U,c as d,o as c,a as n,b as g,J as H,d as J,t as i,C as b,F as y,B as V,O as Y}from"./BnZsyVnb.js";import{_ as G,C as K,P as Q,a as X}from"./DAKoUx2z.js";import{_ as Z}from"./CYLg_Ex5.js";import{b as ee}from"./C23gwpmt.js";import"./DO0cNMk5.js";import"./DgGni032.js";import"./BvhettUz.js";import"./BHcdgoKS.js";const te={class:"min-h-screen pb-20 overflow-x-hidden relative"},ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},se={key:0,class:"mt-6 p-4 rounded-2xl bg-red-50/80 border border-red-200 text-red-700"},ne={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},oe={class:"w-full mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in"},re={class:"flex justify-between items-start mb-4"},ie={class:"flex flex-col items-start gap-1"},le={class:"text-[#8b7e77] text-sm"},de={class:"text-[#5d5551] font-bold text-lg"},ce={class:"flex items-start gap-3"},ue={class:"flex flex-col items-end"},me={class:"font-bold text-[#5d5551] text-lg"},ge={class:"flex items-center gap-1 text-[#9ca3af] text-xs mt-0.5"},pe={class:"w-10 h-10 rounded-lg border border-[#bf4e26]/30 flex items-center justify-center text-[#bf4e26] bg-[#bf4e26]/10"},fe={class:"flex justify-between items-end mt-2 pt-3 border-t border-[#bf4e26]/10"},_e={class:"flex flex-col gap-1"},be={class:"text-[#8b7e77] text-xs"},ve={class:"font-bold text-[#5d5551]"},he=["onClick"],xe={key:1,class:"col-span-full flex flex-col items-center justify-center py-20 text-[#8b7e77] opacity-60"},ye={class:"text-lg font-medium"},Fe={__name:"index",async setup(we){let p,w;const f=M("NEW"),r=M(1),v=l(()=>({NEW:"new",PAYMENT:"waiting_for_pay",CURRENT:"current",FINISHED:"finished"})[f.value]||"new"),I=l(()=>({status:v.value,page:r.value})),L=l(()=>`orders-rent-${v.value}-${r.value}`),{data:O,pending:N,error:R,refresh:S}=([p,w]=z(()=>ee("/orders/rent",{query:I,watch:[v,r],server:!1,key:L})),p=await p,w(),p),k=l(()=>{const e=O.value;if(!e||typeof e!="object")return e;const s=e,a=s!=null&&s.data&&typeof s.data=="object"?s.data:s,o=a!=null&&a.data&&typeof a.data=="object"?a.data:a,u=(o==null?void 0:o.pagination)??(a==null?void 0:a.pagination)??(s==null?void 0:s.pagination);return u&&o&&typeof o=="object"&&!Array.isArray(o)&&!o.pagination?{...o,pagination:u}:o}),$=l(()=>{var a;const e=k.value;return Array.isArray(e==null?void 0:e.orders)&&e.orders||Array.isArray((a=e==null?void 0:e.data)==null?void 0:a.orders)&&e.data.orders||Array.isArray(e)&&e||[]}),A=l(()=>{var u,C,T,P,F,E,D,B;const e=k.value,s=_=>{if(!_||typeof _!="string")return null;try{const m=new URL(_).searchParams.get("page"),x=Number(m);return Number.isFinite(x)&&x>0?x:null}catch{const h=_.match(/[?&]page=(\d+)/);if(!h)return null;const m=Number(h[1]);return Number.isFinite(m)&&m>0?m:null}},a=((u=e==null?void 0:e.pagination)==null?void 0:u.total_pages)??((C=e==null?void 0:e.pagination)==null?void 0:C.totalPages)??(e==null?void 0:e.total_pages)??(e==null?void 0:e.last_page)??((T=e==null?void 0:e.meta)==null?void 0:T.last_page)??((P=e==null?void 0:e.pagination)==null?void 0:P.last_page)??((F=e==null?void 0:e.data)==null?void 0:F.last_page)??(e!=null&&e.total&&(e!=null&&e.per_page)?Math.ceil(Number(e.total)/Number(e.per_page)):null)??((E=e==null?void 0:e.pagination)!=null&&E.total_items&&((D=e==null?void 0:e.pagination)!=null&&D.per_page)?Math.ceil(Number(e.pagination.total_items)/Number(e.pagination.per_page)):null)??s(e==null?void 0:e.last_page_url)??s((B=e==null?void 0:e.pagination)==null?void 0:B.next_page_url)??1,o=Number(a);return Number.isFinite(o)&&o>0?o:1}),j=l(()=>R.value?t("profile.orders.rental.loadError"):null),W=l(()=>N.value);U(f,()=>{r.value=1}),U([A,N],([e,s])=>{s||(r.value>e&&(r.value=e||1),r.value<1&&(r.value=1))});const q=e=>{f.value=e};return(e,s)=>(c(),d("div",te,[n("div",ae,[g(Z,{items:[{label:e.$t("profile.orders.title"),to:"/profile/orders",active:!1},{label:e.$t("profile.orders.menuItems.rental.title"),active:!0}]},null,8,["items"]),g(G,{"active-tab":f.value,onChange:q},null,8,["active-tab"]),j.value?(c(),d("div",se,[J(i(j.value)+" ",1),n("button",{class:"underline font-semibold ms-2",onClick:s[0]||(s[0]=a=>b(S)())},i(e.$t("cards.maintenanceDetails.retry")),1)])):H("",!0),W.value?(c(),d("div",ne,[(c(),d(y,null,V(6,a=>n("div",{key:a,class:"animate-pulse rounded-2xl bg-white/40 h-[150px]"})),64))])):(c(),d(y,{key:2},[n("div",oe,[$.value.length?(c(!0),d(y,{key:0},V($.value,a=>(c(),d("div",{key:a.id??a.order_num,class:"group bg-white/40 backdrop-blur-sm border border-white/60 rounded-2xl p-5 shadow-sm hover:shadow-md hover:bg-white/60 transition-all duration-300 flex flex-col justify-between min-h-[140px]"},[n("div",re,[n("div",ie,[n("span",le,i(e.$t("cards.maintenanceDetails.serviceType"))+" :",1),n("span",de,i(a.type_text??a.serviceType??"-"),1)]),n("div",ce,[n("div",ue,[n("span",me,i(a.order_num??a.id),1),n("div",ge,[g(b(K),{class:"w-3 h-3"}),n("span",null,i(a.created_at??a.time??""),1)])]),n("div",pe,[g(b(Q),{class:"w-5 h-5"})])])]),n("div",fe,[n("div",_e,[n("span",be,i(e.$t("cards.maintenanceDetails.status"))+" :",1),n("span",ve,i(a.status_text??a.status??""),1)]),n("button",{onClick:o=>("navigateTo"in e?e.navigateTo:b(Y))(`/profile/orders/rental/${a.id}`),class:"text-primary font-bold text-sm hover:underline"},i(e.$t("common.viewOrder")),9,he)])]))),128)):(c(),d("div",xe,[s[2]||(s[2]=n("div",{class:"w-16 h-16 mb-4 rounded-full border-2 border-dashed border-[#8b7e77] flex items-center justify-center"},[n("span",{class:"text-2xl"},"!")],-1)),n("p",ye,i(e.$t("profile.orders.noOrders")),1)]))]),g(X,{page:r.value,"onUpdate:page":s[1]||(s[1]=a=>r.value=a),"total-pages":A.value},null,8,["page","total-pages"])],64))])]))}};export{Fe as default};
