import{_ as D}from"./BBQlDElQ.js";import{_ as M}from"./Fxj2H62A.js";import{_ as $}from"./XDG_G50n.js";import{E as G,r as y,K as z,G as T,H,k as R,u as K,c as f,a as t,L as O,C as s,b as l,t as a,S as U,w as h,d as g,o as _,T as k}from"./OI3PzNV2.js";import{c as q,u as J,F as A,E as F}from"./B-tkdhUT.js";import{u as Q}from"./Qprbs6rC.js";import{_ as W}from"./BFLBms6F.js";import{l as X}from"./BgH2Av2K.js";import{e as Y,a as Z}from"./f__Oa2D6.js";import{u as tt}from"./CYfhutIQ.js";import"./BVEisI2u.js";import"./CpGMb49Z.js";const st=["dir"],et={class:"w-full md:w-[50%] relative flex flex-col items-center justify-center p-6 md:p-12 z-10 overflow-y-auto"},ot={class:"mt-12 md:mt-16 w-full text-center mb-10"},at={class:"hidden md:flex justify-center mb-8"},lt=["src"],nt={class:"flex items-center justify-between"},rt={class:"text-3xl font-bold text-brand-textDark mb-2"},it={class:"text-gray-500 text-sm font-medium"},ct={class:"space-y-2"},dt={class:"text-sm text-gray-600 font-bold flex px-1"},ut={class:"space-y-2"},mt={class:"text-sm text-gray-600 font-bold flex px-1"},ht={class:"relative"},pt={class:"absolute right-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500 pointer-events-none"},ft=["src"],gt=["type","placeholder"],_t=["src"],xt=["src"],bt={class:"flex justify-end pt-1"},vt=["disabled"],wt={class:"flex flex-col items-center space-y-6 pt-6"},yt={class:"text-sm text-gray-600 font-medium"},Mt={__name:"login",setup(kt){const{t:o,locale:x}=G(),c=y(!1),d=y(!1),p=z(),u=T(),b=H(),m=tt(),{phoneNumber:j,password:C}=Q(),S=q({phone:j,password:C}),{handleSubmit:L,values:At,setFieldValue:V}=J({validationSchema:S,initialValues:{phone:"",password:""}});R(()=>{p.initAuth()});const P=r=>{console.log("Country changed:",r)};K({title:o("auth.login.title")});const v=L(async r=>{d.value=!0;try{const e=await p.login({phone:r.phone,password:r.password,lang:x.value});e.success?(m.success(o("auth.login.success")),await b.push(u("/"))):m.error(e.error||o("auth.login.errors.loginFailed"))}catch(e){console.error("Login error:",e),m.error(o("auth.login.errors.loginError"))}finally{d.value=!1}}),E=()=>{p.setGuestMode(),m.success(o("auth.login.guestLoginSuccess")),b.push(u("/"))};return(r,e)=>{const I=D,N=M,w=$;return _(),f("div",{class:"h-screen w-full flex flex-col md:flex-row",dir:s(x)==="ar"?"rtl":"ltr"},[e[5]||(e[5]=t("div",{class:"hidden h-screen md:flex flex-1 radial-gradient-subtle items-center justify-center p-12 relative overflow-hidden"},[t("div",{class:"text-center z-10"},[t("img",{src:O,alt:"logo",class:"w-56 h-48 mx-auto"})])],-1)),t("div",et,[e[3]||(e[3]=t("div",{class:"absolute top-0 left-0"},null,-1)),e[4]||(e[4]=t("div",{class:"mb-8 md:hidden"},[t("svg",{viewBox:"0 0 114 97",class:"w-24 h-20"})],-1)),t("div",ot,[t("div",at,[t("img",{src:s(W),alt:"logo",class:"w-24 h-20"},null,8,lt)]),t("div",nt,[t("div",null,[t("h2",rt,a(s(o)("auth.login.title")),1),t("p",it,a(s(o)("auth.login.subtitle")),1)]),l(I,{variant:"auth",size:"sm"})])]),t("form",{class:"w-full space-y-5",onSubmit:e[2]||(e[2]=U((...n)=>s(v)&&s(v)(...n),["prevent"]))},[t("div",ct,[t("label",dt,a(s(o)("auth.login.mobileNumber")),1),l(s(A),{name:"phone"},{default:h(({field:n,meta:i})=>[l(N,k(n,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=B=>s(V)("phone",B)),onCountryChanged:P,class:[i.touched&&i.invalid&&"ring-2 ring-red-500/50"]}),null,16,["modelValue","class"])]),_:1}),l(s(F),{name:"phone",class:"text-red-500 text-xs px-1 block text-right"})]),t("div",ut,[t("label",mt,a(s(o)("auth.login.password")),1),t("div",ht,[t("div",pt,[t("img",{src:s(X),alt:"lock",class:"w-5 h-5 object-contain"},null,8,ft)]),l(s(A),{name:"password"},{default:h(({field:n,meta:i})=>[t("input",k({type:c.value?"text":"password"},n,{placeholder:s(o)("auth.login.passwordPlaceholder"),class:["w-full bg-[#E9DCD6]/80 border-none rounded-xl px-4 py-4 pr-12 pl-12   focus:outline-none focus:ring-2 focus:ring-[#A6431F]/30 shadow-sm flex",i.touched&&i.invalid&&"ring-2 ring-red-500/50"]}),null,16,gt)]),_:1}),t("button",{type:"button",onClick:e[1]||(e[1]=n=>c.value=!c.value),class:"absolute left-0 top-0 bottom-0 w-12 flex items-center justify-center text-gray-500"},[c.value?(_(),f("img",{key:0,src:s(Y),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,_t)):(_(),f("img",{key:1,src:s(Z),alt:"show password",class:"w-5 h-5 object-contain"},null,8,xt))])]),l(s(F),{name:"password",class:"text-red-500 text-xs px-1 block text-right"})]),t("div",bt,[l(w,{to:s(u)("/auth/forgot-password"),class:"text-sm font-bold text-brand-textDark hover:text-[#A6431F] transition"},{default:h(()=>[g(a(s(o)("auth.login.forgotPassword")),1)]),_:1},8,["to"])]),t("button",{type:"submit",disabled:d.value,class:"w-full !py-4 back-btn transition transform hover:-translate-y-1 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"},a(d.value?s(o)("auth.login.loggingIn"):s(o)("auth.login.button")),9,vt),t("div",wt,[t("a",{onClick:E,class:"text-[#A6431F] font-bold border-b-2 border-[#A6431F]/20 hover:border-[#A6431F] cursor-pointer transition-colors"},a(s(o)("auth.login.loginAsGuest")),1),t("div",yt,[g(a(s(o)("auth.login.noAccount"))+" ",1),l(w,{to:s(u)("/auth/register"),class:"text-[#A6431F] font-bold hover:underline"},{default:h(()=>[g(a(s(o)("auth.login.createAccount")),1)]),_:1},8,["to"])])])],32)])],8,st)}}};export{Mt as default};
