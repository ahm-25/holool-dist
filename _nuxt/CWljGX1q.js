import{_ as T}from"./CDle7JFB.js";import{_ as W}from"./DxOD6fZ8.js";import{c as A,g as S,b as $,f as I,u as O,i as z,F as _}from"./CRRIYHK-.js";import{_ as H,E as J,G,g as K,r as R,R as Q,u as U,c as n,o as r,a as e,b as c,C as a,t as d,F as X,B as Y,w as b,J as p,T as v,d as Z}from"./c72oGId3.js";import{u as M}from"./C_Rn6DEZ.js";import{u as ee}from"./DXanP2VQ.js";import{P as D}from"./BLmtJ4Y0.js";import{M as te}from"./CPax9l0L.js";import"./BadBXD5j.js";import"./DzX9AWjo.js";import"./JgLJjp22.js";import"./DMlAnEmj.js";import"./CzzcvkpU.js";const se={class:"min-h-screen radial-gradient-page py-12 px-4 font-expo"},ae={class:"container mx-auto max-w-4xl"},oe={class:"flex justify-start mb-8"},le={class:"bg-white/40 backdrop-blur-xl rounded-[50px] p-8 md:p-14 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-white/40"},ie={class:"space-y-4"},ne={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},re={class:"flex-1 w-full"},ce=["placeholder"],de={key:0,class:"text-red-500 text-xs mt-1 block px-2"},ue={class:"w-full md:w-32"},pe=["placeholder"],me={key:0,class:"text-red-500 text-xs mt-1 block text-center"},he={class:"flex gap-2"},ge=["onClick"],fe={class:"space-y-4"},xe={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},_e={class:"relative group"},be=["placeholder"],ve={key:0,class:"text-red-500 text-xs mt-1 block px-2"},ye={class:"space-y-4"},we={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},qe=["placeholder"],ke={key:0,class:"text-red-500 text-xs mt-1 block px-2"},Se={class:"flex justify-center pt-6"},$e=["disabled"],Pe={key:0,class:"flex items-center justify-center gap-3"},Fe={key:1,class:"relative z-10"},Ae={__name:"index",setup(Re){const{locale:De,t:s}=J(),y=G(),w=M(),B=K(()=>[{label:s("navigation.home"),to:y("/")},{label:s("categories.medicalSales.title"),to:y("/profile/sections/medical-sales")},{label:s("categories.medicalSales.specialRequestPage.title"),active:!0}]),C=A({machines:I().of(A({machine_name:$().required(s("validation.required")),quantity:S().required(s("validation.required")).min(1,s("validation.minValue",{min:1}))})).min(1,s("validation.required")),map_desc:$().required(s("validation.required")),notes:$().required(s("validation.required")),lat:S().required(),lng:S().required()}),{handleSubmit:E,values:Be,setFieldValue:q}=O({validationSchema:C,initialValues:{lat:null,lng:null,map_desc:"",notes:"",machines:[{machine_name:"",quantity:1}]}}),{fields:k,push:V,remove:L}=z("machines"),m=R(!1),h=R(!1),N=()=>{V({machine_name:"",quantity:1})},P=()=>{h.value=!0},j=t=>{q("lat",t.lat),q("lng",t.lng),q("map_desc",t.address),h.value=!1},F=E(async t=>{var l,g;m.value=!0;try{const{data:f,error:i}=await ee({url:"/create-special-order",method:"POST",data:{lat:t.lat,lng:t.lng,map_desc:t.map_desc,notes:t.notes,machines:JSON.stringify(t.machines)}});i.value?w.error(((g=(l=i.value)==null?void 0:l.data)==null?void 0:g.message)||s("error.somethingWentWrong")):(w.success(s("categories.medicalSales.specialRequestPage.success")),Q(y("/profile/sections/medical-sales")))}catch(f){console.error("Submit special request error:",f),w.error(s("error.somethingWentWrong"))}finally{m.value=!1}});return U({title:s("categories.medicalSales.specialRequestPage.title")}),(t,l)=>{const g=T,f=W;return r(),n("div",se,[e("div",ae,[e("div",oe,[c(g,{items:B.value,class:"!p-0"},null,8,["items"])]),e("div",le,[e("form",{onSubmit:l[0]||(l[0]=(...i)=>a(F)&&a(F)(...i)),class:"space-y-10"},[e("div",ie,[e("label",ne,d(t.$t("categories.medicalSales.specialRequestPage.requiredDevices")),1),(r(!0),n(X,null,Y(a(k),(i,o)=>(r(),n("div",{key:i.key,class:"flex flex-col md:flex-row gap-4 items-start md:items-center animate-fade-in"},[e("div",re,[c(a(_),{name:`machines[${o}].machine_name`},{default:b(({field:x,errorMessage:u})=>[e("input",v({ref_for:!0},x,{type:"text",placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceName"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":u}]}),null,16,ce),u?(r(),n("span",de,d(u),1)):p("",!0)]),_:2},1032,["name"])]),e("div",ue,[c(a(_),{name:`machines[${o}].quantity`},{default:b(({field:x,errorMessage:u})=>[e("input",v({ref_for:!0},x,{type:"number",min:"1",placeholder:t.$t("categories.medicalSales.specialRequestPage.count"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-4 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold text-center no-arrow placeholder:text-[#8B7E74]",{"ring-2 ring-red-500/50":u}]}),null,16,pe),u?(r(),n("span",me,d(u),1)):p("",!0)]),_:2},1032,["name"])]),e("div",he,[o===a(k).length-1?(r(),n("button",{key:0,type:"button",onClick:N,class:"bg-[#1A1A1A] text-white w-14 h-14 rounded-xl flex items-center justify-center hover:bg-black transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-black/10"},[c(a(D),{class:"w-6 h-6"})])):p("",!0),a(k).length>1?(r(),n("button",{key:1,type:"button",onClick:x=>a(L)(o),class:"bg-red-500/10 text-red-500 w-14 h-14 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-red-500/5"},[c(a(te),{class:"w-6 h-6"})],8,ge)):p("",!0)])]))),128))]),e("div",fe,[e("label",xe,d(t.$t("categories.medicalSales.specialRequestPage.deviceLocation")),1),e("div",_e,[c(a(_),{name:"map_desc"},{default:b(({field:i,errorMessage:o})=>[e("input",v(i,{type:"text",readonly:"",onClick:P,placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceLocation"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 rtl:pl-16 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold cursor-pointer transition-all placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":o}]}),null,16,be),o?(r(),n("span",ve,d(o),1)):p("",!0)]),_:1}),e("button",{type:"button",onClick:P,class:"absolute rtl:left-4 ltr:right-4 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-xl border border-white transition-all transform hover:scale-110 shadow-sm text-primary"},[c(a(D),{class:"w-5 h-5"})])])]),e("div",ye,[e("label",we,d(t.$t("categories.medicalSales.specialRequestPage.notes")),1),c(a(_),{name:"notes"},{default:b(({field:i,errorMessage:o})=>[e("textarea",v(i,{placeholder:t.$t("categories.medicalSales.specialRequestPage.notes"),rows:"6",class:["w-full bg-white/60 border-none rounded-[32px] py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold resize-none placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":o}]}),null,16,qe),o?(r(),n("span",ke,d(o),1)):p("",!0)]),_:1})]),e("div",Se,[e("button",{type:"submit",disabled:m.value,class:"relative overflow-hidden group bg-gradient-to-r from-[#AC4520] to-[#E36D45] text-white px-20 py-5 rounded-[24px] font-bold text-xl transition-all transform hover:-translate-y-2 hover:shadow-[0_20px_40px_rgba(172,69,32,0.3)] disabled:opacity-50 min-w-[280px]"},[l[3]||(l[3]=e("div",{class:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"},null,-1)),m.value?(r(),n("span",Pe,[l[2]||(l[2]=e("span",{class:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),Z(" "+d(t.$t("common.sending")),1)])):(r(),n("span",Fe,d(t.$t("categories.medicalSales.specialRequestPage.send")),1))],8,$e)])],32)])]),c(f,{"is-open":h.value,onClose:l[1]||(l[1]=i=>h.value=!1),onLocationSelected:j},null,8,["is-open"])])}}},Ge=H(Ae,[["__scopeId","data-v-a94b498b"]]);export{Ge as default};
