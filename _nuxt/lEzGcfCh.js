import{_ as V}from"./B3_awDU6.js";import{u as E,F as g,E as b}from"./B-tkdhUT.js";import{u as F}from"./Qprbs6rC.js";import{r as d,K as I,H as L,G as N,E as A,c as r,o as n,a as s,b as l,C as e,t as c,w as _,T as v,d as D}from"./OI3PzNV2.js";import{u as M}from"./CYfhutIQ.js";import{e as x,a as y}from"./f__Oa2D6.js";import{c as T}from"./CpGMb49Z.js";import"./XDG_G50n.js";import"./DwuVNmEu.js";/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=T("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),R={class:"min-h-screen w-full relative overflow-hidden p-6 sm:p-10"},G={class:"relative z-10 transition-all duration-700"},H={class:"w-full max-w-2xl px-4 z-10 mx-auto"},K={class:"bg-white/20 backdrop-blur-xl border border-white/40 rounded-[2.5rem] shadow-2xl shadow-[#8B4513]/10 p-8 md:p-12 relative overflow-hidden"},O={class:"flex flex-col gap-2 w-full"},q={class:"text-[#8B4513] text-sm font-semibold pr-1"},J={class:"relative group"},Q={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},U=["type","placeholder"],W=["src"],X=["src"],Y={class:"flex flex-col gap-2 w-full"},Z={class:"flex justify-between items-center"},ss={class:"text-[#8B4513] text-sm font-semibold pr-1"},ts={class:"relative group"},es={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},os=["type","placeholder"],as=["src"],ls=["src"],rs={class:"flex flex-col gap-2 w-full"},ns={class:"text-[#8B4513] text-sm font-semibold pr-1"},is={class:"relative group"},ds={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},cs=["type","placeholder"],us=["src"],ps=["src"],hs={class:"mt-6 flex justify-center w-full"},ws=["disabled"],ms={key:0,class:"inline-flex items-center gap-2"},fs={key:1},js={__name:"change-password",setup(gs){const{passwordChangeSchema:$}=F(),{handleSubmit:B,setFieldValue:bs}=E({validationSchema:$,initialValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),u=d(!1),p=d(!1),h=d(!1);d(!1);const w=d(!1),C=I(),m=M(),j=L(),S=N(),{t:f}=A(),k=B(async o=>{w.value=!0;try{const t=await C.updatePassword({currentPassword:o.currentPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword});t.success?(m.success(t.message||f("settings.password_change_success")),j.push(S("/profile/more/settings"))):m.error(t.error||f("settings.password_change_failed"))}catch{m.error(f("settings.password_change_error"))}finally{w.value=!1}});return(o,t)=>{const z=V;return n(),r("div",R,[s("div",G,[l(z,{items:[{label:o.$t("settings.title"),to:"/profile/more/settings",active:!1},{label:o.$t("settings.changePassword"),to:"/profile/more/settings/change-password",active:!0}],direction:"rtl"},null,8,["items"])]),t[7]||(t[7]=s("div",{class:"absolute top-0 left-0 w-full h-full opacity-60 pointer-events-none"},[s("div",{class:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-white/20 rounded-full blur-[100px]"}),s("div",{class:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-[#8B4513]/20 rounded-full blur-[100px]"})],-1)),s("div",H,[s("div",K,[t[5]||(t[5]=s("div",{class:"absolute -top-20 -right-20 w-64 h-64 bg-white/10 rounded-full blur-3xl"},null,-1)),t[6]||(t[6]=s("div",{class:"absolute -bottom-20 -left-20 w-64 h-64 bg-[#D2691E]/10 rounded-full blur-3xl"},null,-1)),s("form",{onSubmit:t[3]||(t[3]=(...a)=>e(k)&&e(k)(...a)),class:"flex flex-col gap-6 relative z-10"},[s("div",O,[s("label",q,c(o.$t("settings.current_password")),1),s("div",J,[s("div",Q,[l(e(P),{size:"20"})]),l(e(g),{name:"currentPassword"},{default:_(({field:a,meta:i})=>[s("input",v({type:u.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.current_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,U)]),_:1}),s("button",{type:"button",onClick:t[0]||(t[0]=a=>u.value=!u.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[u.value?(n(),r("img",{key:0,src:e(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,W)):(n(),r("img",{key:1,src:e(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,X))])]),l(e(b),{name:"currentPassword",class:"text-red-500 text-xs pr-1"})]),s("div",Y,[s("div",Z,[s("label",ss,c(o.$t("settings.new_password")),1)]),s("div",ts,[s("div",es,[l(e(P),{size:"20"})]),l(e(g),{name:"newPassword"},{default:_(({field:a,meta:i})=>[s("input",v({type:p.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.new_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,os)]),_:1}),s("button",{type:"button",onClick:t[1]||(t[1]=a=>p.value=!p.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[p.value?(n(),r("img",{key:0,src:e(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,as)):(n(),r("img",{key:1,src:e(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,ls))])]),l(e(b),{name:"newPassword",class:"text-red-500 text-xs pr-1"})]),s("div",rs,[s("label",ns,c(o.$t("settings.confirm_password")),1),s("div",is,[s("div",ds,[l(e(P),{size:"20"})]),l(e(g),{name:"confirmPassword"},{default:_(({field:a,meta:i})=>[s("input",v({type:h.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.confirm_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,cs)]),_:1}),s("button",{type:"button",onClick:t[2]||(t[2]=a=>h.value=!h.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[h.value?(n(),r("img",{key:0,src:e(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,us)):(n(),r("img",{key:1,src:e(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,ps))])]),l(e(b),{name:"confirmPassword",class:"text-red-500 text-xs pr-1"})]),s("div",hs,[s("button",{type:"submit",disabled:w.value,class:"bg-gradient-to-r from-[#9A4010] to-[#CD6428] hover:from-[#8B3505] hover:to-[#B05015] text-white font-bold py-3 px-16 rounded-xl shadow-lg shadow-[#9A4010]/30 transform transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"},[w.value?(n(),r("span",ms,[t[4]||(t[4]=s("span",{class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),D(" "+c(o.$t("common.updating")),1)])):(n(),r("span",fs,c(o.$t("common.edit")),1))],8,ws)])],32)])])])}}};export{js as default};
