import{_ as U}from"./CGfWc8dA.js";import{_ as q}from"./e2BhSMQC.js";import{_ as Y}from"./DiY3edDc.js";import{B as Z}from"./B6-veoRu.js";import{b as p}from"./CEwE9Az9.js";import{_ as ee,a4 as te,W as se,g as oe,r as c,H as ae,G as le,c as r,o as n,J as i,b as h,C as d,a as e,t as s,F as w,B as y,A as ne,w as L,M as re}from"./B5HeACpe.js";import{u as ie}from"./zDzW9YfH.js";import{C as de}from"./Yyz5NENq.js";import{M as ce}from"./BVNry3zC.js";import{S as ue}from"./BiOs14Yb.js";import{c as he}from"./BB7hngxF.js";import"./aSvSgRgq.js";import"./P9Gc60wC.js";/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=he("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),me={class:"min-h-screen pb-24 font-sans text-right relative"},fe={key:0,class:"flex items-center justify-center min-h-[60vh]"},_e={key:1,class:"max-w-7xl mx-auto px-4 py-12 flex flex-col items-center text-center"},ve={class:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mb-4"},pe={class:"text-xl font-bold text-gray-800 mb-2"},xe={class:"text-gray-500 mb-6"},ge={key:2,class:"pt-8 px-4 md:px-8 max-w-7xl mx-auto"},we={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-24"},ye={class:"space-y-6 lg:order-2"},ke={class:"bg-white/40 backdrop-blur-md border border-white/60 shadow-sm rounded-2xl p-6"},$e={class:"flex justify-between items-center mb-4 border-b border-gray-200/30 pb-2"},Ce={class:"text-[#5d5551] font-bold text-lg"},De={class:"space-y-4"},je={class:"flex justify-between items-center"},Me={class:"text-[#8b7e77] text-sm"},Ee={class:"text-[#5d5551] font-bold font-mono"},Be={class:"flex justify-between items-center"},Pe={class:"text-[#8b7e77] text-sm"},Se={class:"text-[#5d5551] font-bold"},Ae={class:"flex justify-between items-center"},Fe={class:"text-[#8b7e77] text-sm"},Ie={class:"text-[#5d5551] font-bold"},Ne={class:"flex justify-between items-start pt-2"},qe={class:"text-[#8b7e77] text-sm"},Le={class:"flex items-center gap-1 text-[#bf4e26] font-bold text-left max-w-[250px]"},Oe={class:"bg-white/40 backdrop-blur-md border border-white/60 shadow-sm rounded-2xl p-6"},Te={class:"flex justify-between items-center mb-4 border-b border-gray-200/30 pb-2"},Re={class:"text-[#5d5551] font-bold text-lg"},Ve={class:"text-[#8b7e77] text-sm leading-relaxed min-h-[60px]"},ze={class:"space-y-6 lg:order-1"},He={class:"bg-white/40 backdrop-blur-md border border-white/60 shadow-sm rounded-2xl p-6"},We={class:"flex justify-between items-center mb-4 border-b border-gray-200/30 pb-2"},Ge={class:"text-[#5d5551] font-bold text-lg"},Je={key:0,class:"space-y-6"},Xe={class:"flex items-start justify-between"},Ke={class:"flex items-center gap-4"},Qe={class:"w-20 h-20 rounded-xl overflow-hidden border border-white bg-white shadow-sm"},Ue=["src"],Ye={class:"font-bold text-[#5d5551] text-lg"},Ze={class:"text-[#8b7e77] text-sm mt-1"},et={class:"mt-2 flex items-baseline gap-1 text-[#bf4e26]"},tt={class:"font-bold text-xl"},st={class:"text-right"},ot={class:"text-[#8b7e77] text-sm"},at={class:"font-bold text-[#5d5551] block"},lt={key:1,class:"flex flex-col gap-4"},nt={class:"flex items-start justify-between"},rt={class:"flex items-center gap-4"},it={class:"w-20 h-20 rounded-xl overflow-hidden border border-white bg-white shadow-sm"},dt=["src"],ct={class:"font-bold text-[#5d5551] text-lg"},ut={class:"text-[#8b7e77] text-sm mt-1"},ht={class:"mt-2 flex items-baseline gap-1 text-[#bf4e26]"},bt={class:"font-bold text-xl"},mt={class:"text-right"},ft={class:"text-[#8b7e77] text-sm"},_t={class:"font-bold text-[#5d5551] block"},vt={key:0,class:"bg-white/40 backdrop-blur-md border border-white/60 shadow-sm rounded-2xl p-6"},pt={class:"flex justify-between items-center mb-4 border-b border-gray-200/30 pb-2"},xt={class:"text-[#5d5551] font-bold text-lg"},gt={class:"flex items-center justify-between"},wt={class:"flex items-center gap-4"},yt={class:"w-16 h-16 rounded-2xl overflow-hidden border-2 border-white shadow-md bg-white"},kt=["src"],$t={class:"font-bold text-[#5d5551] text-lg"},Ct={class:"flex text-yellow-400 text-xs mt-1"},Dt={key:0,class:"fixed bottom-8 left-0 right-0 z-40"},jt={class:"max-w-7xl mx-auto px-4 flex justify-center gap-4 flex-wrap"},Mt={key:0,class:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"},Et=["disabled"],Bt={key:0,class:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"},Pt={key:4,class:"min-w-[200px] bg-[#5d5551] text-white py-4 rounded-2xl font-bold text-lg hover:bg-[#4a4441] transition-all shadow-lg"},St={class:"p-4"},At={class:"text-center text-gray-800 font-bold text-lg mb-6"},Ft={class:"space-y-3 mb-8 max-h-[40vh] overflow-y-auto px-1"},It=["onClick"],Nt={class:"w-5 h-5 rounded-full border border-gray-300 flex items-center justify-center p-0.5"},qt={key:0,class:"w-full h-full bg-[#E57373] rounded-full"},Lt={class:"font-medium text-gray-700 text-right flex-1 mr-4"},Ot={class:"flex flex-col gap-3"},Tt=["disabled"],Rt={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},Vt={__name:"[id]",async setup(zt){let _,k;const v=te().params.id,{data:$,pending:O,error:C,refresh:x}=([_,k]=se(()=>p(`/orders/cart-details/${v}`,{key:`cart-order-${v}`})),_=await _,k(),_),o=oe(()=>{var t;return((t=$.value)==null?void 0:t.data)||$.value}),b=c(!1),m=c(!1),g=c([]),u=c(null),T=ae(),R=le(),V=ie(),f=c(!1),z=async()=>{if(!f.value){f.value=!0;try{const{data:t}=await p("/orders/finish-order",{method:"POST",body:{order_id:v}});t.value&&(t.value.key==="success"||t.value.status===!0)&&(V.success(t.value.msg),T.push(R("/profile/orders/market")))}catch(t){console.error("Finish failed",t)}finally{f.value=!1}}},H=c(!1),W=()=>{console.log("Open payment modal")},G=c(!1),J=async()=>{var t;if(g.value.length===0)try{const{data:a}=await p("/cancel-reasons");((t=a.value)==null?void 0:t.key)==="success"&&(g.value=a.value.data)}catch(a){console.error("Failed to fetch cancel reasons",a)}m.value=!0},X=async()=>{if(!(!u.value||b.value)){b.value=!0;try{const{data:t}=await p("/orders/cancel-order",{method:"POST",body:{order_id:v,cancel_type_reason_id:u.value}});t.value&&(t.value.key==="success"||t.value.status===!0)&&(m.value=!1,x())}catch(t){console.error("Cancel failed",t)}finally{b.value=!1}}};return(t,a)=>{var D,j,M,E,B,P,S,A,F,I;const K=U;return n(),r("div",me,[d(O)?(n(),r("div",fe,a[7]||(a[7]=[e("div",{class:"w-16 h-16 border-4 border-[#bf4e26]/10 border-t-[#bf4e26] rounded-full animate-spin"},null,-1)]))):d(C)?(n(),r("div",_e,[e("div",ve,[h(d(de),{class:"w-10 h-10 text-red-500"})]),e("h3",pe,s(t.$t("cards.maintenanceDetails.errorTitle")),1),e("p",xe,s(d(C).message||t.$t("common.errorLoadData")),1),e("button",{onClick:a[0]||(a[0]=(...l)=>d(x)&&d(x)(...l)),class:"px-6 py-2 bg-[#bf4e26] text-white rounded-lg hover:bg-[#a64420] transition-colors"},s(t.$t("cards.maintenanceDetails.retry")),1)])):o.value?(n(),r("div",ge,[h(Y,{items:[{label:t.$t("profile.orders.title"),to:"/profile/orders",active:!1},{label:t.$t("categories.medicalSales.title"),to:"/profile/orders/market",active:!1},{label:t.$t("cards.maintenanceDetails.title"),active:!0}],class:"mb-8"},null,8,["items"]),e("div",we,[e("div",ye,[e("div",ke,[e("div",$e,[e("h3",Ce,s(t.$t("cards.maintenanceDetails.orderInfo")),1)]),e("div",De,[e("div",je,[e("span",Me,s(t.$t("cards.maintenanceDetails.orderNum")),1),e("span",Ee,s(o.value.order_num??o.value.id),1)]),e("div",Be,[e("span",Pe,s(t.$t("cards.maintenanceDetails.status")),1),e("span",Se,s(o.value.status_text),1)]),e("div",Ae,[e("span",Fe,s(t.$t("cards.maintenanceDetails.serviceType")),1),e("span",Ie,s(o.value.type_text??t.$t("categories.medicalSales.title")),1)]),e("div",Ne,[e("span",qe,s(t.$t("cards.maintenanceDetails.location")),1),e("div",Le,[h(d(ce),{class:"w-4 h-4 flex-shrink-0"}),e("span",null,s(o.value.map_desc??"-"),1)])])])]),e("div",Oe,[e("div",Te,[e("h3",Re,s(t.$t("cards.maintenanceDetails.notes")),1)]),e("p",Ve,s(o.value.notes||t.$t("common.noNotes")),1)])]),e("div",ze,[e("div",He,[e("div",We,[e("h3",Ge,s(t.$t("cards.maintenanceDetails.deviceInfo")),1)]),(D=o.value.order_machines)!=null&&D.length||(j=o.value.machines)!=null&&j.length?(n(),r("div",Je,[(n(!0),r(w,null,y(o.value.order_machines||o.value.machines,(l,N)=>(n(),r("div",{key:N,class:"flex flex-col gap-4"},[e("div",Xe,[e("div",Ke,[e("div",Qe,[e("img",{src:l.machine_image||l.image,class:"w-full h-full object-cover",onError:a[1]||(a[1]=Q=>Q.target.src="https://placehold.co/200?text=Device")},null,40,Ue)]),e("div",null,[e("h4",Ye,s(l.machine_title||l.machine_name||l.title),1),e("p",Ze,s(t.$t("maintenance.contracts.deviceClass"))+": "+s(l.machine_class_text||"-"),1),e("div",et,[e("span",tt,s(l.price),1),a[8]||(a[8]=e("img",{src:q,alt:"sar",class:"w-4 h-4 object-contain"},null,-1))])])]),e("div",st,[e("span",ot,s(t.$t("maintenance.contracts.deviceCount"))+":",1),e("span",at,s(l.quantity),1)])])]))),128))])):o.value.machine?(n(),r("div",lt,[e("div",nt,[e("div",rt,[e("div",it,[e("img",{src:o.value.machine.image,class:"w-full h-full object-cover",onError:a[2]||(a[2]=l=>l.target.src="https://placehold.co/200?text=Device")},null,40,dt)]),e("div",null,[e("h4",ct,s(o.value.machine.title),1),e("p",ut,s(t.$t("maintenance.contracts.deviceClass"))+": "+s(o.value.machine.device_class||"-"),1),e("div",ht,[e("span",bt,s(o.value.machine.price),1),a[9]||(a[9]=e("img",{src:q,alt:"sar",class:"w-4 h-4 object-contain"},null,-1))])])]),e("div",mt,[e("span",ft,s(t.$t("maintenance.contracts.deviceCount"))+":",1),e("span",_t,s(o.value.quantity||1),1)])])])):i("",!0)]),o.value.provider||o.value.providerable?(n(),r("div",vt,[e("div",pt,[e("h3",xt,s(t.$t("cards.maintenanceDetails.providerDetails")),1)]),e("div",gt,[e("div",wt,[e("div",yt,[e("img",{src:((M=o.value.provider)==null?void 0:M.image)||((E=o.value.providerable)==null?void 0:E.image),class:"w-full h-full object-cover",onError:a[3]||(a[3]=l=>l.target.src="https://placehold.co/100x100?text=Provider")},null,40,kt)]),e("div",null,[e("h4",$t,s(((B=o.value.provider)==null?void 0:B.name)||((P=o.value.providerable)==null?void 0:P.name)),1),e("div",Ct,[(n(),r(w,null,y(5,l=>h(d(ue),{key:l,class:"w-3.5 h-3.5 fill-current"})),64))])])]),(S=o.value.provider)!=null&&S.room_id||(A=o.value.buttons)!=null&&A.room_id?(n(),ne(K,{key:0,to:{path:"/profile/chat",query:{roomId:((F=o.value.provider)==null?void 0:F.room_id)||((I=o.value.buttons)==null?void 0:I.room_id)}},class:"flex items-center gap-2 bg-[#EADFD8] text-[#8C6B5D] px-6 py-2.5 rounded-xl hover:bg-[#E0D0C5] transition-colors text-sm font-bold shadow-sm border border-[#DCCAC0]"},{default:L(()=>[h(d(be),{class:"w-4 h-4"}),e("span",null,s(t.$t("cards.maintenanceDetails.chat")),1)]),_:1},8,["to"])):i("",!0)])])):i("",!0)])]),o.value.buttons?(n(),r("div",Dt,[e("div",jt,[o.value.buttons.pay_button?(n(),r("button",{key:0,onClick:W,class:"min-w-[200px] bg-[#bf4e26] text-white py-4 rounded-2xl font-bold text-lg hover:bg-[#a64420] transition-all shadow-lg flex items-center justify-center gap-2"},[H.value?(n(),r("div",Mt)):i("",!0),e("span",null,s(t.$t("cards.maintenanceDetails.payNow")),1)])):i("",!0),o.value.buttons.finish?(n(),r("button",{key:1,onClick:z,disabled:f.value,class:"min-w-[200px] bg-[#bf4e26] text-white py-4 rounded-2xl font-bold text-lg hover:bg-[#a64420] transition-all shadow-lg flex items-center justify-center gap-2"},[f.value?(n(),r("div",Bt)):i("",!0),e("span",null,s(t.$t("common.finish")),1)],8,Et)):i("",!0),o.value.buttons.cancel?(n(),r("button",{key:2,onClick:J,class:"min-w-[200px] bg-white border-2 border-[#EC2D30] text-[#EC2D30] py-4 rounded-2xl font-bold text-lg hover:bg-red-50 transition-all shadow-lg"},s(t.$t("cards.maintenanceDetails.cancelOrder")),1)):i("",!0),o.value.buttons.rate?(n(),r("button",{key:3,onClick:a[4]||(a[4]=l=>G.value=!0),class:"min-w-[200px] bg-[#bf4e26] text-white py-4 rounded-2xl font-bold text-lg hover:bg-[#a64420] transition-all shadow-lg"},s(t.$t("cards.maintenanceDetails.rate")),1)):i("",!0),o.value.buttons.contact_with_admin?(n(),r("button",Pt,s(t.$t("cards.maintenanceDetails.contactWithAdmin")),1)):i("",!0)])])):i("",!0)])):i("",!0),h(Z,{visible:m.value,position:"bottom",width:"450px",onClose:a[6]||(a[6]=l=>m.value=!1)},{default:L(()=>[e("div",St,[e("h3",At,s(t.$t("cancelModal.title")),1),e("div",Ft,[(n(!0),r(w,null,y(g.value,l=>(n(),r("div",{key:l.id,onClick:N=>u.value=l.id,class:re(["flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all border group bg-white/50",u.value===l.id?"border-[#E57373] ring-1 ring-[#E57373]/20":"border-transparent hover:bg-white/80"])},[e("div",Nt,[u.value===l.id?(n(),r("div",qt)):i("",!0)]),e("span",Lt,s(l.name),1)],10,It))),128))]),e("div",Ot,[e("button",{onClick:X,disabled:!u.value||b.value,class:"w-full bg-[#E57373] text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-[#d45d5d] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[b.value?(n(),r("div",Rt)):i("",!0),e("span",null,s(t.$t("cancelModal.confirm")),1)],8,Tt),e("button",{onClick:a[5]||(a[5]=l=>m.value=!1),class:"w-full bg-white text-gray-500 py-4 rounded-2xl font-bold text-lg hover:bg-gray-50 transition-colors border border-gray-100"},s(t.$t("cancelModal.cancel")),1)])])]),_:1},8,["visible"])])}}},as=ee(Vt,[["__scopeId","data-v-b4fe361a"]]);export{as as default};
