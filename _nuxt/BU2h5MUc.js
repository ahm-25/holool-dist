import{_ as D,W as F,c as o,C as d,a as e,b as c,t as r,F as v,B as h,J as i,w as M,S,a6 as B,O as E,m as O,r as P,o as l}from"./3xVLZ2qR.js";import{b as m}from"./CSoW_MW-.js";import{_ as A}from"./C9Z1dL1Q.js";import{C as N}from"./BSXfmHdH.js";import{M as V}from"./EzygixSb.js";import{P as I}from"./Qam3Y7ei.js";import{S as R}from"./DBeL6SDR.js";import"./BAccf7o5.js";import"./DcEVD5g_.js";import"./itcCnCPa.js";import"./CbMxxevO.js";const T={class:"min-h-screen pb-24 font-sans text-right relative bg-[#FDF8F6]"},q={key:0,class:"flex items-center justify-center min-h-[60vh]"},z={key:1,class:"max-w-7xl mx-auto px-4 py-12 flex flex-col items-center text-center"},J={class:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mb-4"},L={class:"text-gray-500 mb-6"},U={key:2,class:"pt-8 px-4 md:px-8 max-w-7xl mx-auto"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},G={class:"space-y-4"},H={class:"flex justify-between items-center"},K={class:"text-gray-700 font-bold"},Q={class:"flex justify-between items-center"},Y={class:"text-gray-700 font-bold"},Z={class:"flex justify-between items-center"},ee={class:"text-gray-700 font-bold"},te={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},se={class:"space-y-4"},oe={key:0,class:"space-y-2"},le={class:"flex justify-between items-center"},ae={class:"text-gray-700 font-bold"},re={class:"flex justify-between items-center"},ne={class:"text-gray-700 font-bold"},de={class:"flex justify-between items-start pt-2 border-t border-gray-100"},ie={class:"flex items-center gap-1 text-[#bf4e26] font-bold"},ce={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},ue={class:"text-gray-500 text-sm leading-relaxed"},xe={class:"bg-white/60 backdrop-blur-sm border border-white rounded-3xl p-6 shadow-sm"},fe={class:"flex items-center justify-between"},be={class:"flex items-center gap-3"},me={class:"w-14 h-14 rounded-xl overflow-hidden shadow-sm"},pe=["src"],ve={class:"font-bold text-gray-800"},he={class:"flex items-center gap-1 text-gray-400 text-xs mt-1",dir:"ltr"},_e={key:0,class:"mt-12"},ge={class:"grid grid-cols-1 gap-4"},ye={class:"flex items-center gap-4 w-full md:w-auto"},we={class:"w-16 h-16 rounded-full overflow-hidden border-2 border-white shadow-sm"},ke=["src"],Ce={class:"font-bold text-gray-800 text-lg"},je={class:"flex text-yellow-400 text-xs mt-1"},$e={class:"flex items-center gap-8 w-full md:w-auto justify-between md:justify-end"},De={class:"flex flex-col items-end"},Fe={class:"flex items-baseline gap-1 text-[#bf4e26] font-bold text-2xl"},Me={key:0,class:"text-xs text-gray-400 mt-1"},Se={class:"flex gap-2"},Be=["onClick"],Ee=["onClick"],Oe={class:"mt-12 flex flex-col md:flex-row gap-4 justify-center items-center pb-20"},Pe={key:0,class:"w-full md:w-64 bg-[#bf4e26] text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-[#bf4e26]/30 hover:scale-[1.02] transition-all"},Ae={key:2,class:"w-full md:w-64 bg-gray-100 text-gray-700 py-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition-all"},Ne={class:"space-y-3"},Ve={__name:"1[id]",async setup(Ie){let b,_;const p=E().params.id,{data:y,pending:w,error:g,refresh:u}=([b,_]=F(()=>m(`/special-order-details/${p}`,{key:`special-order-${p}`})),b=await b,_(),b),s=O(()=>y.value?.data||null),x=P(!1),k=()=>{x.value=!0},C=async()=>{try{const{data:n}=await m("/orders/cancel-order",{method:"POST",body:{order_id:p}});n.value&&(n.value.key==="success"||n.value.status===!0)&&(x.value=!1,u())}catch(n){console.error("Cancel failed",n)}},j=async n=>{try{const{data:t}=await m(`/orders/accept-offer/${n}`);t.value&&(t.value.key==="success"||t.value.status===!0)&&u()}catch(t){console.error("Accept fail",t)}},$=async n=>{try{const{data:t}=await m(`/orders/refuse-offer/${n}`);t.value&&(t.value.key==="success"||t.value.status===!0)&&u()}catch(t){console.error("Reject fail",t)}};return(n,t)=>(l(),o("div",T,[d(w)?(l(),o("div",q,[...t[4]||(t[4]=[e("div",{class:"w-16 h-16 border-4 border-[#bf4e26]/20 border-t-[#bf4e26] rounded-full animate-spin"},null,-1)])])):d(g)?(l(),o("div",z,[e("div",J,[c(d(N),{class:"w-10 h-10 text-red-500"})]),t[5]||(t[5]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"}," حدث خطأ أثناء تحميل الطلب ",-1)),e("p",L,r(d(g).message||"فشل تحميل البيانات"),1),e("button",{onClick:t[0]||(t[0]=(...a)=>d(u)&&d(u)(...a)),class:"px-6 py-2 bg-[#bf4e26] text-white rounded-lg hover:bg-[#a64420] transition-colors"}," إعادة المحاولة ")])):s.value?(l(),o("div",U,[c(A,{items:[{label:"الطلبات",to:"/profile/orders",active:!1},{label:"سوق الأجهزة الطبية",to:"/profile/orders/market",active:!1},{label:"تفاصيل الطلب",active:!0}],class:"mb-8"}),e("div",W,[e("div",X,[t[9]||(t[9]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"تفاصيل الطلب :")],-1)),e("div",G,[e("div",H,[t[6]||(t[6]=e("span",{class:"text-gray-400 text-sm"},"رقم الطلب",-1)),e("span",K,r(s.value.order_num),1)]),e("div",Q,[t[7]||(t[7]=e("span",{class:"text-gray-400 text-sm"},"حالة الطلب",-1)),e("span",Y,r(s.value.status_text),1)]),e("div",Z,[t[8]||(t[8]=e("span",{class:"text-gray-400 text-sm"},"نوع الخدمة",-1)),e("span",ee,r(s.value.type_text),1)])])]),e("div",te,[t[13]||(t[13]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"تفاصيل الخدمة :")],-1)),e("div",se,[s.value.machines&&s.value.machines.length?(l(),o("div",oe,[(l(!0),o(v,null,h(s.value.machines,(a,f)=>(l(),o("div",{key:f,class:"flex flex-col gap-2"},[e("div",le,[t[10]||(t[10]=e("span",{class:"text-gray-400 text-sm"},"اسم الجهاز",-1)),e("span",ae,r(a.machine_name),1)]),e("div",re,[t[11]||(t[11]=e("span",{class:"text-gray-400 text-sm"},"عدد الأجهزة",-1)),e("span",ne,r(a.quantity)+" "+r(n.$t("cards.rentalDetails.deviceCount")),1)])]))),128))])):i("",!0),e("div",de,[t[12]||(t[12]=e("span",{class:"text-gray-400 text-sm"},"موقع التوصيل",-1)),e("div",ie,[c(d(V),{class:"w-4 h-4"}),e("span",null,r(s.value.map_desc),1)])])])]),e("div",ce,[t[14]||(t[14]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"ملاحظات :")],-1)),e("p",ue,r(s.value.notes||"لا توجد ملاحظات"),1)]),e("div",xe,[t[15]||(t[15]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-gray-800 font-bold text-lg"},"بيانات العميل :")],-1)),e("div",fe,[e("div",be,[e("div",me,[e("img",{src:s.value.user?.image||"https://placehold.co/100x100?text=User",class:"w-full h-full object-cover"},null,8,pe)]),e("div",null,[e("h4",ve,r(s.value.user?.name||"مصعب بن عمير"),1),e("div",he,[c(d(I),{class:"w-3 h-3"}),e("span",null,r(s.value.user?.phone||"966 9494 9494"),1)])])])])])]),s.value.offers&&s.value.offers.length?(l(),o("div",_e,[t[17]||(t[17]=e("h3",{class:"text-gray-800 font-bold text-xl mb-6 pr-2"}," عروض الأسعار : ",-1)),e("div",ge,[(l(!0),o(v,null,h(s.value.offers,a=>(l(),o("div",{key:a.id,class:"bg-white/40 backdrop-blur-md border border-white rounded-3xl p-5 flex flex-col md:flex-row items-center justify-between gap-6 hover:shadow-md transition-shadow"},[e("div",ye,[e("div",we,[e("img",{src:a.providable_image,class:"w-full h-full object-cover"},null,8,ke)]),e("div",null,[e("h4",Ce,r(a.providable_name),1),e("div",je,[(l(),o(v,null,h(5,f=>c(d(R),{key:f,class:"w-3.5 h-3.5 fill-current"})),64))])])]),e("div",$e,[e("div",De,[e("div",Fe,[e("span",null,r(a.price),1),t[16]||(t[16]=e("span",{class:"text-sm font-medium"},"ر.س",-1))]),a.delivery_period?(l(),o("span",Me,"مدة التوصيل: "+r(a.delivery_period),1)):i("",!0)]),e("div",Se,[e("button",{onClick:f=>j(a.id),class:"px-8 py-3 bg-[#bf4e26] text-white rounded-2xl font-bold text-sm shadow-lg shadow-[#bf4e26]/20 hover:bg-[#a64420] transition-all"}," قبول ",8,Be),e("button",{onClick:f=>$(a.id),class:"px-8 py-3 bg-red-50 text-red-500 rounded-2xl font-bold text-sm hover:bg-red-100 transition-all"}," رفض ",8,Ee)])])]))),128))])])):i("",!0),e("div",Oe,[s.value.buttons?.has_offer===!1?(l(),o("button",Pe," إضافة عرض السعر ")):i("",!0),s.value.buttons?.cancel?(l(),o("button",{key:1,onClick:k,class:"w-full md:w-64 bg-white border-2 border-[#EC2D30] text-[#EC2D30] py-4 rounded-2xl font-bold text-lg hover:bg-red-50 transition-all"}," رفض ")):i("",!0),s.value.buttons?.contact_with_admin?(l(),o("button",Ae," تواصل مع الإدارة ")):i("",!0)])])):i("",!0),c(B,{name:"scale"},{default:M(()=>[x.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:t[3]||(t[3]=a=>x.value=!1)},[e("div",{class:"bg-white w-full max-w-sm rounded-[2rem] p-8 shadow-2xl text-center",onClick:t[2]||(t[2]=S(()=>{},["stop"]))},[t[18]||(t[18]=e("div",{class:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"text-3xl font-bold"},"!")],-1)),t[19]||(t[19]=e("h3",{class:"text-gray-800 font-bold text-xl mb-2"},"تأكيد الإلغاء",-1)),t[20]||(t[20]=e("p",{class:"text-gray-500 mb-8 px-4"}," هل أنت متأكد من رغبتك في إلغاء هذا الطلب؟ ",-1)),e("div",Ne,[e("button",{onClick:C,class:"w-full bg-[#EC2D30] text-white py-4 rounded-2xl font-bold hover:bg-red-600 transition-all shadow-lg shadow-red-200"}," تأكيد الإلغاء "),e("button",{onClick:t[1]||(t[1]=a=>x.value=!1),class:"w-full bg-gray-50 text-gray-600 py-4 rounded-2xl font-bold hover:bg-gray-100 transition-all"}," تراجع ")])])])):i("",!0)]),_:1})]))}},Qe=D(Ve,[["__scopeId","data-v-1feff7f2"]]);export{Qe as default};
