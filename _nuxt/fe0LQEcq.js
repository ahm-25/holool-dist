import{al as l,K as A,G as R,a1 as r,N as u}from"./CPAe5scI.js";import{u as g}from"./DqsQrZ2N.js";const S=async({url:s,method:n="get",query:i,data:c,options:h})=>{const{baseURL:f}=l(),e=A(),o=R();return e.isAuthenticated||e.initAuth(),g(s,{method:n,query:i,baseURL:f,key:s,body:c,onRequest({options:t}){t.headers=t.headers||{};const a=e.getToken;a&&(t.headers.authorization=`Token ${a}`)},onResponse({response:t,options:a}){const d=[400,422,500,401,"CORS error"];t?.status===401&&(e.clearAuth(),r(()=>{u(o("/auth/login"))})),!d.includes(t.status)&&a.method!=="GET"&&t._data&&t._data.message},onResponseError({response:t}){t?.status===401&&(e.clearAuth(),r(()=>{u(o("/auth/login"))})),t._data?.errors},...h},"$eReAkU86MA")};export{S as u};
