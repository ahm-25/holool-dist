import{a as j}from"./DgXYbC5v.js";import{_ as C,V as N,g as $,c as i,a as o,t as l,J as h,F as B,B as A,r as v,m as V,o as r,I as E}from"./DxUUb53P.js";import"./BT8WpdOU.js";const S={class:"min-h-screen flex items-center justify-center p-4"},q={class:"w-full max-w-3xl rounded-3xl bg-[#d8b7aa]/55 backdrop-blur-md border border-white/10 shadow-2xl p-6 sm:p-8"},F={class:"flex items-center justify-between mb-6"},I={class:"text-xl sm:text-2xl font-bold text-[#2b1b16]"},L={key:0,class:"flex items-center justify-center py-16"},D={key:1},H={key:0,class:"mb-4 rounded-xl bg-red-50/90 text-red-800 p-4 border border-red-200"},J={class:"flex items-center justify-between gap-3"},O={class:"text-sm font-semibold"},P={key:1,class:"space-y-3"},Z={class:"w-16 shrink-0 flex flex-col items-center justify-between py-2 text-[#2b1b16]/70"},z={class:"text-[10px] font-semibold leading-none"},G=["onClick","aria-label"],K={class:"flex-1 min-w-0 rounded-2xl bg-white/35 border border-white/25 px-4 py-3"},Q={class:"text-sm sm:text-base font-bold text-[#2b1b16] leading-snug truncate"},R={class:"mt-1 text-xs sm:text-sm text-[#2b1b16]/80 leading-relaxed"},T={key:0,class:"pt-4 flex items-center justify-between"},U={class:"text-xs text-[#2b1b16]/70"},W=["disabled"],X={key:2,class:"text-center text-[#2b1b16]/70 py-14"},Y={__name:"index",setup(ee){const{get:p}=j(),n=v([]),m=v(!0),b=v(!1),u=v(null),d=v(null),c=v(1),{$i18n:x}=N(),_=e=>{if(e==null)return"";const s=String(e);return x?.t&&x.t(s)||s},y=V(()=>{const e=d.value;if(!e)return!1;const s=Number(e.total_pages||0),a=Number(e.current_page||0);return s>0&&a>0&&a<s}),g=e=>{const s=e?.data?.notifications||null,a=Array.isArray(s?.data)?s.data:[],w=s?.pagination||null;return{list:a,pag:w}},f=async()=>{m.value=!0,u.value=null;try{c.value=1;const e=await p("/notifications",{query:{page:c.value}}),{list:s,pag:a}=g(e);d.value=a,n.value=s}catch{u.value=t("notifications.loadError"),n.value=[],d.value=null}finally{m.value=!1}},k=async()=>{if(!(!y.value||b.value)){b.value=!0,u.value=null;try{c.value=c.value+1;const e=await p("/notifications",{query:{page:c.value}}),{list:s,pag:a}=g(e);d.value=a,s.length&&(n.value=[...n.value,...s])}catch{u.value=t("notifications.loadMoreError"),c.value=Math.max(1,c.value-1)}finally{b.value=!1}}},M=e=>{n.value=n.value.filter(s=>s.id!==e)};return $(f),(e,s)=>(r(),i("div",S,[o("div",q,[o("div",F,[o("h1",I,l(e.$t("notifications.title")),1),o("button",{onClick:f,class:"text-sm font-semibold text-[#2b1b16]/80 hover:text-[#2b1b16] underline underline-offset-4"},l(e.$t("common.refresh")),1)]),m.value?(r(),i("div",L,[...s[0]||(s[0]=[o("span",{class:"loader"},null,-1)])])):(r(),i("div",D,[u.value?(r(),i("div",H,[o("div",J,[o("div",O,l(u.value),1),o("button",{onClick:f,class:"text-sm underline underline-offset-4 text-red-700"},l(e.$t("common.retry")),1)])])):h("",!0),n.value&&n.value.length?(r(),i("div",P,[(r(!0),i(B,null,A(n.value,a=>(r(),i("div",{key:a.id,class:"flex items-stretch gap-3"},[o("div",Z,[o("div",z,l(a.created_at||""),1),o("button",{type:"button",onClick:w=>M(a.id),class:"mt-2 inline-flex items-center justify-center w-8 h-8 rounded-lg bg-white/40 hover:bg-white/55 border border-white/30","aria-label":e.$t("common.delete"),title:"حذف"},[...s[1]||(s[1]=[o("svg",{class:"w-4 h-4 text-[#b42318]",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[o("path",{d:"M9 3h6m-7 4h8m-9 0 1 14h8l1-14M10 11v7m4-7v7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,G)]),o("div",K,[o("div",Q,l(_(a.title)),1),o("div",R,l(_(a.body)),1)]),s[2]||(s[2]=E('<div class="w-12 shrink-0 flex items-start justify-center pt-2" data-v-52c8e349><div class="w-10 h-10 rounded-full bg-white/55 border border-white/35 flex items-center justify-center" data-v-52c8e349><svg class="w-5 h-5 text-[#2b1b16]/70" viewBox="0 0 24 24" fill="none" aria-hidden="true" data-v-52c8e349><path d="M4 12a8 8 0 0 1 16 0v5a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3v-5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-52c8e349></path><path d="M9 10h.01M15 10h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round" data-v-52c8e349></path></svg></div></div>',1))]))),128)),d.value&&d.value.total_pages>1?(r(),i("div",T,[o("div",U,l(d.value.count_items??n.value.length)+" / "+l(d.value.total_items??d.value.count_items??n.value.length),1),y.value?(r(),i("button",{key:0,type:"button",disabled:b.value,onClick:k,class:"px-4 py-2 rounded-xl bg-white/45 hover:bg-white/60 border border-white/30 text-sm font-semibold text-[#2b1b16] disabled:opacity-60"},l(b.value?e.$t("common.loading"):e.$t("common.loadMore")),9,W)):h("",!0)])):h("",!0)])):(r(),i("div",X,l(e.$t("notifications.empty")),1))]))])]))}},ae=C(Y,[["__scopeId","data-v-52c8e349"]]);export{ae as default};
