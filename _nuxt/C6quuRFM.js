import{_ as W}from"./6jnZI_G-.js";import{_ as I}from"./VGjYk_EY.js";import{c as F,g as q,b as S,f as O,u as z,i as J,F as x}from"./B3dmQa2B.js";import{a as G}from"./DWqLB9xz.js";import{_ as H,E as M,G as K,N as Q,u as U,c as n,a as e,b as i,C as o,t as c,F as X,B as Y,w as _,T as b,J as p,d as Z,r as A,m as ee,o as r}from"./h6HqRVQq.js";import{u as te}from"./DFwV8OV1.js";import{P as D}from"./3UvKgMKn.js";import{M as se}from"./Bnnt0h7f.js";import"./Dj9jpDiL.js";import"./BiCIsX7_.js";import"./ByyYxIWr.js";import"./6Vc3OHWG.js";import"./DJeBiled.js";const ae={class:"min-h-screen radial-gradient-page py-12 px-4 font-expo"},oe={class:"container mx-auto max-w-4xl"},le={class:"flex justify-start mb-8"},ne={class:"bg-white/40 backdrop-blur-xl rounded-[50px] p-8 md:p-14 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-white/40"},re={class:"space-y-4"},ie={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},ce={class:"flex-1 w-full"},de=["placeholder"],ue={key:0,class:"text-red-500 text-xs mt-1 block px-2"},pe={class:"w-full md:w-32"},me=["placeholder"],he={key:0,class:"text-red-500 text-xs mt-1 block text-center"},ge={class:"flex gap-2"},fe=["onClick"],xe={class:"space-y-4"},_e={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},be={class:"relative group"},ye=["placeholder"],ve={key:0,class:"text-red-500 text-xs mt-1 block px-2"},we={class:"space-y-4"},ke={class:"block text-[#4A2D1F] font-bold text-xl px-2 text-start"},qe=["placeholder"],Se={key:0,class:"text-red-500 text-xs mt-1 block px-2"},$e={class:"flex justify-center pt-6"},Pe=["disabled"],Fe={key:0,class:"flex items-center justify-center gap-3"},Ae={key:1,class:"relative z-10"},De={__name:"index",setup(Re){const{locale:Be,t:a}=M(),y=K(),v=te(),{api:R}=G(),B=ee(()=>[{label:a("navigation.home"),to:y("/")},{label:a("categories.medicalSales.title"),to:y("/profile/sections/medical-sales")},{label:a("categories.medicalSales.specialRequestPage.title"),active:!0}]),C=F({machines:O().of(F({machine_name:S().required(a("validation.required")),quantity:q().required(a("validation.required")).min(1,a("validation.minValue",{min:1}))})).min(1,a("validation.required")),map_desc:S().required(a("validation.required")),notes:S().required(a("validation.required")),lat:q().required(),lng:q().required()}),{handleSubmit:E,values:Ce,setFieldValue:w}=z({validationSchema:C,initialValues:{lat:null,lng:null,map_desc:"",notes:"",machines:[{machine_name:"",quantity:1}]}}),{fields:k,push:N,remove:V}=J("machines"),h=A(!1),g=A(!1),L=()=>{N({machine_name:"",quantity:1})},$=()=>{g.value=!0},j=t=>{w("lat",t.lat),w("lng",t.lng),w("map_desc",t.address),g.value=!1},P=E(async t=>{h.value=!0;try{const s=await R("/create-special-order",{method:"POST",body:{lat:t.lat,lng:t.lng,map_desc:t.map_desc,notes:t.notes,machines:JSON.stringify(t.machines)}});if(s&&(s.key==="success"||s.status===!0))v.success(a("categories.medicalSales.specialRequestPage.success")),Q(y("/profile/sections/medical-sales"));else{const m=s?.msg||s?.message||a("error.somethingWentWrong");v.error(m)}}catch(s){console.error("Submit special request error:",s);const m=s?.error||s?.message||s?.data?.message||a("error.somethingWentWrong");v.error(m)}finally{h.value=!1}});return U({title:a("categories.medicalSales.specialRequestPage.title")}),(t,s)=>{const m=W,T=I;return r(),n("div",ae,[e("div",oe,[e("div",le,[i(m,{items:B.value,class:"!p-0"},null,8,["items"])]),e("div",ne,[e("form",{onSubmit:s[0]||(s[0]=(...d)=>o(P)&&o(P)(...d)),class:"space-y-10"},[e("div",re,[e("label",ie,c(t.$t("categories.medicalSales.specialRequestPage.requiredDevices")),1),(r(!0),n(X,null,Y(o(k),(d,l)=>(r(),n("div",{key:d.key,class:"flex flex-col md:flex-row gap-4 items-start md:items-center animate-fade-in"},[e("div",ce,[i(o(x),{name:`machines[${l}].machine_name`},{default:_(({field:f,errorMessage:u})=>[e("input",b({ref_for:!0},f,{type:"text",placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceName"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":u}]}),null,16,de),u?(r(),n("span",ue,c(u),1)):p("",!0)]),_:1},8,["name"])]),e("div",pe,[i(o(x),{name:`machines[${l}].quantity`},{default:_(({field:f,errorMessage:u})=>[e("input",b({ref_for:!0},f,{type:"number",min:"1",placeholder:t.$t("categories.medicalSales.specialRequestPage.count"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-4 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold text-center no-arrow placeholder:text-[#8B7E74]",{"ring-2 ring-red-500/50":u}]}),null,16,me),u?(r(),n("span",he,c(u),1)):p("",!0)]),_:1},8,["name"])]),e("div",ge,[l===o(k).length-1?(r(),n("button",{key:0,type:"button",onClick:L,class:"bg-[#1A1A1A] text-white w-14 h-14 rounded-xl flex items-center justify-center hover:bg-black transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-black/10"},[i(o(D),{class:"w-6 h-6"})])):p("",!0),o(k).length>1?(r(),n("button",{key:1,type:"button",onClick:f=>o(V)(l),class:"bg-red-500/10 text-red-500 w-14 h-14 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-red-500/5"},[i(o(se),{class:"w-6 h-6"})],8,fe)):p("",!0)])]))),128))]),e("div",xe,[e("label",_e,c(t.$t("categories.medicalSales.specialRequestPage.deviceLocation")),1),e("div",be,[i(o(x),{name:"map_desc"},{default:_(({field:d,errorMessage:l})=>[e("input",b(d,{type:"text",readonly:"",onClick:$,placeholder:t.$t("categories.medicalSales.specialRequestPage.deviceLocation"),class:["w-full bg-white/60 border-none rounded-2xl py-5 px-8 rtl:pl-16 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold cursor-pointer transition-all placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":l}]}),null,16,ye),l?(r(),n("span",ve,c(l),1)):p("",!0)]),_:1}),e("button",{type:"button",onClick:$,class:"absolute rtl:left-4 ltr:right-4 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-xl border border-white transition-all transform hover:scale-110 shadow-sm text-primary"},[i(o(D),{class:"w-5 h-5"})])])]),e("div",we,[e("label",ke,c(t.$t("categories.medicalSales.specialRequestPage.notes")),1),i(o(x),{name:"notes"},{default:_(({field:d,errorMessage:l})=>[e("textarea",b(d,{placeholder:t.$t("categories.medicalSales.specialRequestPage.notes"),rows:"6",class:["w-full bg-white/60 border-none rounded-[32px] py-5 px-8 focus:ring-2 focus:ring-primary/20 shadow-inner-light text-[#4A2D1F] font-bold resize-none placeholder:text-[#8B7E74] text-start",{"ring-2 ring-red-500/50":l}]}),null,16,qe),l?(r(),n("span",Se,c(l),1)):p("",!0)]),_:1})]),e("div",$e,[e("button",{type:"submit",disabled:h.value,class:"relative overflow-hidden group bg-gradient-to-r from-[#AC4520] to-[#E36D45] text-white px-20 py-5 rounded-[24px] font-bold text-xl transition-all transform hover:-translate-y-2 hover:shadow-[0_20px_40px_rgba(172,69,32,0.3)] disabled:opacity-50 min-w-[280px]"},[s[3]||(s[3]=e("div",{class:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"},null,-1)),h.value?(r(),n("span",Fe,[s[2]||(s[2]=e("span",{class:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),Z(" "+c(t.$t("common.sending")),1)])):(r(),n("span",Ae,c(t.$t("categories.medicalSales.specialRequestPage.send")),1))],8,Pe)])],32)])]),i(T,{"is-open":g.value,onClose:s[1]||(s[1]=d=>g.value=!1),onLocationSelected:j},null,8,["is-open"])])}}},Me=H(De,[["__scopeId","data-v-bf30ea13"]]);export{Me as default};
