import{_ as E}from"./D7RKH-mR.js";import{u as F,F as g,E as v}from"./uJUmDXSV.js";import{u as A}from"./C7oxTUin.js";import{r as p,K as I,H as L,G as N,E as D,a0 as M,c as r,o as n,a as s,b as l,C as t,t as h,w as b,T as _,d as T}from"./BpUuUup8.js";import{u as R}from"./DeRbuwf6.js";import{e as x,a as y}from"./f__Oa2D6.js";import{c as G}from"./BvtZfyjE.js";import"./D2735X9G.js";import"./AW1qmVfM.js";/**
 * @license lucide-vue-next v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=G("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),H={class:"min-h-screen w-full relative overflow-hidden p-6 sm:p-10"},K={class:"relative z-10 transition-all duration-700"},O={class:"w-full max-w-2xl px-4 z-10 mx-auto"},q={class:"bg-white/20 backdrop-blur-xl border border-white/40 rounded-[2.5rem] shadow-2xl shadow-[#8B4513]/10 p-8 md:p-12 relative overflow-hidden"},J={class:"flex flex-col gap-2 w-full"},Q={class:"text-[#8B4513] text-sm font-semibold pr-1"},U={class:"relative group"},W={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},X=["type","placeholder"],Y=["src"],Z=["src"],ss={class:"flex flex-col gap-2 w-full"},es={class:"flex justify-between items-center"},ts={class:"text-[#8B4513] text-sm font-semibold pr-1"},os={class:"relative group"},as={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},ls=["type","placeholder"],rs=["src"],ns=["src"],is={class:"flex flex-col gap-2 w-full"},ds={class:"text-[#8B4513] text-sm font-semibold pr-1"},cs={class:"relative group"},us={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500/60 pointer-events-none"},ps=["type","placeholder"],hs=["src"],ws=["src"],ms={class:"mt-6 flex justify-center w-full"},fs=["disabled"],gs={key:0,class:"inline-flex items-center gap-2"},vs={key:1},zs={__name:"change-password",setup(bs){const{passwordChangeSchema:$}=A(),{handleSubmit:B,setFieldValue:_s,resetForm:C}=F({validationSchema:$,initialValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),d=p(!1),c=p(!1),u=p(!1);p(!1);const w=p(!1),j=I(),m=R(),S=L(),z=N(),{t:f}=D();M(()=>{C(),d.value=!1,c.value=!1,u.value=!1});const k=B(async o=>{w.value=!0;try{const e=await j.updatePassword({currentPassword:o.currentPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword});e.success?(m.success(e.message||f("settings.password_change_success")),S.push(z("/profile/more/settings"))):m.error(e.error||f("settings.password_change_failed"))}catch{m.error(f("settings.password_change_error"))}finally{w.value=!1}});return(o,e)=>{const V=E;return n(),r("div",H,[s("div",K,[l(V,{items:[{label:o.$t("settings.title"),to:"/profile/more/settings",active:!1},{label:o.$t("settings.changePassword"),to:"/profile/more/settings/change-password",active:!0}],direction:"rtl"},null,8,["items"])]),e[7]||(e[7]=s("div",{class:"absolute top-0 left-0 w-full h-full opacity-60 pointer-events-none"},[s("div",{class:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-white/20 rounded-full blur-[100px]"}),s("div",{class:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-[#8B4513]/20 rounded-full blur-[100px]"})],-1)),s("div",O,[s("div",q,[e[5]||(e[5]=s("div",{class:"absolute -top-20 -right-20 w-64 h-64 bg-white/10 rounded-full blur-3xl"},null,-1)),e[6]||(e[6]=s("div",{class:"absolute -bottom-20 -left-20 w-64 h-64 bg-[#D2691E]/10 rounded-full blur-3xl"},null,-1)),s("form",{onSubmit:e[3]||(e[3]=(...a)=>t(k)&&t(k)(...a)),class:"flex flex-col gap-6 relative z-10"},[s("div",J,[s("label",Q,h(o.$t("settings.current_password")),1),s("div",U,[s("div",W,[l(t(P),{size:"20"})]),l(t(g),{name:"currentPassword"},{default:b(({field:a,meta:i})=>[s("input",_({type:d.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.current_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,X)]),_:1}),s("button",{type:"button",onClick:e[0]||(e[0]=a=>d.value=!d.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[d.value?(n(),r("img",{key:0,src:t(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,Y)):(n(),r("img",{key:1,src:t(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,Z))])]),l(t(v),{name:"currentPassword",class:"text-red-500 text-xs pr-1"})]),s("div",ss,[s("div",es,[s("label",ts,h(o.$t("settings.new_password")),1)]),s("div",os,[s("div",as,[l(t(P),{size:"20"})]),l(t(g),{name:"newPassword"},{default:b(({field:a,meta:i})=>[s("input",_({type:c.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.new_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,ls)]),_:1}),s("button",{type:"button",onClick:e[1]||(e[1]=a=>c.value=!c.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[c.value?(n(),r("img",{key:0,src:t(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,rs)):(n(),r("img",{key:1,src:t(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,ns))])]),l(t(v),{name:"newPassword",class:"text-red-500 text-xs pr-1"})]),s("div",is,[s("label",ds,h(o.$t("settings.confirm_password")),1),s("div",cs,[s("div",us,[l(t(P),{size:"20"})]),l(t(g),{name:"confirmPassword"},{default:b(({field:a,meta:i})=>[s("input",_({type:u.value?"text":"password"},a,{placeholder:o.$t("settings.placeholders.confirm_password"),class:["main-input rounded-xl py-3 pr-10 pl-10","text-gray-700 placeholder-gray-400/80 outline-none transition-all duration-300 text-right",i.touched&&i.invalid&&"main-input-error"],dir:"rtl"}),null,16,ps)]),_:1}),s("button",{type:"button",onClick:e[2]||(e[2]=a=>u.value=!u.value),class:"absolute left-3 top-1/2 -translate-y-1/2"},[u.value?(n(),r("img",{key:0,src:t(x),alt:"hide password",class:"w-5 h-5 object-contain"},null,8,hs)):(n(),r("img",{key:1,src:t(y),alt:"show password",class:"w-5 h-5 object-contain"},null,8,ws))])]),l(t(v),{name:"confirmPassword",class:"text-red-500 text-xs pr-1"})]),s("div",ms,[s("button",{type:"submit",disabled:w.value,class:"bg-gradient-to-r from-[#9A4010] to-[#CD6428] hover:from-[#8B3505] hover:to-[#B05015] text-white font-bold py-3 px-16 rounded-xl shadow-lg shadow-[#9A4010]/30 transform transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"},[w.value?(n(),r("span",gs,[e[4]||(e[4]=s("span",{class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),T(" "+h(o.$t("common.updating")),1)])):(n(),r("span",vs,h(o.$t("common.edit")),1))],8,fs)])],32)])])])}}};export{zs as default};
