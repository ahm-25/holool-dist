import{_ as N}from"./6jnZI_G-.js";import{a7 as $,E as F,G as z,n as B,W as M,c as d,a as e,b as m,C as l,t as a,J as P,I as S,A as _,m as h,r as v,N as T,o as i}from"./h6HqRVQq.js";import{u as A}from"./DFwV8OV1.js";import{u as I,b as W}from"./DWqLB9xz.js";import{r as Z}from"./DJeBiled.js";import{L as g}from"./B2GNOD2j.js";import{P as G}from"./3UvKgMKn.js";import{M as H}from"./Bnnt0h7f.js";import{c as J}from"./ByyYxIWr.js";import"./Dj9jpDiL.js";import"./BiCIsX7_.js";const Q=J("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),R={class:"min-h-screen w-full p-4 md:p-8 flex items-center justify-center relative overflow-hidden"},K={class:"max-w-5xl w-full"},O={class:"mb-12"},U={key:0,class:"flex justify-center items-center py-20"},X={key:1,class:"text-center py-20 text-red-500"},Y={key:2,class:"flex flex-col md:flex-row gap-8 lg:gap-12 items-start"},ee={class:"w-full md:w-1/3"},te={class:"relative group overflow-hidden rounded-[2rem] shadow-xl border-[6px] border-white/30"},se=["src","alt"],ae={class:"w-full md:w-2/3 flex flex-col pt-4 text-right"},oe={class:"text-3xl md:text-4xl text-[25px] font-black mb-6 leading-tight text-[#3e2723]"},le={class:"space-y-3 mb-8"},ie={class:"flex items-center gap-2 text-[#6d5e59]"},re={class:"font-bold text-[#8d6e63]"},ce={class:"text-[#3e2723] font-bold"},ne={class:"flex items-center gap-2 text-[#6d5e59]"},de={class:"font-bold text-[16px] text-[#8d6e63]"},ue={class:"text-[#3e2723] font-bold"},pe={class:"mb-10 text-right"},me={class:"text-[18px] font-bold mb-3 text-[#5d4037]"},he={class:"text-[#5d4037]/80 leading-relaxed text-[16px] font-medium"},fe={class:"flex flex-col-reverse md:flex-row items-center justify-between gap-6 w-full mt-auto"},xe={class:"flex items-center gap-6 bg-[#E8D5CC]/50 p-2 rounded-2xl border border-[#fffaf8]/20"},_e={class:"flex flex-col items-center"},ve={class:"flex items-center gap-4 px-2"},ge=["disabled"],be={class:"w-8 text-center font-bold text-xl text-[#3e2723]"},we={key:0,class:"text-xs text-[#8d6e63] mt-1 font-bold"},ye={class:"flex items-center gap-1 px-2"},ke={class:"text-[24px] font-black text-[#8F300E]"},Ce=["disabled"],Le={class:"mt-1 text-[14px]"},Se={__name:"index",async setup(Ve){let u,f;const p=$(),{t:n}=F(),b=z(),x=A(),o=v(1),r=v(!1);B(()=>p.query.id,()=>{o.value=1});const{data:w,pending:y,error:k}=([u,f]=M(()=>W(()=>`/machine-details/${p.query.id}`,{key:"product-details-view",watch:[()=>p.query.id]})),u=await u,f(),u),s=h(()=>w.value?.data||{}),C=h(()=>[{label:n("navigation.home","الرئيسية"),to:"/",active:!1},{label:n("categories.medicalSales.title","بيع الأجهزة الطبية"),to:"/profile/sections/medical-sales",active:!1},{label:s.value.title||n("pages.productDetails.title"),to:"",active:!0}]),L=h(()=>s.value.images&&s.value.images.length>0?s.value.images[0].image:"https://images.unsplash.com/photo-1516549655169-df83a253831f?q=80&w=2000&auto=format&fit=crop"),V=()=>{const t=Number(s.value.quantity);t&&o.value>=t||(o.value+=1)},q=()=>{o.value>1&&(o.value-=1)},{upload:D}=I(),E=async()=>{if(!r.value){r.value=!0;try{const t=new FormData;t.append("machine_id",p.query.id),t.append("quantity",o.value);const c=await D("/orders/add-to-cart",t);console.log("Added to cart successfully:",c),x.success(n("products.addedToCart")),Z("/orders/get-cart-items"),await T(b("/profile/cart"))}catch(t){console.error("Error adding to cart:",t),x.error(t.error||n("common.unknownError"))}finally{r.value=!1}}};return(t,c)=>{const j=N;return i(),d("div",R,[e("div",K,[e("div",O,[m(j,{items:C.value,direction:"ltr"},null,8,["items"])]),l(y)?(i(),d("div",U,[m(l(g),{class:"animate-spin text-[#a64e2e]",size:"48"})])):l(k)?(i(),d("div",X,a(t.$t("pages.productDetails.loadError")),1)):(i(),d("div",Y,[e("div",ee,[e("div",te,[e("img",{src:L.value,alt:s.value.title,class:"w-full h-[400px] md:h-[550px] object-cover"},null,8,se)])]),e("div",ae,[e("h1",oe,a(s.value.title),1),e("div",le,[e("div",ie,[e("span",re,a(t.$t("devices.class"))+" :",1),e("span",ce,a(s.value.device_class),1)]),e("div",ne,[e("span",de,a(t.$t("categories.medicalSales.deviceStatus"))+" :",1),e("span",ue,a(s.value.new_text),1)])]),e("div",pe,[e("h3",me,a(t.$t("common.description")),1),e("p",he,a(s.value.description),1)]),e("div",fe,[e("div",xe,[e("div",_e,[e("div",ve,[e("button",{onClick:V,disabled:s.value.quantity&&o.value>=Number(s.value.quantity),class:"w-[20px] h-[20px] flex items-center justify-center background-btn text-white rounded-full hover:bg-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[m(l(G),{size:"14",strokeWidth:"2"})],8,ge),e("span",be,a(o.value),1),e("button",{onClick:q,class:"w-[24] h-[24] flex items-center justify-center bg-[#3e2723] text-white rounded-full hover:bg-black transition-colors"},[m(l(H),{size:"14",strokeWidth:"3"})])]),s.value.quantity?(i(),d("span",we,a(t.$t("pages.productDetails.available"))+": "+a(s.value.quantity),1)):P("",!0)]),c[1]||(c[1]=e("div",{class:"w-px h-8 bg-[#8F300E]/20"},null,-1)),e("div",ye,[e("span",ke,a(s.value.price),1),c[0]||(c[0]=S('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 22 28" fill="none"><g clip-path="url(#clip0_568_11338)"><path d="M13.691 24.8048C13.2984 25.7961 13.0389 26.8718 12.9395 28L21.2473 25.9889C21.6399 24.9978 21.8992 23.9218 21.9988 22.7937L13.691 24.8048Z" fill="#8F300E"></path><path d="M21.2485 19.9639C21.6411 18.9728 21.9006 17.8968 22 16.7687L15.5284 18.3361V15.323L21.2483 13.9388C21.6409 12.9478 21.9004 11.8718 21.9998 10.7437L15.5282 12.3097V1.47378C14.5366 2.10782 13.6559 2.95179 12.94 3.94731V12.9364L10.3518 13.5629V0C9.36019 0.633816 8.47951 1.47801 7.76362 2.47353V14.1891L1.97251 15.5904C1.57993 16.5815 1.32023 17.6575 1.22061 18.7856L7.76362 17.2022V20.9966L0.751508 22.6935C0.358923 23.6845 0.0994182 24.7605 0 25.8886L7.33973 24.1124C7.93721 23.9709 8.45074 23.5686 8.78462 23.0151L10.1307 20.7425V20.7421C10.2704 20.507 10.3518 20.2235 10.3518 19.9182V16.5757L12.94 15.9493V21.9754L21.2483 19.9634L21.2485 19.9639Z" fill="#8F300E"></path></g><defs><clipPath id="clip0_568_11338"><rect width="22" height="28" fill="white"></rect></clipPath></defs></svg>',1))])]),e("button",{onClick:E,disabled:r.value,class:"background-btn text-white py-4 px-8 rounded-xl font-bold text-lg shadow-lg hover:bg-[#7a290c] hover:shadow-xl transition-all transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"},[e("span",Le,a(r.value?t.$t("pages.productDetails.addingToCart"):t.$t("pages.productDetails.addToCart")),1),r.value?(i(),_(l(g),{key:1,size:"24",strokeWidth:"2",class:"animate-spin"})):(i(),_(l(Q),{key:0,size:"24",strokeWidth:"2"}))],8,Ce)])])]))])])}}};export{Se as default};
